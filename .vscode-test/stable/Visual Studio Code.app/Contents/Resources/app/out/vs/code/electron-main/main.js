/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
(function(){function e(e){e._performanceEntries=e._performanceEntries||[];const t=2,n="function"==typeof console.timeStamp?console.timeStamp.bind(console):()=>{};return{mark:function(t){e._performanceEntries.push(t,Date.now()),n(t)},getEntries:function(){const n=[],i=e._performanceEntries;for(let e=0;e<i.length;e+=t)n.push({name:i[e],timestamp:i[e+1]});return n},getEntry:function(n){const i=e._performanceEntries;for(let e=0;e<i.length;e+=t)if(i[e]===n)return{name:i[e],timestamp:i[e+1]}},getDuration:function(n,i){const r=e._performanceEntries;let o=i,s=0;for(let e=r.length-t;e>=0;e-=t)if(r[e]===o){if(o!==i)return r[s+1]-r[e+1];s=e,o=n}return 0},importEntries:function(t){e._performanceEntries.splice(0,0,...t)},exportEntries:function(){return e._performanceEntries.slice(0)}}}
var t=["exports","require","vs/base/common/event","vs/base/common/platform","vs/base/common/path","vs/platform/instantiation/common/instantiation","vs/base/common/lifecycle","vs/platform/log/common/log","vs/base/common/uri","vs/platform/environment/common/environment","electron","vs/nls!vs/code/electron-main/main","vs/base/common/async","vs/nls","vs/platform/configuration/common/configuration","vs/base/common/objects","fs","vs/base/common/strings","vs/base/common/types","vs/base/common/errors","vs/platform/product/node/product","vs/base/common/arrays","vs/platform/workspaces/common/workspaces","os","vs/base/node/pfs","vs/platform/lifecycle/electron-main/lifecycleMain","vs/base/common/map","vs/base/common/resources","vs/platform/update/common/update","vs/base/common/uuid","vs/platform/state/common/state","vs/base/common/network","vs/platform/telemetry/common/telemetry","vs/base/common/extpath","vs/base/node/extfs","vs/base/common/cancellation","vs/base/common/json","vs/platform/windows/electron-main/windows","vs/platform/registry/common/platform","vs/platform/environment/node/argv","vs/platform/configuration/common/configurationRegistry","child_process","vs/base/common/labels","vs/platform/request/node/request","vs/base/common/amd","vs/base/node/request","vs/platform/product/node/package","vs/platform/url/common/url","vs/base/parts/ipc/node/ipc","vs/base/common/decorators","vs/platform/history/common/history","vs/base/parts/ipc/node/ipc.net","vs/platform/windows/common/windows","vs/base/common/keyCodes","vs/platform/backup/common/backup","vs/platform/instantiation/common/descriptors","vs/code/electron-main/theme","vs/platform/instantiation/common/serviceCollection","crypto","vs/platform/update/electron-main/abstractUpdateService","vs/base/common/functional","vs/platform/launch/electron-main/launchService","vs/base/node/id","vs/platform/files/common/files","vs/platform/menubar/common/menubar","vs/platform/diagnostics/electron-main/diagnosticsService","vs/platform/telemetry/node/commonProperties","vs/base/common/normalization","vs/platform/configuration/common/configurationModels","vs/base/common/glob","vs/base/common/scanCode","vs/base/common/iterator","vs/platform/remote/common/remoteHosts","vs/code/node/paths","vs/platform/extensionManagement/common/extensionManagementUtil","vs/nls!vs/code/electron-main/window","vs/nls!vs/code/electron-main/windows","vs/nls!vs/platform/configuration/common/configurationRegistry","vs/nls!vs/platform/environment/node/argv","vs/nls!vs/platform/environment/node/argvHelper","vs/nls!vs/platform/extensionManagement/common/extensionManagement","vs/nls!vs/platform/extensions/node/extensionValidator","vs/nls!vs/platform/history/electron-main/historyMainService","vs/nls!vs/platform/issue/electron-main/issueService","vs/nls!vs/platform/label/common/label","vs/nls!vs/platform/menubar/electron-main/menubar","vs/nls!vs/platform/request/node/request","vs/nls!vs/platform/telemetry/common/telemetryService","vs/nls!vs/platform/update/node/update.config.contribution","vs/nls!vs/platform/windows/electron-main/windowsService","vs/nls!vs/platform/workspaces/common/workspaces","vs/base/common/mime","vs/base/node/paths","vs/base/node/proxy","url","vs/platform/instantiation/common/graph","vs/base/node/ps","vs/base/common/collections","vs/platform/driver/node/driver","vs/base/node/stats","vs/platform/extensionManagement/common/extensionManagement","vs/base/node/stream","vs/platform/environment/node/argvHelper","vs/base/node/encoding","vs/base/common/linkedList","vs/platform/instantiation/common/instantiationService","vs/platform/instantiation/node/instantiationService","vs/platform/issue/common/issue","vs/platform/issue/node/issueIpc","vs/platform/keybinding/common/baseResolvedKeybinding","vs/platform/keybinding/common/usLayoutResolvedKeybinding","vs/platform/lifecycle/common/lifecycle","vs/base/node/config","vs/platform/log/common/bufferLog","vs/platform/log/node/logIpc","vs/platform/log/node/spdlogService","vs/base/common/jsonFormatter","vs/platform/menubar/node/menubarIpc","vs/base/node/storage","vs/platform/extensions/node/extensionValidator","vs/base/parts/contextmenu/common/contextmenu","vs/code/electron-main/logUploader","vs/base/parts/contextmenu/electron-main/contextmenu","vs/platform/environment/node/environmentService","vs/base/common/jsonEdit","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/base/node/crypto","vs/base/parts/ipc/node/ipc.electron","vs/base/parts/ipc/electron-main/ipc.electron-main","vs/platform/configuration/node/configuration","vs/platform/configuration/node/configurationService","vs/base/common/keybindingParser","vs/platform/remote/node/remoteAgentConnection","vs/platform/remote/node/remoteAgentFileSystemChannel","vs/code/electron-main/keyboard","vs/base/common/assert","vs/code/electron-main/windowsStateStorage","vs/code/electron-main/sharedProcess","vs/platform/state/node/stateService","vs/platform/storage/node/storageMainService","vs/base/node/flow","vs/platform/telemetry/common/telemetryService","vs/platform/telemetry/common/telemetryUtils","vs/code/node/shellEnv","vs/platform/telemetry/node/telemetryIpc","vs/platform/telemetry/node/workbenchCommonProperties","vs/platform/storage/node/storageIpc","vs/code/node/wait","vs/nls!vs/base/common/keybindingLabels","vs/platform/update/electron-main/updateService.darwin","vs/platform/update/electron-main/updateService.snap","vs/platform/update/node/update.config.contribution","vs/code/code.main","vs/platform/update/node/updateIpc","assert","vs/platform/url/common/urlService","vs/platform/url/node/urlIpc","vs/base/common/date","vs/base/common/keybindingLabels","vs/code/electron-main/auth","vs/platform/driver/electron-main/driver","vs/platform/menubar/electron-main/menubar","vs/platform/menubar/electron-main/menubarService","vs/platform/url/electron-main/electronUrlListener","vs/platform/windows/electron-main/windowsService","vs/nls!vs/code/electron-main/app","vs/code/node/windowsFinder","vs/platform/backup/electron-main/backupMainService","vs/platform/history/electron-main/historyStorage","vs/platform/label/common/label","vs/platform/history/electron-main/historyMainService","vs/nls!vs/code/electron-main/auth","vs/platform/issue/electron-main/issueService","vs/platform/windows/node/windowsIpc","vs/platform/workspace/common/workspace","vs/platform/workspaces/electron-main/workspacesMainService","vs/platform/workspaces/node/workspacesIpc","vs/nls!vs/code/electron-main/logUploader","vs/platform/extensionManagement/node/extensionGalleryService","vs/code/electron-main/window","vs/code/electron-main/windows","vs/platform/request/node/requestService","vs/platform/request/electron-main/requestService","vs/platform/update/electron-main/updateService.linux","vs/platform/update/electron-main/updateService.win32","vs/code/electron-main/app","vs/base/common/performance","net","stream","native-keymap","zlib","vs/code/electron-main/main","iconv-lite","minimist"],n=function(e){
for(var n=[],i=0,r=e.length;i<r;i++)n[i]=t[e[i]];return n};define(t[135],n([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ok=function(e,t){if(!e)throw new Error(t?"Assertion failed ("+t+")":"Assertion Failed")}}),define(t[97],n([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=Object.prototype.hasOwnProperty;t.values=function(e){const t=[];for(let i in e)n.call(e,i)&&t.push(e[i]);return t},t.size=function(e){let t=0;for(let i in e)n.call(e,i)&&(t+=1);return t},t.first=function(e){for(let t in e)if(n.call(e,t))return e[t]},t.forEach=function(e,t){for(let i in e)if(n.call(e,i)&&!1===t({key:i,value:e[i]},function(){delete e[i]}))return},t.groupBy=function(e,t){const n=Object.create(null);for(const i of e){const e=t(i);let r=n[e];r||(r=n[e]=[]),r.push(i)}return n},t.fromMap=function(e){const t=Object.create(null);return e&&e.forEach((e,n)=>{t[n]=e}),t}}),define(t[49],n([1,0]),function(e,t){"use strict";function n(e){return(t,n,i)=>{
let r=null,o=null;if("function"==typeof i.value?(r="value",o=i.value):"function"==typeof i.get&&(r="get",o=i.get),!o)throw new Error("not supported");i[r]=e(o,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=n,t.memoize=function(e,t,n){let i=null,r=null;if("function"==typeof n.value?(i="value",0!==(r=n.value).length&&console.warn("Memoize should only be used in functions with zero parameters")):"function"==typeof n.get&&(i="get",r=n.get),!r)throw new Error("not supported");const o=`$memoize$${t}`;n[i]=function(...e){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,e)}),this[o]}},t.debounce=function(e,t,i){return n((n,r)=>{const o=`$debounce$${r}`,s=`$debounce$result$${r}`;return function(...r){this[s]||(this[s]=i?i():void 0),clearTimeout(this[o]),t&&(this[s]=t(this[s],...r),r=[this[s]]),this[o]=setTimeout(()=>{n.apply(this,r),this[s]=i?i():void 0},e)}})}}),define(t[19],n([1,0]),function(e,t){"use strict"
;function n(e){return e instanceof Error&&e.name===r&&e.message===r}Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{if(e.stack)throw new Error(e.message+"\n\n"+e.stack);throw e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}t.ErrorHandler=i,t.errorHandler=new i,t.setUnexpectedErrorHandler=function(e){t.errorHandler.setUnexpectedErrorHandler(e)},t.onUnexpectedError=function(e){n(e)||t.errorHandler.onUnexpectedError(e)},t.onUnexpectedExternalError=function(e){n(e)||t.errorHandler.onUnexpectedExternalError(e)},
t.transformErrorForSerialization=function(e){if(e instanceof Error){let{name:t,message:n}=e;return{$isError:!0,name:t,message:n,stack:e.stacktrace||e.stack}}return e};const r="Canceled";t.isPromiseCanceledError=n,t.canceled=function(){let e=new Error(r);return e.name=e.message,e},t.illegalArgument=function(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")},t.illegalState=function(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")},t.readonly=function(e){return e?new Error(`readonly property '${e} cannot be changed'`):new Error("readonly property cannot be changed")},t.disposed=function(e){const t=new Error(`${e} has been disposed`);return t.name="DISPOSED",t},t.getErrorMessage=function(e){return e?e.message?e.message:e.stack?e.stack.split("\n")[0]:String(e):"Error"}});var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){
e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})};define(t[21],n([1,0,19]),function(e,t,n){"use strict";function r(e,t){let n=0,i=e.length;if(0===i)return 0;for(;n<i;){let r=Math.floor((n+i)/2);t(e[r])?i=r:n=r+1}return n}function o(e,t){return s(e,t,0,e.length-1,[]),e}function s(e,t,n,i,r){if(i<=n)return;let o=n+(i-n)/2|0;s(e,t,n,o,r),s(e,t,o+1,i,r),t(e[o],e[o+1])<=0||function(e,t,n,i,r,o){let s=n,a=i+1;for(let t=n;t<=r;t++)o[t]=e[t];for(let c=n;c<=r;c++)s>i?e[c]=o[a++]:a>r?e[c]=o[s++]:t(o[a],o[s])<0?e[c]=o[a++]:e[c]=o[s++]}(e,t,n,o,i,r)}function a(e,t,n){function i(e,t,n){if(0===t&&0===n.length)return;const i=r[r.length-1];i&&i.start+i.deleteCount===e?(i.deleteCount+=t,i.toInsert.push(...n)):r.push({start:e,deleteCount:t,toInsert:n})}const r=[];let o=0,s=0;for(;;){if(o===e.length){i(o,0,t.slice(s));break}if(s===t.length){i(o,e.length-o,[]);break}const r=e[o],a=t[s],c=n(r,a);0===c?(o+=1,s+=1):c<0?(i(o,1,[]),o+=1):c>0&&(i(o,0,[a]),s+=1)}return r}function c(e,t,n,i,o){
for(const s=n.length;i<o;i++){const o=e[i];if(t(o,n[s-1])<0){n.pop();const e=r(n,e=>t(o,e)<0);n.splice(e,0,o)}}}function l(e,t){for(let n=0;n<e.length;n++){if(t(e[n]))return n}return-1}Object.defineProperty(t,"__esModule",{value:!0}),t.tail=function(e,t=0){return e[e.length-(1+t)]},t.tail2=function(e){if(0===e.length)throw new Error("Invalid tail call");return[e.slice(0,e.length-1),e[e.length-1]]},t.equals=function(e,t,n=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(!n(e[i],t[i]))return!1;return!0},t.binarySearch=function(e,t,n){let i=0,r=e.length-1;for(;i<=r;){let o=(i+r)/2|0,s=n(e[o],t);if(s<0)i=o+1;else{if(!(s>0))return o;r=o-1}}return-(i+1)},t.findFirstInSorted=r,t.mergeSort=o,t.groupBy=function(e,t){const n=[];let i=void 0;for(const r of o(e.slice(0),t))i&&0===t(i[0],r)?i.push(r):(i=[r],n.push(i));return n},t.sortedDiff=a,t.delta=function(e,t,n){const i=a(e,t,n),r=[],o=[]
;for(const t of i)r.push(...e.slice(t.start,t.start+t.deleteCount)),o.push(...t.toInsert);return{removed:r,added:o}},t.top=function(e,t,n){if(0===n)return[];const i=e.slice(0,n).sort(t);return c(e,t,i,n,e.length),i},t.topAsync=function(e,t,r,o,s){return 0===r?Promise.resolve([]):new Promise((a,l)=>{(()=>i(this,void 0,void 0,function*(){const i=e.length,a=e.slice(0,r).sort(t);for(let l=r,u=Math.min(r+o,i);l<i;l=u,u=Math.min(u+o,i)){if(l>r&&(yield new Promise(e=>setTimeout(e))),s&&s.isCancellationRequested)throw n.canceled();c(e,t,a,l,u)}return a}))().then(a,l)})},t.coalesce=function(e){return e?e.filter(e=>!!e):e},t.coalesceInPlace=function(e){if(!e)return;let t=0;for(let n=0;n<e.length;n++)e[n]&&(e[t]=e[n],t+=1);e.length=t},t.move=function(e,t,n){e.splice(n,0,e.splice(t,1)[0])},t.isFalsyOrEmpty=function(e){return!Array.isArray(e)||0===e.length},t.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},t.distinct=function(e,t){if(!t)return e.filter((t,n)=>e.indexOf(t)===n);const n=Object.create(null)
;return e.filter(e=>{const i=t(e);return!n[i]&&(n[i]=!0,!0)})},t.uniqueFilter=function(e){const t=Object.create(null);return n=>{const i=e(n);return!t[i]&&(t[i]=!0,!0)}},t.firstIndex=l,t.first=function(e,t,n=null){const i=l(e,t);return i<0?n:e[i]},t.commonPrefixLength=function(e,t,n=((e,t)=>e===t)){let i=0;for(let r=0,o=Math.min(e.length,t.length);r<o&&n(e[r],t[r]);r++)i++;return i},t.flatten=function(e){return[].concat(...e)},t.range=function(e,t){let n="number"==typeof t?e:0;"number"==typeof t?n=e:(n=0,t=e);const i=[];if(n<=t)for(let e=n;e<t;e++)i.push(e);else for(let e=n;e>t;e--)i.push(e);return i},t.fill=function(e,t,n=[]){for(let i=0;i<e;i++)n[i]=t;return n},t.index=function(e,t,n=(e=>e)){return e.reduce((e,i)=>{const r=t(i);return e[r]=n(i,e[r]),e},Object.create(null))},t.insert=function(e,t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}},t.arrayInsert=function(e,t,n){const i=e.slice(0,t),r=e.slice(t);return i.concat(n,r)},t.shuffle=function(e,t){let n;if("number"==typeof t){let e=t
;n=(()=>{const t=179426549*Math.sin(e++);return t-Math.floor(t)})}else n=Math.random;for(let t=e.length-1;t>0;t-=1){let i=Math.floor(n()*(t+1)),r=e[t];e[t]=e[i],e[i]=r}},t.pushToStart=function(e,t){const n=e.indexOf(t);n>-1&&(e.splice(n,1),e.unshift(t))},t.pushToEnd=function(e,t){const n=e.indexOf(t);n>-1&&(e.splice(n,1),e.push(t))},t.find=function(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(t(i,n,e))return i}},t.mapArrayOrNot=function(e,t){return Array.isArray(e)?e.map(t):t(e)}}),define(t[60],n([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.once=function(e){const t=this;let n,i=!1;return function(){return i?n:(i=!0,n=e.apply(t,arguments))}}}),define(t[71],n([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FIN={done:!0,value:void 0};var n;!function(e){function n(e,t){for(let n=e.next();!n.done;n=e.next())t(n.value)}const i={next:()=>t.FIN};e.empty=function(){return i},e.fromArray=function(e,n=0,i=e.length){return{
next:()=>n>=i?t.FIN:{done:!1,value:e[n++]}}},e.from=function(t){return t?Array.isArray(t)?e.fromArray(t):t:e.empty()},e.map=function(e,n){return{next(){const i=e.next();return i.done?t.FIN:{done:!1,value:n(i.value)}}}},e.filter=function(e,n){return{next(){for(;;){const i=e.next();if(i.done)return t.FIN;if(n(i.value))return{done:!1,value:i.value}}}}},e.forEach=n,e.collect=function(e){const t=[];return n(e,e=>t.push(e)),t}}(n=t.Iterator||(t.Iterator={})),t.getSequenceIterator=function(e){return Array.isArray(e)?n.fromArray(e):e};class i{constructor(e,t=0,n=e.length,i=t-1){this.items=e,this.start=t,this.end=n,this.index=i}first(){return this.index=this.start,this.current()}next(){return this.index=Math.min(this.index+1,this.end),this.current()}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}}t.ArrayIterator=i;class r extends i{constructor(e,t=0,n=e.length,i=t-1){super(e,t,n,i)}current(){return super.current()}previous(){
return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}parent(){return null}}t.ArrayNavigator=r;class o{constructor(e,t){this.iterator=e,this.fn=t}next(){return this.fn(this.iterator.next())}}t.MappedIterator=o;class s extends o{constructor(e,t){super(e,t),this.navigator=e}current(){return this.fn(this.navigator.current())}previous(){return this.fn(this.navigator.previous())}parent(){return this.fn(this.navigator.parent())}first(){return this.fn(this.navigator.first())}last(){return this.fn(this.navigator.last())}next(){return this.fn(this.navigator.next())}}t.MappedNavigator=s}),define(t[36],n([1,0]),function(e,t){"use strict";function n(e,t=!1){function n(t){let n=0,i=0;for(;n<t;){let t=e.charCodeAt(a);if(t>=48&&t<=57)i=16*i+t-48;else if(t>=65&&t<=70)i=16*i+t-65+10;else{if(!(t>=97&&t<=102))break;i=16*i+t-97+10}a++,n++}return n<t&&(i=-1),i}function s(){if(l="",h=0,u=a,a>=c)return u=c,d=17
;let t=e.charCodeAt(a);if(i(t)){do{a++,l+=String.fromCharCode(t),t=e.charCodeAt(a)}while(i(t));return d=15}if(r(t))return a++,l+=String.fromCharCode(t),13===t&&10===e.charCodeAt(a)&&(a++,l+="\n"),d=14;switch(t){case 123:return a++,d=1;case 125:return a++,d=2;case 91:return a++,d=3;case 93:return a++,d=4;case 58:return a++,d=6;case 44:return a++,d=5;case 34:return a++,l=function(){let t="",i=a;for(;;){if(a>=c){t+=e.substring(i,a),h=2;break}let o=e.charCodeAt(a);if(34===o){t+=e.substring(i,a),a++;break}if(92!==o){if(o>=0&&o<=31){if(r(o)){t+=e.substring(i,a),h=2;break}h=6}a++}else{if(t+=e.substring(i,a),++a>=c){h=2;break}switch(i=e.charCodeAt(a++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:let i=n(4);i>=0?t+=String.fromCharCode(i):h=4;break;default:h=5}i=a}}return t}(),d=10;case 47:let s=a-1;if(47===e.charCodeAt(a+1)){for(a+=2;a<c&&!r(e.charCodeAt(a));)a++
;return l=e.substring(s,a),d=12}if(42===e.charCodeAt(a+1)){a+=2;let t=c-1,n=!1;for(;a<t;){if(42===e.charCodeAt(a)&&47===e.charCodeAt(a+1)){a+=2,n=!0;break}a++}return n||(a++,h=1),l=e.substring(s,a),d=13}return l+=String.fromCharCode(t),a++,d=16;case 45:if(l+=String.fromCharCode(t),++a===c||!o(e.charCodeAt(a)))return d=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return l+=function(){let t=a;if(48===e.charCodeAt(a))a++;else for(a++;a<e.length&&o(e.charCodeAt(a));)a++;if(a<e.length&&46===e.charCodeAt(a)){if(!(++a<e.length&&o(e.charCodeAt(a))))return h=3,e.substring(t,a);for(a++;a<e.length&&o(e.charCodeAt(a));)a++}let n=a;if(a<e.length&&(69===e.charCodeAt(a)||101===e.charCodeAt(a)))if((++a<e.length&&43===e.charCodeAt(a)||45===e.charCodeAt(a))&&a++,a<e.length&&o(e.charCodeAt(a))){for(a++;a<e.length&&o(e.charCodeAt(a));)a++;n=a}else h=3;return e.substring(t,n)}(),d=11;default:for(;a<c&&function(e){if(i(e)||r(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:
case 58:case 44:case 47:return!1}return!0}(t);)a++,t=e.charCodeAt(a);if(u!==a){switch(l=e.substring(u,a)){case"true":return d=8;case"false":return d=9;case"null":return d=7}return d=16}return l+=String.fromCharCode(t),a++,d=16}}let a=0,c=e.length,l="",u=0,d=16,h=0;return{setPosition:function(e){a=e,l="",u=0,d=16,h=0},getPosition:()=>a,scan:t?function(){let e;do{e=s()}while(e>=12&&e<=15);return e}:s,getToken:()=>d,getTokenValue:()=>l,getTokenOffset:()=>u,getTokenLength:()=>a-u,getTokenError:()=>h}}function i(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function r(e){return 10===e||13===e||8232===e||8233===e}function o(e){return e>=48&&e<=57}function s(e){if(!e.parent||!e.parent.children)return[];let t=s(e.parent);if("property"===e.parent.type){let n=e.parent.children[0].value;t.push(n)}else if("array"===e.parent.type){let n=e.parent.children.indexOf(e);-1!==n&&t.push(n)}return t}function a(e){switch(e.type){case"array":
return e.children.map(a);case"object":let t=Object.create(null);for(let n of e.children){let e=n.children[1];e&&(t[n.children[0].value]=a(e))}return t;case"null":case"string":case"number":case"boolean":return e.value;default:return}}function c(e,t,n=!1){return t>=e.offset&&t<e.offset+e.length||n&&t===e.offset+e.length}function l(e,t,n=!1){if(c(e,t,n)){let i=e.children;if(Array.isArray(i))for(let e=0;e<i.length&&i[e].offset<=t;e++){let r=l(i[e],t,n);if(r)return r}return e}}function u(e,t,i=h.DEFAULT){function r(e){return e?()=>e(d.getTokenOffset(),d.getTokenLength()):()=>!0}function o(e){return e?t=>e(t,d.getTokenOffset(),d.getTokenLength()):()=>!0}function s(){for(;;){let e=d.scan();switch(d.getTokenError()){case 4:a(14);break;case 5:a(15);break;case 3:a(13);break;case 1:_||a(11);break;case 2:a(12);break;case 6:a(16)}switch(e){case 12:case 13:_?a(10):S();break;case 16:a(1);break;case 15:case 14:break;default:return e}}}function a(e,t=[],n=[]){if(b(e),t.length+n.length>0){let e=d.getToken();for(;17!==e;){
if(-1!==t.indexOf(e)){s();break}if(-1!==n.indexOf(e))break;e=s()}}}function c(e){let t=d.getTokenValue();return e?w(t):f(t),s(),!0}function l(){return 10!==d.getToken()?(a(3,[],[2,5]),!1):(c(!1),6===d.getToken()?(y(":"),s(),u()||a(4,[],[2,5])):a(5,[],[2,5]),!0)}function u(){switch(d.getToken()){case 3:return function(){m(),s();let e=!1;for(;4!==d.getToken()&&17!==d.getToken();){if(5===d.getToken()){if(e||a(4,[],[]),y(","),s(),4===d.getToken()&&C)break}else e&&a(6,[],[]);u()||a(4,[],[4,5]),e=!0}return v(),4!==d.getToken()?a(8,[4],[]):s(),!0}();case 1:return function(){p(),s();let e=!1;for(;2!==d.getToken()&&17!==d.getToken();){if(5===d.getToken()){if(e||a(4,[],[]),y(","),s(),2===d.getToken()&&C)break}else e&&a(6,[],[]);l()||a(4,[],[2,5]),e=!0}return g(),2!==d.getToken()?a(7,[2],[]):s(),!0}();case 10:return c(!0);default:return function(){switch(d.getToken()){case 11:let e=0;try{"number"!=typeof(e=JSON.parse(d.getTokenValue()))&&(a(2),e=0)}catch(e){a(2)}w(e);break;case 7:w(null);break;case 8:w(!0);break;case 9:
w(!1);break;default:return!1}return s(),!0}()}}let d=n(e,!1),p=r(t.onObjectBegin),f=o(t.onObjectProperty),g=r(t.onObjectEnd),m=r(t.onArrayBegin),v=r(t.onArrayEnd),w=o(t.onLiteralValue),y=o(t.onSeparator),S=r(t.onComment),b=o(t.onError),_=i&&i.disallowComments,C=i&&i.allowTrailingComma;return s(),17===d.getToken()||(u()?(17!==d.getToken()&&a(9,[],[]),!0):(a(4,[],[]),!1))}function d(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return"null"}}Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"}(t.ScanError||(t.ScanError={}));!function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",
e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"}(t.SyntaxKind||(t.SyntaxKind={}));!function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",
e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"}(t.ParseErrorCode||(t.ParseErrorCode={}));var h;!function(e){e.DEFAULT={allowTrailingComma:!0}}(h=t.ParseOptions||(t.ParseOptions={})),t.createScanner=n;var p;!function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",
e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",
e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",
e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"}(p||(p={})),t.getLocation=function(e,t){function n(e,t,n,i){s.value=e,s.offset=t,s.length=n,s.type=i,s.colonOffset=void 0,o=s}let i=[],r=new Object,o=void 0;const s={value:{},offset:0,length:0,type:"object",parent:void 0};let a=!1;try{u(e,{onObjectBegin:(e,n)=>{if(t<=e)throw r;o=void 0,a=t>e,i.push("")},onObjectProperty:(e,o,s)=>{if(t<o)throw r;if(n(e,o,s,"property"),i[i.length-1]=e,t<=o+s)throw r},onObjectEnd:(e,n)=>{if(t<=e)throw r;o=void 0,i.pop()},onArrayBegin:(e,n)=>{if(t<=e)throw r;o=void 0,i.push(0)},onArrayEnd:(e,n)=>{if(t<=e)throw r;o=void 0,i.pop()},onLiteralValue:(e,i,o)=>{if(t<i)throw r;if(n(e,i,o,d(e)),t<=i+o)throw r},onSeparator:(e,n,s)=>{if(t<=n)throw r;if(":"===e&&o&&"property"===o.type)o.colonOffset=n,a=!1,o=void 0;else if(","===e){let e=i[i.length-1]
;"number"==typeof e?i[i.length-1]=e+1:(a=!0,i[i.length-1]=""),o=void 0}}})}catch(e){if(e!==r)throw e}return{path:i,previousNode:o,isAtPropertyKey:a,matches:e=>{let t=0;for(let n=0;t<e.length&&n<i.length;n++)if(e[t]===i[n]||"*"===e[t])t++;else if("**"!==e[t])return!1;return t===e.length}}},t.parse=function(e,t=[],n=h.DEFAULT){function i(e){Array.isArray(o)?o.push(e):r&&(o[r]=e)}let r=null,o=[],s=[];return u(e,{onObjectBegin:()=>{let e={};i(e),s.push(o),o=e,r=null},onObjectProperty:e=>{r=e},onObjectEnd:()=>{o=s.pop()},onArrayBegin:()=>{let e=[];i(e),s.push(o),o=e,r=null},onArrayEnd:()=>{o=s.pop()},onLiteralValue:i,onError:(e,n,i)=>{t.push({error:e,offset:n,length:i})}},n),o[0]},t.parseTree=function(e,t=[],n=h.DEFAULT){function i(e){"property"===o.type&&(o.length=e-o.offset,o=o.parent)}function r(e){return o.children.push(e),e}let o={type:"array",offset:-1,length:-1,children:[],parent:void 0};u(e,{onObjectBegin:e=>{o=r({type:"object",offset:e,length:-1,parent:o,children:[]})},onObjectProperty:(e,t,n)=>{(o=r({
type:"property",offset:t,length:-1,parent:o,children:[]})).children.push({type:"string",value:e,offset:t,length:n,parent:o})},onObjectEnd:(e,t)=>{o.length=e+t-o.offset,o=o.parent,i(e+t)},onArrayBegin:(e,t)=>{o=r({type:"array",offset:e,length:-1,parent:o,children:[]})},onArrayEnd:(e,t)=>{o.length=e+t-o.offset,o=o.parent,i(e+t)},onLiteralValue:(e,t,n)=>{r({type:d(e),offset:t,length:n,parent:o,value:e}),i(t+n)},onSeparator:(e,t,n)=>{"property"===o.type&&(":"===e?o.colonOffset=t:","===e&&i(t))},onError:(e,n,i)=>{t.push({error:e,offset:n,length:i})}},n);let s=o.children[0];return s&&delete s.parent,s},t.findNodeAtLocation=function(e,t){if(!e)return;let n=e;for(let e of t)if("string"==typeof e){if("object"!==n.type||!Array.isArray(n.children))return;let t=!1;for(const i of n.children)if(Array.isArray(i.children)&&i.children[0].value===e){n=i.children[1],t=!0;break}if(!t)return}else{let t=e;if("array"!==n.type||t<0||!Array.isArray(n.children)||t>=n.children.length)return;n=n.children[t]}return n},t.getNodePath=s,
t.getNodeValue=a,t.contains=c,t.findNodeAtOffset=l,t.visit=u,t.stripComments=function(e,t){let i,r,o=n(e),s=[],a=0;do{switch(r=o.getPosition(),i=o.scan()){case 12:case 13:case 17:a!==r&&s.push(e.substring(a,r)),void 0!==t&&s.push(o.getTokenValue().replace(/[^\r\n]/g,t)),a=o.getPosition()}}while(17!==i);return s.join("")}}),define(t[116],n([1,0,36]),function(e,t,n){"use strict";function i(e,t,i){function s(){return g+r(f,l+v)}function a(){let e=w.scan();for(m=!1;15===e||14===e;)m=m||14===e,e=w.scan();return y=16===e||0!==w.getTokenError(),e}function c(t,n,i){!y&&n<p&&i>h&&e.substring(n,i)!==t&&S.push({offset:n,length:i-n,content:t})}let l,u,d,h,p;if(t){for(h=t.offset,p=h+t.length,d=h;d>0&&!o(e,d-1);)d--;let n=p;for(;n<e.length&&!o(e,n);)n++;u=e.substring(d,n),l=function(e,t){let n=0,i=0,r=t.tabSize||4;for(;n<e.length;){let t=e.charAt(n);if(" "===t)i++;else{if("\t"!==t)break;i+=r}n++}return Math.floor(i/r)}(u,i)}else u=e,l=0,d=0,h=0,p=e.length;let f,g=function(e,t){for(let e=0;e<t.length;e++){let n=t.charAt(e)
;if("\r"===n)return e+1<t.length&&"\n"===t.charAt(e+1)?"\r\n":"\r";if("\n"===n)return"\n"}return e&&e.eol||"\n"}(i,e),m=!1,v=0;f=i.insertSpaces?r(" ",i.tabSize||4):"\t";let w=n.createScanner(u,!1),y=!1,S=[],b=a();if(17!==b){let e=w.getTokenOffset()+d;c(r(f,l),d,e)}for(;17!==b;){let e=w.getTokenOffset()+w.getTokenLength()+d,t=a(),n="";for(;!m&&(12===t||13===t);){c(" ",e,w.getTokenOffset()+d),e=w.getTokenOffset()+w.getTokenLength()+d,n=12===t?s():"",t=a()}if(2===t)1!==b&&(v--,n=s());else if(4===t)3!==b&&(v--,n=s());else{switch(b){case 3:case 1:v++,n=s();break;case 5:case 12:n=s();break;case 13:n=m?s():" ";break;case 6:n=" ";break;case 10:if(6===t){n="";break}case 7:case 8:case 9:case 11:case 2:case 4:12===t||13===t?n=" ":5!==t&&17!==t&&(y=!0);break;case 16:y=!0}!m||12!==t&&13!==t||(n=s())}c(n,e,w.getTokenOffset()+d),b=t}return S}function r(e,t){let n="";for(let i=0;i<t;i++)n+=e;return n}function o(e,t){return-1!=="\r\n".indexOf(e.charAt(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.format=i,t.isEOL=o
}),define(t[124],n([1,0,36,116]),function(e,t,n,i){"use strict";function r(e,t,i,r,s){let a=t.slice(),c=n.parseTree(e,[]),l=void 0,u=void 0;for(;a.length>0&&(u=a.pop(),void 0===(l=n.findNodeAtLocation(c,a))&&void 0!==i);)i="string"==typeof u?{[u]:i}:[i];if(l){if("object"===l.type&&"string"==typeof u&&Array.isArray(l.children)){let t=n.findNodeAtLocation(l,[u]);if(void 0!==t){if(void 0===i){if(!t.parent)throw new Error("Malformed AST");let n,i=l.children.indexOf(t.parent),s=t.parent.offset+t.parent.length;if(i>0){let e=l.children[i-1];n=e.offset+e.length}else if(n=l.offset+1,l.children.length>1){s=l.children[1].offset}return o(e,{offset:n,length:s-n,content:""},r)}return o(e,{offset:t.offset,length:t.length,content:JSON.stringify(i)},r)}{if(void 0===i)return[];let t,n=`${JSON.stringify(u)}: ${JSON.stringify(i)}`,a=s?s(l.children.map(e=>e.children[0].value)):l.children.length;if(a>0){let e=l.children[a-1];t={offset:e.offset+e.length,length:0,content:","+n}}else t=0===l.children.length?{offset:l.offset+1,
length:0,content:n}:{offset:l.offset+1,length:0,content:n+","};return o(e,t,r)}}if("array"===l.type&&"number"==typeof u&&Array.isArray(l.children)){if(-1===u){let t,n=`${JSON.stringify(i)}`;if(0===l.children.length)t={offset:l.offset+1,length:0,content:n};else{let e=l.children[l.children.length-1];t={offset:e.offset+e.length,length:0,content:","+n}}return o(e,t,r)}if(void 0===i&&l.children.length>=0){let t,n=u,i=l.children[n];if(1===l.children.length)t={offset:l.offset+1,length:l.length-2,content:""};else if(l.children.length-1===n){let e=l.children[n-1],i=e.offset+e.length;t={offset:i,length:l.offset+l.length-2-i,content:""}}else t={offset:i.offset,length:l.children[n+1].offset-i.offset,content:""};return o(e,t,r)}throw new Error("Array modification not supported yet")}throw new Error(`Can not add ${"number"!=typeof u?"index":"property"} to parent of type ${l.type}`)}if(void 0===i)throw new Error("Can not delete in empty document");return o(e,{offset:c?c.offset:0,length:c?c.length:0,content:JSON.stringify(i)
},r)}function o(e,t,n){let r=s(e,t),o=t.offset,a=t.offset+t.content.length;if(0===t.length||0===t.content.length){for(;o>0&&!i.isEOL(r,o-1);)o--;for(;a<r.length&&!i.isEOL(r,a);)a++}let c=i.format(r,{offset:o,length:a-o},n);for(let e=c.length-1;e>=0;e--){let t=c[e];r=s(r,t),o=Math.min(o,t.offset),a=Math.max(a,t.offset+t.length),a+=t.content.length-t.length}return[{offset:o,length:e.length-(r.length-a)-o,content:r.substring(o,a)}]}function s(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.removeProperty=function(e,t,n){return r(e,t,void 0,n)},t.setProperty=r,t.applyEdit=s,t.isWS=function(e,t){return-1!=="\r\n \t".indexOf(e.charAt(t))}}),define(t[53],n([1,0,19]),function(e,t,n){"use strict";function i(e,t){const n=!!(2048&e),i=!!(256&e);return new l(2===t?i:n,!!(1024&e),!!(512&e),2===t?n:i,255&e)}Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Unknown=0]="Unknown",e[e.Backspace=1]="Backspace",e[e.Tab=2]="Tab",
e[e.Enter=3]="Enter",e[e.Shift=4]="Shift",e[e.Ctrl=5]="Ctrl",e[e.Alt=6]="Alt",e[e.PauseBreak=7]="PauseBreak",e[e.CapsLock=8]="CapsLock",e[e.Escape=9]="Escape",e[e.Space=10]="Space",e[e.PageUp=11]="PageUp",e[e.PageDown=12]="PageDown",e[e.End=13]="End",e[e.Home=14]="Home",e[e.LeftArrow=15]="LeftArrow",e[e.UpArrow=16]="UpArrow",e[e.RightArrow=17]="RightArrow",e[e.DownArrow=18]="DownArrow",e[e.Insert=19]="Insert",e[e.Delete=20]="Delete",e[e.KEY_0=21]="KEY_0",e[e.KEY_1=22]="KEY_1",e[e.KEY_2=23]="KEY_2",e[e.KEY_3=24]="KEY_3",e[e.KEY_4=25]="KEY_4",e[e.KEY_5=26]="KEY_5",e[e.KEY_6=27]="KEY_6",e[e.KEY_7=28]="KEY_7",e[e.KEY_8=29]="KEY_8",e[e.KEY_9=30]="KEY_9",e[e.KEY_A=31]="KEY_A",e[e.KEY_B=32]="KEY_B",e[e.KEY_C=33]="KEY_C",e[e.KEY_D=34]="KEY_D",e[e.KEY_E=35]="KEY_E",e[e.KEY_F=36]="KEY_F",e[e.KEY_G=37]="KEY_G",e[e.KEY_H=38]="KEY_H",e[e.KEY_I=39]="KEY_I",e[e.KEY_J=40]="KEY_J",e[e.KEY_K=41]="KEY_K",e[e.KEY_L=42]="KEY_L",e[e.KEY_M=43]="KEY_M",e[e.KEY_N=44]="KEY_N",e[e.KEY_O=45]="KEY_O",e[e.KEY_P=46]="KEY_P",
e[e.KEY_Q=47]="KEY_Q",e[e.KEY_R=48]="KEY_R",e[e.KEY_S=49]="KEY_S",e[e.KEY_T=50]="KEY_T",e[e.KEY_U=51]="KEY_U",e[e.KEY_V=52]="KEY_V",e[e.KEY_W=53]="KEY_W",e[e.KEY_X=54]="KEY_X",e[e.KEY_Y=55]="KEY_Y",e[e.KEY_Z=56]="KEY_Z",e[e.Meta=57]="Meta",e[e.ContextMenu=58]="ContextMenu",e[e.F1=59]="F1",e[e.F2=60]="F2",e[e.F3=61]="F3",e[e.F4=62]="F4",e[e.F5=63]="F5",e[e.F6=64]="F6",e[e.F7=65]="F7",e[e.F8=66]="F8",e[e.F9=67]="F9",e[e.F10=68]="F10",e[e.F11=69]="F11",e[e.F12=70]="F12",e[e.F13=71]="F13",e[e.F14=72]="F14",e[e.F15=73]="F15",e[e.F16=74]="F16",e[e.F17=75]="F17",e[e.F18=76]="F18",e[e.F19=77]="F19",e[e.NumLock=78]="NumLock",e[e.ScrollLock=79]="ScrollLock",e[e.US_SEMICOLON=80]="US_SEMICOLON",e[e.US_EQUAL=81]="US_EQUAL",e[e.US_COMMA=82]="US_COMMA",e[e.US_MINUS=83]="US_MINUS",e[e.US_DOT=84]="US_DOT",e[e.US_SLASH=85]="US_SLASH",e[e.US_BACKTICK=86]="US_BACKTICK",e[e.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",e[e.US_BACKSLASH=88]="US_BACKSLASH",e[e.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",
e[e.US_QUOTE=90]="US_QUOTE",e[e.OEM_8=91]="OEM_8",e[e.OEM_102=92]="OEM_102",e[e.NUMPAD_0=93]="NUMPAD_0",e[e.NUMPAD_1=94]="NUMPAD_1",e[e.NUMPAD_2=95]="NUMPAD_2",e[e.NUMPAD_3=96]="NUMPAD_3",e[e.NUMPAD_4=97]="NUMPAD_4",e[e.NUMPAD_5=98]="NUMPAD_5",e[e.NUMPAD_6=99]="NUMPAD_6",e[e.NUMPAD_7=100]="NUMPAD_7",e[e.NUMPAD_8=101]="NUMPAD_8",e[e.NUMPAD_9=102]="NUMPAD_9",e[e.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",e[e.NUMPAD_ADD=104]="NUMPAD_ADD",e[e.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",e[e.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",e[e.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",e[e.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",e[e.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",e[e.ABNT_C1=110]="ABNT_C1",e[e.ABNT_C2=111]="ABNT_C2",e[e.MAX_VALUE=112]="MAX_VALUE"}(t.KeyCode||(t.KeyCode={}));class r{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){
return this._strToKeyCode[e.toLowerCase()]||0}}const o=new r,s=new r,a=new r;!function(){function e(e,t,n=t,i=n){o.define(e,t),s.define(e,n),a.define(e,i)}e(0,"unknown"),e(1,"Backspace"),e(2,"Tab"),e(3,"Enter"),e(4,"Shift"),e(5,"Ctrl"),e(6,"Alt"),e(7,"PauseBreak"),e(8,"CapsLock"),e(9,"Escape"),e(10,"Space"),e(11,"PageUp"),e(12,"PageDown"),e(13,"End"),e(14,"Home"),e(15,"LeftArrow","Left"),e(16,"UpArrow","Up"),e(17,"RightArrow","Right"),e(18,"DownArrow","Down"),e(19,"Insert"),e(20,"Delete"),e(21,"0"),e(22,"1"),e(23,"2"),e(24,"3"),e(25,"4"),e(26,"5"),e(27,"6"),e(28,"7"),e(29,"8"),e(30,"9"),e(31,"A"),e(32,"B"),e(33,"C"),e(34,"D"),e(35,"E"),e(36,"F"),e(37,"G"),e(38,"H"),e(39,"I"),e(40,"J"),e(41,"K"),e(42,"L"),e(43,"M"),e(44,"N"),e(45,"O"),e(46,"P"),e(47,"Q"),e(48,"R"),e(49,"S"),e(50,"T"),e(51,"U"),e(52,"V"),e(53,"W"),e(54,"X"),e(55,"Y"),e(56,"Z"),e(57,"Meta"),e(58,"ContextMenu"),e(59,"F1"),e(60,"F2"),e(61,"F3"),e(62,"F4"),e(63,"F5"),e(64,"F6"),e(65,"F7"),e(66,"F8"),e(67,"F9"),e(68,"F10"),e(69,"F11"),e(70,"F12"),
e(71,"F13"),e(72,"F14"),e(73,"F15"),e(74,"F16"),e(75,"F17"),e(76,"F18"),e(77,"F19"),e(78,"NumLock"),e(79,"ScrollLock"),e(80,";",";","OEM_1"),e(81,"=","=","OEM_PLUS"),e(82,",",",","OEM_COMMA"),e(83,"-","-","OEM_MINUS"),e(84,".",".","OEM_PERIOD"),e(85,"/","/","OEM_2"),e(86,"`","`","OEM_3"),e(110,"ABNT_C1"),e(111,"ABNT_C2"),e(87,"[","[","OEM_4"),e(88,"\\","\\","OEM_5"),e(89,"]","]","OEM_6"),e(90,"'","'","OEM_7"),e(91,"OEM_8"),e(92,"OEM_102"),e(93,"NumPad0"),e(94,"NumPad1"),e(95,"NumPad2"),e(96,"NumPad3"),e(97,"NumPad4"),e(98,"NumPad5"),e(99,"NumPad6"),e(100,"NumPad7"),e(101,"NumPad8"),e(102,"NumPad9"),e(103,"NumPad_Multiply"),e(104,"NumPad_Add"),e(105,"NumPad_Separator"),e(106,"NumPad_Subtract"),e(107,"NumPad_Decimal"),e(108,"NumPad_Divide")}();!function(e){e.toString=function(e){return o.keyCodeToStr(e)},e.fromString=function(e){return o.strToKeyCode(e)},e.toUserSettingsUS=function(e){return s.keyCodeToStr(e)},e.toUserSettingsGeneral=function(e){return a.keyCodeToStr(e)},e.fromUserSettings=function(e){
return s.strToKeyCode(e)||a.strToKeyCode(e)}}(t.KeyCodeUtils||(t.KeyCodeUtils={}));var c;!function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl",e[e.KeyCode=255]="KeyCode"}(c||(c={}));!function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl"}(t.KeyMod||(t.KeyMod={})),t.KeyChord=function(e,t){return(e|(65535&t)<<16>>>0)>>>0},t.createKeybinding=function(e,t){if(0===e)return null;const n=(65535&e)>>>0,r=(4294901760&e)>>>16;return new u(0!==r?[i(n,t),i(r,t)]:[i(n,t)])},t.createSimpleKeybinding=i;class l{constructor(e,t,n,i,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyCode=r}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){return`${this.ctrlKey?"1":"0"}${this.shiftKey?"1":"0"}${this.altKey?"1":"0"}${this.metaKey?"1":"0"}${this.keyCode}`}isModifierKey(){
return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode}toChord(){return new u([this])}isDuplicateModifierCase(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode}}t.SimpleKeybinding=l;class u{constructor(e){if(0===e.length)throw n.illegalArgument("parts");this.parts=e}getHashCode(){let e="";for(let t=0,n=this.parts.length;t<n;t++)0!==t&&(e+=";"),e+=this.parts[t].getHashCode();return e}equals(e){if(null===e)return!1;if(this.parts.length!==e.parts.length)return!1;for(let t=0;t<this.parts.length;t++)if(!this.parts[t].equals(e.parts[t]))return!1;return!0}}t.ChordKeybinding=u;class d{constructor(e,t,n,i,r,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyLabel=r,this.keyAriaLabel=o}}t.ResolvedKeybindingPart=d;class h{}t.ResolvedKeybinding=h}),define(t[6],n([1,0,60]),function(e,t,n){"use strict";function i(e,...t){if(Array.isArray(e))return e.forEach(e=>e&&e.dispose()),
[];if(0!==t.length)return i(e),i(t),[];if(e)return e.dispose(),e}Object.defineProperty(t,"__esModule",{value:!0}),t.isDisposable=function(e){return"function"==typeof e.dispose&&0===e.dispose.length},t.dispose=i,t.combinedDisposable=function(e){return{dispose:()=>i(e)}},t.toDisposable=function(e){return{dispose(){e()}}};class r{constructor(){this._toDispose=[],this._lifecycle_disposable_isDisposed=!1}get toDispose(){return this._toDispose}dispose(){this._lifecycle_disposable_isDisposed=!0,this._toDispose=i(this._toDispose)}_register(e){return this._lifecycle_disposable_isDisposed?(console.warn("Registering disposable on object that has already been disposed."),e.dispose()):this._toDispose.push(e),e}}r.None=Object.freeze({dispose(){}}),t.Disposable=r;class o{constructor(){this.references=Object.create(null)}acquire(e){let t=this.references[e];t||(t=this.references[e]={counter:0,object:this.createReferencedObject(e)});const{object:i}=t,r=n.once(()=>{0==--t.counter&&(this.destroyReferencedObject(e,t.object),
delete this.references[e])});return t.counter++,{object:i,dispose:r}}}t.ReferenceCollection=o;class s{constructor(e){this.object=e}dispose(){}}t.ImmortalReference=s}),define(t[104],n([1,0,71]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.element=e}}class r{constructor(){this._size=0}get size(){return this._size}isEmpty(){return!this._first}clear(){this._first=void 0,this._last=void 0,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new i(e);if(this._first)if(t){const e=this._last;this._last=n,n.prev=e,e.next=n}else{const e=this._first;this._first=n,n.next=e,e.prev=n}else this._first=n,this._last=n;return this._size+=1,this._remove.bind(this,n)}shift(){if(this._first){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last){const e=this._last.element;return this._remove(this._last),e}}_remove(e){let t=this._first;for(;t instanceof i;){if(t===e){if(t.prev&&t.next){
let e=t.prev;e.next=t.next,t.next.prev=e}else t.prev||t.next?t.next?t.prev||(this._first=this._first.next,this._first.prev=void 0):(this._last=this._last.prev,this._last.next=void 0):(this._first=void 0,this._last=void 0);this._size-=1;break}t=t.next}}iterator(){let e,t=this._first;return{next:()=>t?(e?e.value=t.element:e={done:!1,value:t.element},t=t.next,e):n.FIN}}toArray(){let e=[];for(let t=this._first;t instanceof i;t=t.next)e.push(t.element);return e}}t.LinkedList=r}),define(t[2],n([1,0,19,60,6,104]),function(e,t,n,r,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a;!function(e){function t(e){return(t,n=null,i)=>{let r,o=!1;return r=e(e=>{if(!o)return r?r.dispose():o=!0,t.call(n,e)},null,i),o&&r.dispose(),r}}function n(e,t){return a((n,i=null,r)=>e(e=>n.call(i,t(e)),null,r))}function i(e,t){return a((n,i=null,r)=>e(e=>{t(e),n.call(i,e)},null,r))}function r(e,t){return a((n,i=null,r)=>e(e=>t(e)&&n.call(i,e),null,r))}function s(e,t,i){let r=i;return n(e,e=>r=t(r,e))}function a(e){
let t;const n=new u({onFirstListenerAdd(){t=e(n.fire,n)},onLastListenerRemove(){t.dispose()}});return n.event}function c(e){let t,n=!0;return r(e,e=>{let i=n||e!==t;return n=!1,t=e,i})}const l={dispose(){}};e.None=function(){return l},e.once=t,e.map=n,e.forEach=i,e.filter=r,e.signal=function(e){return e},e.any=function(...e){return(t,n=null,i)=>o.combinedDisposable(e.map(e=>e(e=>t.call(n,e),null,i)))},e.reduce=s,e.snapshot=a,e.debounce=function(e,t,n=100,i=!1,r){let o,s=void 0,a=void 0,c=0;const l=new u({leakWarningThreshold:r,onFirstListenerAdd(){o=e(e=>{c++,s=t(s,e),i&&!a&&l.fire(s),clearTimeout(a),a=setTimeout(()=>{let e=s;s=void 0,a=void 0,(!i||c>1)&&l.fire(e),c=0},n)})},onLastListenerRemove(){o.dispose()}});return l.event},e.stopwatch=function(e){const i=(new Date).getTime();return n(t(e),e=>(new Date).getTime()-i)},e.latch=c,e.buffer=function(e,t=!1,n=[]){let i=n.slice(),r=e(e=>{i?i.push(e):s.fire(e)});const o=()=>{i&&i.forEach(e=>s.fire(e)),i=null},s=new u({onFirstListenerAdd(){r||(r=e(e=>s.fire(e)))},
onFirstListenerDidAdd(){i&&(t?setTimeout(o):o())},onLastListenerRemove(){r&&r.dispose(),r=null}});return s.event},e.echo=function(e,t=!1,n=[]){n=n.slice(),e(e=>{n.push(e),r.fire(e)});const i=(e,t)=>n.forEach(n=>e.call(t,n)),r=new u({onListenerDidAdd(e,n,r){t?setTimeout(()=>i(n,r)):i(n,r)}});return r.event};class d{constructor(e){this.event=e}map(e){return new d(n(this.event,e))}forEach(e){return new d(i(this.event,e))}filter(e){return new d(r(this.event,e))}reduce(e,t){return new d(s(this.event,e,t))}latch(){return new d(c(this.event))}on(e,t,n){return this.event(e,t,n)}once(e,n,i){return t(this.event)(e,n,i)}}e.chain=function(e){return new d(e)},e.fromNodeEventEmitter=function(e,t,n=(e=>e)){const i=(...e)=>r.fire(n(...e)),r=new u({onFirstListenerAdd:()=>e.on(t,i),onLastListenerRemove:()=>e.removeListener(t,i)});return r.event},e.fromPromise=function(e){const t=new u;let n=!1;return e.then(void 0,()=>null).then(()=>{n?t.fire(void 0):setTimeout(()=>t.fire(void 0),0)}),n=!0,t.event},e.toPromise=function(e){
return new Promise(n=>t(e)(n))}}(a=t.Event||(t.Event={}));let c=-1;t.setGlobalLeakWarningThreshold=function(e){let t=c;return c=e,{dispose(){c=t}}};class l{constructor(e,t=Math.random().toString(18).slice(2,5)){this.customThreshold=e,this.name=t,this._warnCountdown=0}dispose(){this._stacks&&this._stacks.clear()}check(e){let t=c;if("number"==typeof this.customThreshold&&(t=this.customThreshold),t<=0||e<t)return;this._stacks||(this._stacks=new Map);let n=(new Error).stack.split("\n").slice(3).join("\n"),i=this._stacks.get(n)||0;if(this._stacks.set(n,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=.5*t;let n,i=0;this._stacks.forEach((e,t)=>{(!n||i<e)&&(n=t,i=e)}),console.warn(`[${this.name}] potential listener LEAK detected, having ${e} listeners already. MOST frequent listener (${i}):`),console.warn(n)}return()=>{let e=this._stacks.get(n)||0;this._stacks.set(n,e-1)}}}class u{constructor(e){this._disposed=!1,this._options=e,
this._leakageMon=c>0?new l(this._options&&this._options.leakWarningThreshold):void 0}get event(){return this._event||(this._event=((e,t,n)=>{this._listeners||(this._listeners=new s.LinkedList);const i=this._listeners.isEmpty();i&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const r=this._listeners.push(t?[e,t]:e);i&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);let o;this._leakageMon&&(o=this._leakageMon.check(this._listeners.size));let a;return a={dispose:()=>{if(o&&o(),a.dispose=u._noop,!this._disposed&&(r(),this._options&&this._options.onLastListenerRemove)){this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)}}},Array.isArray(n)&&n.push(a),a})),this._event}fire(e){if(this._listeners){this._deliveryQueue||(this._deliveryQueue=[])
;for(let t=this._listeners.iterator(),n=t.next();!n.done;n=t.next())this._deliveryQueue.push([n.value,e]);for(;this._deliveryQueue.length>0;){const[e,t]=this._deliveryQueue.shift();try{"function"==typeof e?e.call(void 0,t):e[0].call(e[1],t)}catch(e){n.onUnexpectedError(e)}}}}dispose(){this._listeners&&(this._listeners=void 0),this._deliveryQueue&&(this._deliveryQueue.length=0),this._leakageMon&&this._leakageMon.dispose(),this._disposed=!0}}u._noop=function(){},t.Emitter=u;class d extends u{fireAsync(e){return i(this,void 0,void 0,function*(){if(this._listeners){this._asyncDeliveryQueue||(this._asyncDeliveryQueue=[]);for(let t=this._listeners.iterator(),n=t.next();!n.done;n=t.next()){let t=[];this._asyncDeliveryQueue.push([n.value,e(t,"function"==typeof n.value?n.value:n.value[0]),t])}for(;this._asyncDeliveryQueue.length>0;){const[e,t,i]=this._asyncDeliveryQueue.shift();try{"function"==typeof e?e.call(void 0,t):e[0].call(e[1],t)}catch(e){n.onUnexpectedError(e);continue}Object.freeze(i),yield Promise.all(i)}}})
}}t.AsyncEmitter=d;class h{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new u({onFirstListenerAdd:()=>this.onFirstListenerAdd(),onLastListenerRemove:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};this.events.push(t),this.hasListeners&&this.hook(t);return o.toDisposable(r.once(()=>{this.hasListeners&&this.unhook(t);const e=this.events.indexOf(t);this.events.splice(e,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(e=>this.emitter.fire(e))}unhook(e){e.listener&&e.listener.dispose(),e.listener=null}dispose(){this.emitter.dispose()}}t.EventMultiplexer=h;class p{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,i)=>e(e=>{const i=this.buffers[this.buffers.length-1];i?i.push(()=>t.call(n,e)):t.call(n,e)},void 0,i)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e()
;return this.buffers.pop(),t.forEach(e=>e()),n}}t.EventBufferer=p;class f{constructor(){this.listening=!1,this.inputEvent=a.None,this.inputEventListener=o.Disposable.None,this.emitter=new u({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}t.Relay=f}),define(t[35],n([1,0,2]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=Object.freeze(function(e,t){let n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}});var r;!function(e){e.isCancellationToken=function(t){
return t===e.None||t===e.Cancelled||t instanceof o||!(!t||"object"!=typeof t)&&"boolean"==typeof t.isCancellationRequested&&"function"==typeof t.onCancellationRequested},e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:n.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i})}(r=t.CancellationToken||(t.CancellationToken={}));class o{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?i:(this._emitter||(this._emitter=new n.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class s{get token(){return this._token||(this._token=new o),this._token}cancel(){this._token?this._token instanceof o&&this._token.cancel():this._token=r.Cancelled}dispose(){
this._token?this._token instanceof o&&this._token.dispose():this._token=r.None}}t.CancellationTokenSource=s}),define(t[12],n([1,0,35,19,2,6]),function(e,t,n,i,r,o){"use strict";function s(e){return e&&"function"==typeof e.then}function a(e){const t=new n.CancellationTokenSource,r=e(t.token),o=new Promise((e,n)=>{t.token.onCancellationRequested(()=>{n(i.canceled())}),Promise.resolve(r).then(n=>{t.dispose(),e(n)},e=>{t.dispose(),n(e)})});return new class{cancel(){t.cancel()}then(e,t){return o.then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return o.finally(e)}}}function c(e,t){return t?new Promise((n,r)=>{const o=setTimeout(n,e);t.onCancellationRequested(()=>{clearTimeout(o),r(i.canceled())})}):a(t=>c(e,t))}function l(e){function t(o){void 0!==o&&null!==o&&n.push(o);const s=i<r?e[i++]():null;return s?s.then(t):Promise.resolve(n)}const n=[];let i=0;const r=e.length;return Promise.resolve(null).then(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.isThenable=s,t.createCancelablePromise=a,
t.asPromise=function(e){return new Promise((t,n)=>{let i=e();s(i)?i.then(t,n):t(i)})};class u{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const e=()=>{this.queuedPromise=null;const e=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,e};this.queuedPromise=new Promise(t=>{this.activePromise.then(e,e).then(t)})}return new Promise((e,t)=>{this.queuedPromise.then(e,t)})}return this.activePromise=e(),new Promise((e,t)=>{this.activePromise.then(t=>{this.activePromise=null,e(t)},e=>{this.activePromise=null,t(e)})})}}t.Throttler=u;class d{constructor(){this.current=Promise.resolve(null)}queue(e){return this.current=this.current.then(()=>e())}}t.Sequencer=d;class h{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),
this.completionPromise||(this.completionPromise=new Promise((e,t)=>{this.doResolve=e,this.doReject=t}).then(()=>{this.completionPromise=null,this.doResolve=null;const e=this.task;return this.task=null,e()})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve(null)},t),this.completionPromise}isTriggered(){return null!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject(i.canceled()),this.completionPromise=null)}cancelTimeout(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancelTimeout()}}t.Delayer=h;class p{constructor(e){this.delayer=new h(e),this.throttler=new u}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}t.ThrottledDelayer=p;class f{constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,
this._completePromise(!0)}wait(){return this._promise}}t.Barrier=f,t.timeout=c,t.disposableTimeout=function(e,t=0){const n=setTimeout(e,t);return o.toDisposable(()=>clearTimeout(n))},t.ignoreErrors=function(e){return e.then(void 0,e=>void 0)},t.sequence=l,t.first=function(e,t=(e=>!!e),n=null){let i=0;const r=e.length,o=()=>{if(i>=r)return Promise.resolve(n);const s=e[i++];return Promise.resolve(s()).then(e=>t(e)?Promise.resolve(e):o())};return o()};class g{constructor(e){this._size=0,this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onFinished=new r.Emitter}get onFinished(){return this._onFinished.event}get size(){return this._size}queue(e){return this._size++,new Promise((t,n)=>{this.outstandingPromises.push({factory:e,c:t,e:n}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const e=this.outstandingPromises.shift();this.runningPromises++;const t=e.factory();t.then(e.c,e.e),
t.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onFinished.fire()}dispose(){this._onFinished.dispose()}}t.Limiter=g;class m extends g{constructor(){super(1)}}t.Queue=m;class v{constructor(){this.queues=Object.create(null)}queueFor(e){const t=e.toString();if(!this.queues[t]){const e=new m;e.onFinished(()=>{e.dispose(),delete this.queues[t]}),this.queues[t]=e}return this.queues[t]}}t.ResourceQueue=v;class w extends o.Disposable{constructor(e,t){super(),this._token=-1,"function"==typeof e&&"number"==typeof t&&this.setIfNotSet(e,t)}dispose(){this.cancel(),super.dispose()}cancel(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){-1===this._token&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}t.TimeoutTimer=w;class y extends o.Disposable{constructor(){super(),this._token=-1}dispose(){
this.cancel(),super.dispose()}cancel(){-1!==this._token&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}t.IntervalTimer=y;class S{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}isScheduled(){return-1!==this.timeoutToken}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}t.RunOnceScheduler=S;class b extends S{constructor(e,t){super(e,t),this.units=[]}work(e){this.units.push(e),this.isScheduled()||this.schedule()}doRun(){const e=this.units;this.units=[],this.runner&&this.runner(e)}dispose(){this.units=[],super.dispose()}}t.RunOnceWorker=b,t.nfcall=function(e,...t){return new Promise((n,i)=>e(...t,(e,t)=>e?i(e):n(t)))},
t.ninvoke=function(e,t,...n){return new Promise((i,r)=>t.call(e,...n,(e,t)=>e?r(e):i(t)))},function(){if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){let e=Object.freeze({didTimeout:!0,timeRemaining:()=>15});t.runWhenIdle=(t=>{let n=setTimeout(()=>t(e)),i=!1;return{dispose(){i||(i=!0,clearTimeout(n))}}})}else t.runWhenIdle=((e,t)=>{let n=requestIdleCallback(e,"number"==typeof t?{timeout:t}:void 0),i=!1;return{dispose(){i||(i=!0,cancelIdleCallback(n))}}})}();class _{constructor(e){this._executor=(()=>{try{this._value=e()}catch(e){this._error=e}finally{this._didRun=!0}}),this._handle=t.runWhenIdle(()=>this._executor())}dispose(){this._handle.dispose()}getValue(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}}t.IdleValue=_}),define(t[31],n([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",
e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command"}(t.Schemas||(t.Schemas={}))});let r;r="object"==typeof global?global:"object"==typeof self?self:{},"function"==typeof define?define("vs/base/common/performance",[],function(){return e(r)}):"object"==typeof module&&"object"==typeof module.exports&&(module.exports=e(r)),define(t[3],n([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LANGUAGE_DEFAULT="en";let n=!1,i=!1,r=!1,o=!1,s=!1,a=void 0,c=t.LANGUAGE_DEFAULT,l=void 0;const u="undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.electron&&"renderer"===process.type;if("object"!=typeof navigator||u){if("object"==typeof process){n="win32"===process.platform,i="darwin"===process.platform,r="linux"===process.platform,a=t.LANGUAGE_DEFAULT,c=t.LANGUAGE_DEFAULT;const e=process.env.VSCODE_NLS_CONFIG;if(e)try{
const n=JSON.parse(e),i=n.availableLanguages["*"];a=n.locale,c=i||t.LANGUAGE_DEFAULT,l=n._translationsConfigFile}catch(e){}o=!0}}else{const e=navigator.userAgent;n=e.indexOf("Windows")>=0,i=e.indexOf("Macintosh")>=0,r=e.indexOf("Linux")>=0,s=!0,c=a=navigator.language}!function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"}(t.Platform||(t.Platform={})),t.PlatformToString=function(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}};let d=0;o&&(i?d=1:n?d=3:r&&(d=2)),t.isWindows=n,t.isMacintosh=i,t.isLinux=r,t.isNative=o,t.isWeb=s,t.platform=d,t.isRootUser=function(){return o&&!n&&0===process.getuid()},t.language=c,t.locale=a,t.translationsConfigFile=l;const h="object"==typeof self?self:"object"==typeof global?global:{};t.globals=h;let p=null;t.setImmediate=function(e){
return null===p&&(p=t.globals.setImmediate?t.globals.setImmediate.bind(t.globals):"undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick.bind(process):t.globals.setTimeout.bind(t.globals)),p(e)};!function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"}(t.OperatingSystem||(t.OperatingSystem={})),t.OS=i?2:n?1:3}),define(t[4],n([1,0,3]),function(e,t,n){"use strict";function i(e,t){if("string"!=typeof e)throw new v(t,"string",e)}function r(e){return e===f||e===g}function o(e){return e===f}function s(e){return e>=l&&e<=d||e>=u&&e<=h}function a(e,t,n,i){let r,o="",s=0,a=-1,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)r=e.charCodeAt(l);else{if(i(r))break;r=f}if(i(r)){if(a===l-1||1===c);else if(a!==l-1&&2===c){if(o.length<2||2!==s||o.charCodeAt(o.length-1)!==p||o.charCodeAt(o.length-2)!==p){if(o.length>2){const e=o.lastIndexOf(n);-1===e?(o="",s=0):s=(o=o.slice(0,e)).length-1-o.lastIndexOf(n),a=l,c=0;continue}if(2===o.length||1===o.length){o="",s=0,a=l,c=0
;continue}}t&&(o.length>0?o+=`${n}..`:o="..",s=2)}else o.length>0?o+=n+e.slice(a+1,l):o=e.slice(a+1,l),s=l-a-1;a=l,c=0}else r===p&&-1!==c?++c:c=-1}return o}function c(e,t){const n=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+i:n+e+i:i}const l=65,u=97,d=90,h=122,p=46,f=47,g=92,m="undefined"==typeof process?{cwd:()=>"/",env:{},get platform(){return n.isWindows?"win32":"posix"}}:process;class v extends Error{constructor(e,t,n){let i;"string"==typeof t&&0===t.indexOf("not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be";let r;r=`The "${e}" ${-1!==e.indexOf(".")?"property":"argument"} ${i} of type ${t}`,super(r+=`. Received type ${typeof n}`)}}const w={resolve(...e){let t="",n="",o=!1;for(let a=e.length-1;a>=-1;a--){let c;if(a>=0?c=e[a]:t?void 0!==(c=m.env["="+t]||m.cwd())&&c.slice(0,3).toLowerCase()===t.toLowerCase()+"\\"||(c=t+"\\"):c=m.cwd(),i(c,"path"),0===c.length)continue;let l=c.length,u=0,d="",h=!1;const p=c.charCodeAt(0);if(l>1)if(r(p))if(h=!0,r(c.charCodeAt(1))){
let e=2,t=e;for(;e<l&&!r(c.charCodeAt(e));++e);if(e<l&&e!==t){const n=c.slice(t,e);for(t=e;e<l&&r(c.charCodeAt(e));++e);if(e<l&&e!==t){for(t=e;e<l&&!r(c.charCodeAt(e));++e);e===l?(d="\\\\"+n+"\\"+c.slice(t),u=e):e!==t&&(d="\\\\"+n+"\\"+c.slice(t,e),u=e)}}}else u=1;else s(p)&&58===c.charCodeAt(1)&&(d=c.slice(0,2),u=2,l>2&&r(c.charCodeAt(2))&&(h=!0,u=3));else r(p)&&(u=1,h=!0);if(!(d.length>0&&t.length>0&&d.toLowerCase()!==t.toLowerCase())&&(0===t.length&&d.length>0&&(t=d),o||(n=c.slice(u)+"\\"+n,o=h),t.length>0&&o))break}return n=a(n,!o,"\\",r),t+(o?"\\":"")+n||"."},normalize(e){i(e,"path");const t=e.length;if(0===t)return".";let n,o=0,c=!1;const l=e.charCodeAt(0);if(t>1)if(r(l))if(c=!0,r(e.charCodeAt(1))){let i=2,s=i;for(;i<t&&!r(e.charCodeAt(i));++i);if(i<t&&i!==s){const a=e.slice(s,i);for(s=i;i<t&&r(e.charCodeAt(i));++i);if(i<t&&i!==s){for(s=i;i<t&&!r(e.charCodeAt(i));++i);if(i===t)return"\\\\"+a+"\\"+e.slice(s)+"\\";i!==s&&(n="\\\\"+a+"\\"+e.slice(s,i),o=i)}}
}else o=1;else s(l)&&58===e.charCodeAt(1)&&(n=e.slice(0,2),o=2,t>2&&r(e.charCodeAt(2))&&(c=!0,o=3));else if(r(l))return"\\";let u;return 0!==(u=o<t?a(e.slice(o),!c,"\\",r):"").length||c||(u="."),u.length>0&&r(e.charCodeAt(t-1))&&(u+="\\"),void 0===n?c?u.length>0?"\\"+u:"\\":u.length>0?u:"":c?u.length>0?n+"\\"+u:n+"\\":u.length>0?n+u:n},isAbsolute(e){i(e,"path");const t=e.length;if(0===t)return!1;const n=e.charCodeAt(0);return!!r(n)||!!(s(n)&&t>2&&58===e.charCodeAt(1)&&r(e.charCodeAt(2)))},join(...e){if(0===e.length)return".";let t,n;for(let r=0;r<e.length;++r){let o=e[r];i(o,"path"),o.length>0&&(void 0===t?t=n=o:t+="\\"+o)}if(void 0===t)return".";let o=!0,s=0;if(r(n.charCodeAt(0))){++s;const e=n.length;e>1&&r(n.charCodeAt(1))&&(++s,e>2&&(r(n.charCodeAt(2))?++s:o=!1))}if(o){for(;s<t.length&&r(t.charCodeAt(s));++s);s>=2&&(t="\\"+t.slice(s))}return w.normalize(t)},relative(e,t){if(i(e,"from"),i(t,"to"),e===t)return"";let n=w.resolve(e),r=w.resolve(t);if(n===r)return"";if(e=n.toLowerCase(),t=r.toLowerCase(),
e===t)return"";let o=0;for(;o<e.length&&e.charCodeAt(o)===g;++o);let s=e.length;for(;s-1>o&&e.charCodeAt(s-1)===g;--s);let a=s-o,c=0;for(;c<t.length&&t.charCodeAt(c)===g;++c);let l=t.length;for(;l-1>c&&t.charCodeAt(l-1)===g;--l);let u=l-c,d=a<u?a:u,h=-1,p=0;for(;p<=d;++p){if(p===d){if(u>d){if(t.charCodeAt(c+p)===g)return r.slice(c+p+1);if(2===p)return r.slice(c+p)}a>d&&(e.charCodeAt(o+p)===g?h=p:2===p&&(h=3));break}let n=e.charCodeAt(o+p);if(n!==t.charCodeAt(c+p))break;n===g&&(h=p)}if(p!==d&&-1===h)return r;let f="";for(-1===h&&(h=0),p=o+h+1;p<=s;++p)p!==s&&e.charCodeAt(p)!==g||(0===f.length?f+="..":f+="\\..");return f.length>0?f+r.slice(c+h,l):(c+=h,r.charCodeAt(c)===g&&++c,r.slice(c,l))},toNamespacedPath(e){if("string"!=typeof e)return e;if(0===e.length)return"";const t=w.resolve(e);if(t.length>=3)if(t.charCodeAt(0)===g){if(t.charCodeAt(1)===g){const e=t.charCodeAt(2);if(63!==e&&e!==p)return"\\\\?\\UNC\\"+t.slice(2)}}else if(s(t.charCodeAt(0))&&58===t.charCodeAt(1)&&t.charCodeAt(2)===g)return"\\\\?\\"+t
;return e},dirname(e){i(e,"path");const t=e.length;if(0===t)return".";let n=-1,o=-1,a=!0,c=0;const l=e.charCodeAt(0);if(t>1)if(r(l)){if(n=c=1,r(e.charCodeAt(1))){let i=2,o=i;for(;i<t&&!r(e.charCodeAt(i));++i);if(i<t&&i!==o){for(o=i;i<t&&r(e.charCodeAt(i));++i);if(i<t&&i!==o){for(o=i;i<t&&!r(e.charCodeAt(i));++i);if(i===t)return e;i!==o&&(n=c=i+1)}}}}else s(l)&&58===e.charCodeAt(1)&&(n=c=2,t>2&&r(e.charCodeAt(2))&&(n=c=3));else if(r(l))return e;for(let n=t-1;n>=c;--n)if(r(e.charCodeAt(n))){if(!a){o=n;break}}else a=!1;if(-1===o){if(-1===n)return".";o=n}return e.slice(0,o)},basename(e,t){void 0!==t&&i(t,"ext"),i(e,"path");let n,o=0,a=-1,c=!0;if(e.length>=2){s(e.charCodeAt(0))&&58===e.charCodeAt(1)&&(o=2)}if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let i=t.length-1,s=-1;for(n=e.length-1;n>=o;--n){const l=e.charCodeAt(n);if(r(l)){if(!c){o=n+1;break}}else-1===s&&(c=!1,s=n+1),i>=0&&(l===t.charCodeAt(i)?-1==--i&&(a=n):(i=-1,a=s))}return o===a?a=s:-1===a&&(a=e.length),
e.slice(o,a)}for(n=e.length-1;n>=o;--n)if(r(e.charCodeAt(n))){if(!c){o=n+1;break}}else-1===a&&(c=!1,a=n+1);return-1===a?"":e.slice(o,a)},extname(e){i(e,"path");let t=0,n=-1,o=0,a=-1,c=!0,l=0;e.length>=2&&58===e.charCodeAt(1)&&s(e.charCodeAt(0))&&(t=o=2);for(let i=e.length-1;i>=t;--i){const t=e.charCodeAt(i);if(r(t)){if(!c){o=i+1;break}}else-1===a&&(c=!1,a=i+1),t===p?-1===n?n=i:1!==l&&(l=1):-1!==n&&(l=-1)}return-1===n||-1===a||0===l||1===l&&n===a-1&&n===o+1?"":e.slice(n,a)},format(e){if(null===e||"object"!=typeof e)throw new v("pathObject","Object",e);return c("\\",e)},parse(e){i(e,"path");let t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;let n=e.length,o=0,a=e.charCodeAt(0);if(n>1){if(r(a)){if(o=1,r(e.charCodeAt(1))){let t=2,i=t;for(;t<n&&!r(e.charCodeAt(t));++t);if(t<n&&t!==i){for(i=t;t<n&&r(e.charCodeAt(t));++t);if(t<n&&t!==i){for(i=t;t<n&&!r(e.charCodeAt(t));++t);t===n?o=t:t!==i&&(o=t+1)}}}}else if(s(a)&&58===e.charCodeAt(1)){if(o=2,!(n>2))return t.root=t.dir=e,t
;if(r(e.charCodeAt(2))){if(3===n)return t.root=t.dir=e,t;o=3}}}else if(r(a))return t.root=t.dir=e,t;o>0&&(t.root=e.slice(0,o));let c=-1,l=o,u=-1,d=!0,h=e.length-1,f=0;for(;h>=o;--h)if(a=e.charCodeAt(h),r(a)){if(!d){l=h+1;break}}else-1===u&&(d=!1,u=h+1),a===p?-1===c?c=h:1!==f&&(f=1):-1!==c&&(f=-1);return-1===c||-1===u||0===f||1===f&&c===u-1&&c===l+1?-1!==u&&(t.base=t.name=e.slice(l,u)):(t.name=e.slice(l,c),t.base=e.slice(l,u),t.ext=e.slice(c,u)),t.dir=l>0&&l!==o?e.slice(0,l-1):t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},y={resolve(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let o;i(o=r>=0?e[r]:m.cwd(),"path"),0!==o.length&&(t=o+"/"+t,n=o.charCodeAt(0)===f)}return t=a(t,!n,"/",o),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize(e){if(i(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===f,n=e.charCodeAt(e.length-1)===f;return 0!==(e=a(e,!t,"/",o)).length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:e=>(i(e,"path"),e.length>0&&e.charCodeAt(0)===f),join(...e){
if(0===e.length)return".";let t;for(let n=0;n<e.length;++n){let e=arguments[n];i(e,"path"),e.length>0&&(void 0===t?t=e:t+="/"+e)}return void 0===t?".":y.normalize(t)},relative(e,t){if(i(e,"from"),i(t,"to"),e===t)return"";if(e=y.resolve(e),t=y.resolve(t),e===t)return"";let n=1;for(;n<e.length&&e.charCodeAt(n)===f;++n);let r=e.length,o=r-n,s=1;for(;s<t.length&&t.charCodeAt(s)===f;++s);let a=t.length-s,c=o<a?o:a,l=-1,u=0;for(;u<=c;++u){if(u===c){if(a>c){if(t.charCodeAt(s+u)===f)return t.slice(s+u+1);if(0===u)return t.slice(s+u)}else o>c&&(e.charCodeAt(n+u)===f?l=u:0===u&&(l=0));break}let i=e.charCodeAt(n+u);if(i!==t.charCodeAt(s+u))break;i===f&&(l=u)}let d="";for(u=n+l+1;u<=r;++u)u!==r&&e.charCodeAt(u)!==f||(0===d.length?d+="..":d+="/..");return d.length>0?d+t.slice(s+l):(s+=l,t.charCodeAt(s)===f&&++s,t.slice(s))},toNamespacedPath:e=>e,dirname(e){if(i(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===f;let n=-1,r=!0;for(let t=e.length-1;t>=1;--t)if(e.charCodeAt(t)===f){if(!r){n=t;break}}else r=!1
;return-1===n?t?"/":".":t&&1===n?"//":e.slice(0,n)},basename(e,t){void 0!==t&&i(t,"ext"),i(e,"path");let n,r=0,o=-1,s=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let i=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const c=e.charCodeAt(n);if(c===f){if(!s){r=n+1;break}}else-1===a&&(s=!1,a=n+1),i>=0&&(c===t.charCodeAt(i)?-1==--i&&(o=n):(i=-1,o=a))}return r===o?o=a:-1===o&&(o=e.length),e.slice(r,o)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===f){if(!s){r=n+1;break}}else-1===o&&(s=!1,o=n+1);return-1===o?"":e.slice(r,o)},extname(e){i(e,"path");let t=-1,n=0,r=-1,o=!0,s=0;for(let i=e.length-1;i>=0;--i){const a=e.charCodeAt(i);if(a!==f)-1===r&&(o=!1,r=i+1),a===p?-1===t?t=i:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){n=i+1;break}}return-1===t||-1===r||0===s||1===s&&t===r-1&&t===n+1?"":e.slice(t,r)},format(e){if(null===e||"object"!=typeof e)throw new v("pathObject","Object",e);return c("/",e)},parse(e){i(e,"path");let t={root:"",dir:"",base:"",ext:"",name:""}
;if(0===e.length)return t;let n,r=e.charCodeAt(0)===f;r?(t.root="/",n=1):n=0;let o=-1,s=0,a=-1,c=!0,l=e.length-1,u=0;for(;l>=n;--l){const t=e.charCodeAt(l);if(t!==f)-1===a&&(c=!1,a=l+1),t===p?-1===o?o=l:1!==u&&(u=1):-1!==o&&(u=-1);else if(!c){s=l+1;break}}return-1===o||-1===a||0===u||1===u&&o===a-1&&o===s+1?-1!==a&&(t.base=t.name=0===s&&r?e.slice(1,a):e.slice(s,a)):(0===s&&r?(t.name=e.slice(1,o),t.base=e.slice(1,a)):(t.name=e.slice(s,o),t.base=e.slice(s,a)),t.ext=e.slice(o,a)),s>0?t.dir=e.slice(0,s-1):r&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};y.win32=w.win32=w,y.posix=w.posix=y;return"win32"===m.platform?w:y}),define(t[70],n([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.None=0]="None",e[e.Hyper=1]="Hyper",e[e.Super=2]="Super",e[e.Fn=3]="Fn",e[e.FnLock=4]="FnLock",e[e.Suspend=5]="Suspend",e[e.Resume=6]="Resume",e[e.Turbo=7]="Turbo",e[e.Sleep=8]="Sleep",e[e.WakeUp=9]="WakeUp",e[e.KeyA=10]="KeyA",e[e.KeyB=11]="KeyB",e[e.KeyC=12]="KeyC",
e[e.KeyD=13]="KeyD",e[e.KeyE=14]="KeyE",e[e.KeyF=15]="KeyF",e[e.KeyG=16]="KeyG",e[e.KeyH=17]="KeyH",e[e.KeyI=18]="KeyI",e[e.KeyJ=19]="KeyJ",e[e.KeyK=20]="KeyK",e[e.KeyL=21]="KeyL",e[e.KeyM=22]="KeyM",e[e.KeyN=23]="KeyN",e[e.KeyO=24]="KeyO",e[e.KeyP=25]="KeyP",e[e.KeyQ=26]="KeyQ",e[e.KeyR=27]="KeyR",e[e.KeyS=28]="KeyS",e[e.KeyT=29]="KeyT",e[e.KeyU=30]="KeyU",e[e.KeyV=31]="KeyV",e[e.KeyW=32]="KeyW",e[e.KeyX=33]="KeyX",e[e.KeyY=34]="KeyY",e[e.KeyZ=35]="KeyZ",e[e.Digit1=36]="Digit1",e[e.Digit2=37]="Digit2",e[e.Digit3=38]="Digit3",e[e.Digit4=39]="Digit4",e[e.Digit5=40]="Digit5",e[e.Digit6=41]="Digit6",e[e.Digit7=42]="Digit7",e[e.Digit8=43]="Digit8",e[e.Digit9=44]="Digit9",e[e.Digit0=45]="Digit0",e[e.Enter=46]="Enter",e[e.Escape=47]="Escape",e[e.Backspace=48]="Backspace",e[e.Tab=49]="Tab",e[e.Space=50]="Space",e[e.Minus=51]="Minus",e[e.Equal=52]="Equal",e[e.BracketLeft=53]="BracketLeft",e[e.BracketRight=54]="BracketRight",e[e.Backslash=55]="Backslash",e[e.IntlHash=56]="IntlHash",e[e.Semicolon=57]="Semicolon",
e[e.Quote=58]="Quote",e[e.Backquote=59]="Backquote",e[e.Comma=60]="Comma",e[e.Period=61]="Period",e[e.Slash=62]="Slash",e[e.CapsLock=63]="CapsLock",e[e.F1=64]="F1",e[e.F2=65]="F2",e[e.F3=66]="F3",e[e.F4=67]="F4",e[e.F5=68]="F5",e[e.F6=69]="F6",e[e.F7=70]="F7",e[e.F8=71]="F8",e[e.F9=72]="F9",e[e.F10=73]="F10",e[e.F11=74]="F11",e[e.F12=75]="F12",e[e.PrintScreen=76]="PrintScreen",e[e.ScrollLock=77]="ScrollLock",e[e.Pause=78]="Pause",e[e.Insert=79]="Insert",e[e.Home=80]="Home",e[e.PageUp=81]="PageUp",e[e.Delete=82]="Delete",e[e.End=83]="End",e[e.PageDown=84]="PageDown",e[e.ArrowRight=85]="ArrowRight",e[e.ArrowLeft=86]="ArrowLeft",e[e.ArrowDown=87]="ArrowDown",e[e.ArrowUp=88]="ArrowUp",e[e.NumLock=89]="NumLock",e[e.NumpadDivide=90]="NumpadDivide",e[e.NumpadMultiply=91]="NumpadMultiply",e[e.NumpadSubtract=92]="NumpadSubtract",e[e.NumpadAdd=93]="NumpadAdd",e[e.NumpadEnter=94]="NumpadEnter",e[e.Numpad1=95]="Numpad1",e[e.Numpad2=96]="Numpad2",e[e.Numpad3=97]="Numpad3",e[e.Numpad4=98]="Numpad4",
e[e.Numpad5=99]="Numpad5",e[e.Numpad6=100]="Numpad6",e[e.Numpad7=101]="Numpad7",e[e.Numpad8=102]="Numpad8",e[e.Numpad9=103]="Numpad9",e[e.Numpad0=104]="Numpad0",e[e.NumpadDecimal=105]="NumpadDecimal",e[e.IntlBackslash=106]="IntlBackslash",e[e.ContextMenu=107]="ContextMenu",e[e.Power=108]="Power",e[e.NumpadEqual=109]="NumpadEqual",e[e.F13=110]="F13",e[e.F14=111]="F14",e[e.F15=112]="F15",e[e.F16=113]="F16",e[e.F17=114]="F17",e[e.F18=115]="F18",e[e.F19=116]="F19",e[e.F20=117]="F20",e[e.F21=118]="F21",e[e.F22=119]="F22",e[e.F23=120]="F23",e[e.F24=121]="F24",e[e.Open=122]="Open",e[e.Help=123]="Help",e[e.Select=124]="Select",e[e.Again=125]="Again",e[e.Undo=126]="Undo",e[e.Cut=127]="Cut",e[e.Copy=128]="Copy",e[e.Paste=129]="Paste",e[e.Find=130]="Find",e[e.AudioVolumeMute=131]="AudioVolumeMute",e[e.AudioVolumeUp=132]="AudioVolumeUp",e[e.AudioVolumeDown=133]="AudioVolumeDown",e[e.NumpadComma=134]="NumpadComma",e[e.IntlRo=135]="IntlRo",e[e.KanaMode=136]="KanaMode",e[e.IntlYen=137]="IntlYen",e[e.Convert=138]="Convert",
e[e.NonConvert=139]="NonConvert",e[e.Lang1=140]="Lang1",e[e.Lang2=141]="Lang2",e[e.Lang3=142]="Lang3",e[e.Lang4=143]="Lang4",e[e.Lang5=144]="Lang5",e[e.Abort=145]="Abort",e[e.Props=146]="Props",e[e.NumpadParenLeft=147]="NumpadParenLeft",e[e.NumpadParenRight=148]="NumpadParenRight",e[e.NumpadBackspace=149]="NumpadBackspace",e[e.NumpadMemoryStore=150]="NumpadMemoryStore",e[e.NumpadMemoryRecall=151]="NumpadMemoryRecall",e[e.NumpadMemoryClear=152]="NumpadMemoryClear",e[e.NumpadMemoryAdd=153]="NumpadMemoryAdd",e[e.NumpadMemorySubtract=154]="NumpadMemorySubtract",e[e.NumpadClear=155]="NumpadClear",e[e.NumpadClearEntry=156]="NumpadClearEntry",e[e.ControlLeft=157]="ControlLeft",e[e.ShiftLeft=158]="ShiftLeft",e[e.AltLeft=159]="AltLeft",e[e.MetaLeft=160]="MetaLeft",e[e.ControlRight=161]="ControlRight",e[e.ShiftRight=162]="ShiftRight",e[e.AltRight=163]="AltRight",e[e.MetaRight=164]="MetaRight",e[e.BrightnessUp=165]="BrightnessUp",e[e.BrightnessDown=166]="BrightnessDown",e[e.MediaPlay=167]="MediaPlay",
e[e.MediaRecord=168]="MediaRecord",e[e.MediaFastForward=169]="MediaFastForward",e[e.MediaRewind=170]="MediaRewind",e[e.MediaTrackNext=171]="MediaTrackNext",e[e.MediaTrackPrevious=172]="MediaTrackPrevious",e[e.MediaStop=173]="MediaStop",e[e.Eject=174]="Eject",e[e.MediaPlayPause=175]="MediaPlayPause",e[e.MediaSelect=176]="MediaSelect",e[e.LaunchMail=177]="LaunchMail",e[e.LaunchApp2=178]="LaunchApp2",e[e.LaunchApp1=179]="LaunchApp1",e[e.SelectTask=180]="SelectTask",e[e.LaunchScreenSaver=181]="LaunchScreenSaver",e[e.BrowserSearch=182]="BrowserSearch",e[e.BrowserHome=183]="BrowserHome",e[e.BrowserBack=184]="BrowserBack",e[e.BrowserForward=185]="BrowserForward",e[e.BrowserStop=186]="BrowserStop",e[e.BrowserRefresh=187]="BrowserRefresh",e[e.BrowserFavorites=188]="BrowserFavorites",e[e.ZoomToggle=189]="ZoomToggle",e[e.MailReply=190]="MailReply",e[e.MailForward=191]="MailForward",e[e.MailSend=192]="MailSend",e[e.MAX_VALUE=193]="MAX_VALUE"}(t.ScanCode||(t.ScanCode={}))
;const n=[],i=Object.create(null),r=Object.create(null);t.ScanCodeUtils={lowerCaseToEnum:e=>r[e]||0,toEnum:e=>i[e]||0,toString:e=>n[e]||"None"},t.IMMUTABLE_CODE_TO_KEY_CODE=[],t.IMMUTABLE_KEY_CODE_TO_CODE=[];class o{constructor(e,t,n,i,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.scanCode=r}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.scanCode===e.scanCode}isDuplicateModifierCase(){return this.ctrlKey&&(157===this.scanCode||161===this.scanCode)||this.shiftKey&&(158===this.scanCode||162===this.scanCode)||this.altKey&&(159===this.scanCode||163===this.scanCode)||this.metaKey&&(160===this.scanCode||164===this.scanCode)}}t.ScanCodeBinding=o,function(){function e(e,t){n[e]=t,i[t]=e,r[t.toLowerCase()]=e}e(0,"None"),e(1,"Hyper"),e(2,"Super"),e(3,"Fn"),e(4,"FnLock"),e(5,"Suspend"),e(6,"Resume"),e(7,"Turbo"),e(8,"Sleep"),e(9,"WakeUp"),e(10,"KeyA"),e(11,"KeyB"),e(12,"KeyC"),e(13,"KeyD"),e(14,"KeyE"),e(15,"KeyF"),
e(16,"KeyG"),e(17,"KeyH"),e(18,"KeyI"),e(19,"KeyJ"),e(20,"KeyK"),e(21,"KeyL"),e(22,"KeyM"),e(23,"KeyN"),e(24,"KeyO"),e(25,"KeyP"),e(26,"KeyQ"),e(27,"KeyR"),e(28,"KeyS"),e(29,"KeyT"),e(30,"KeyU"),e(31,"KeyV"),e(32,"KeyW"),e(33,"KeyX"),e(34,"KeyY"),e(35,"KeyZ"),e(36,"Digit1"),e(37,"Digit2"),e(38,"Digit3"),e(39,"Digit4"),e(40,"Digit5"),e(41,"Digit6"),e(42,"Digit7"),e(43,"Digit8"),e(44,"Digit9"),e(45,"Digit0"),e(46,"Enter"),e(47,"Escape"),e(48,"Backspace"),e(49,"Tab"),e(50,"Space"),e(51,"Minus"),e(52,"Equal"),e(53,"BracketLeft"),e(54,"BracketRight"),e(55,"Backslash"),e(56,"IntlHash"),e(57,"Semicolon"),e(58,"Quote"),e(59,"Backquote"),e(60,"Comma"),e(61,"Period"),e(62,"Slash"),e(63,"CapsLock"),e(64,"F1"),e(65,"F2"),e(66,"F3"),e(67,"F4"),e(68,"F5"),e(69,"F6"),e(70,"F7"),e(71,"F8"),e(72,"F9"),e(73,"F10"),e(74,"F11"),e(75,"F12"),e(76,"PrintScreen"),e(77,"ScrollLock"),e(78,"Pause"),e(79,"Insert"),e(80,"Home"),e(81,"PageUp"),e(82,"Delete"),e(83,"End"),e(84,"PageDown"),e(85,"ArrowRight"),e(86,"ArrowLeft"),
e(87,"ArrowDown"),e(88,"ArrowUp"),e(89,"NumLock"),e(90,"NumpadDivide"),e(91,"NumpadMultiply"),e(92,"NumpadSubtract"),e(93,"NumpadAdd"),e(94,"NumpadEnter"),e(95,"Numpad1"),e(96,"Numpad2"),e(97,"Numpad3"),e(98,"Numpad4"),e(99,"Numpad5"),e(100,"Numpad6"),e(101,"Numpad7"),e(102,"Numpad8"),e(103,"Numpad9"),e(104,"Numpad0"),e(105,"NumpadDecimal"),e(106,"IntlBackslash"),e(107,"ContextMenu"),e(108,"Power"),e(109,"NumpadEqual"),e(110,"F13"),e(111,"F14"),e(112,"F15"),e(113,"F16"),e(114,"F17"),e(115,"F18"),e(116,"F19"),e(117,"F20"),e(118,"F21"),e(119,"F22"),e(120,"F23"),e(121,"F24"),e(122,"Open"),e(123,"Help"),e(124,"Select"),e(125,"Again"),e(126,"Undo"),e(127,"Cut"),e(128,"Copy"),e(129,"Paste"),e(130,"Find"),e(131,"AudioVolumeMute"),e(132,"AudioVolumeUp"),e(133,"AudioVolumeDown"),e(134,"NumpadComma"),e(135,"IntlRo"),e(136,"KanaMode"),e(137,"IntlYen"),e(138,"Convert"),e(139,"NonConvert"),e(140,"Lang1"),e(141,"Lang2"),e(142,"Lang3"),e(143,"Lang4"),e(144,"Lang5"),e(145,"Abort"),e(146,"Props"),e(147,"NumpadParenLeft"),
e(148,"NumpadParenRight"),e(149,"NumpadBackspace"),e(150,"NumpadMemoryStore"),e(151,"NumpadMemoryRecall"),e(152,"NumpadMemoryClear"),e(153,"NumpadMemoryAdd"),e(154,"NumpadMemorySubtract"),e(155,"NumpadClear"),e(156,"NumpadClearEntry"),e(157,"ControlLeft"),e(158,"ShiftLeft"),e(159,"AltLeft"),e(160,"MetaLeft"),e(161,"ControlRight"),e(162,"ShiftRight"),e(163,"AltRight"),e(164,"MetaRight"),e(165,"BrightnessUp"),e(166,"BrightnessDown"),e(167,"MediaPlay"),e(168,"MediaRecord"),e(169,"MediaFastForward"),e(170,"MediaRewind"),e(171,"MediaTrackNext"),e(172,"MediaTrackPrevious"),e(173,"MediaStop"),e(174,"Eject"),e(175,"MediaPlayPause"),e(176,"MediaSelect"),e(177,"LaunchMail"),e(178,"LaunchApp2"),e(179,"LaunchApp1"),e(180,"SelectTask"),e(181,"LaunchScreenSaver"),e(182,"BrowserSearch"),e(183,"BrowserHome"),e(184,"BrowserBack"),e(185,"BrowserForward"),e(186,"BrowserStop"),e(187,"BrowserRefresh"),e(188,"BrowserFavorites"),e(189,"ZoomToggle"),e(190,"MailReply"),e(191,"MailForward"),e(192,"MailSend")}(),function(){
function e(e,n){t.IMMUTABLE_CODE_TO_KEY_CODE[e]=n,0!==n&&3!==n&&5!==n&&4!==n&&6!==n&&57!==n&&(t.IMMUTABLE_KEY_CODE_TO_CODE[n]=e)}for(let e=0;e<=193;e++)t.IMMUTABLE_CODE_TO_KEY_CODE[e]=-1;for(let e=0;e<=112;e++)t.IMMUTABLE_KEY_CODE_TO_CODE[e]=-1;t.IMMUTABLE_KEY_CODE_TO_CODE[3]=46,e(0,0),e(1,0),e(2,0),e(3,0),e(4,0),e(5,0),e(6,0),e(7,0),e(8,0),e(9,0),e(46,3),e(47,9),e(48,1),e(49,2),e(50,10),e(63,8),e(64,59),e(65,60),e(66,61),e(67,62),e(68,63),e(69,64),e(70,65),e(71,66),e(72,67),e(73,68),e(74,69),e(75,70),e(76,0),e(77,79),e(78,7),e(79,19),e(80,14),e(81,11),e(82,20),e(83,13),e(84,12),e(85,17),e(86,15),e(87,18),e(88,16),e(89,78),e(90,108),e(91,103),e(92,106),e(93,104),e(94,3),e(95,94),e(96,95),e(97,96),e(98,97),e(99,98),e(100,99),e(101,100),e(102,101),e(103,102),e(104,93),e(105,107),e(107,58),e(108,0),e(109,0),e(110,71),e(111,72),e(112,73),e(113,74),e(114,75),e(115,76),e(116,77),e(117,0),e(118,0),e(119,0),e(120,0),e(121,0),e(122,0),e(123,0),e(124,0),e(125,0),e(126,0),e(127,0),e(128,0),e(129,0),e(130,0),e(131,0),
e(132,0),e(133,0),e(134,105),e(136,0),e(138,0),e(139,0),e(140,0),e(141,0),e(142,0),e(143,0),e(144,0),e(145,0),e(146,0),e(147,0),e(148,0),e(149,0),e(150,0),e(151,0),e(152,0),e(153,0),e(154,0),e(155,0),e(156,0),e(157,5),e(158,4),e(159,6),e(160,57),e(161,5),e(162,4),e(163,6),e(164,57),e(165,0),e(166,0),e(167,0),e(168,0),e(169,0),e(170,0),e(171,0),e(172,0),e(173,0),e(174,0),e(175,0),e(176,0),e(177,0),e(178,0),e(179,0),e(180,0),e(181,0),e(182,0),e(183,0),e(184,0),e(185,0),e(186,0),e(187,0),e(188,0),e(189,0),e(190,0),e(191,0),e(192,0)}()}),define(t[131],n([1,0,53,70]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{static _readModifiers(e){e=e.toLowerCase().trim();let t,n=!1,i=!1,r=!1,o=!1;do{t=!1,/^ctrl(\+|\-)/.test(e)&&(n=!0,e=e.substr("ctrl-".length),t=!0),/^shift(\+|\-)/.test(e)&&(i=!0,e=e.substr("shift-".length),t=!0),/^alt(\+|\-)/.test(e)&&(r=!0,e=e.substr("alt-".length),t=!0),/^meta(\+|\-)/.test(e)&&(o=!0,e=e.substr("meta-".length),t=!0),/^win(\+|\-)/.test(e)&&(o=!0,
e=e.substr("win-".length),t=!0),/^cmd(\+|\-)/.test(e)&&(o=!0,e=e.substr("cmd-".length),t=!0)}while(t);let s;const a=e.indexOf(" ");return a>0?(s=e.substring(0,a),e=e.substring(a)):(s=e,e=""),{remains:e,ctrl:n,shift:i,alt:r,meta:o,key:s}}static parseSimpleKeybinding(e){const t=this._readModifiers(e),i=n.KeyCodeUtils.fromUserSettings(t.key);return[new n.SimpleKeybinding(t.ctrl,t.shift,t.alt,t.meta,i),t.remains]}static parseKeybinding(e,t){if(!e)return null;let i,r=[];do{[i,e]=this.parseSimpleKeybinding(e),r.push(i)}while(e.length>0);return new n.ChordKeybinding(r)}static parseSimpleUserBinding(e){const t=this._readModifiers(e),r=t.key.match(/^\[([^\]]+)\]$/);if(r){const e=r[1],n=i.ScanCodeUtils.lowerCaseToEnum(e);return[new i.ScanCodeBinding(t.ctrl,t.shift,t.alt,t.meta,n),t.remains]}const o=n.KeyCodeUtils.fromUserSettings(t.key);return[new n.SimpleKeybinding(t.ctrl,t.shift,t.alt,t.meta,o),t.remains]}static parseUserBinding(e){if(!e)return[];let t,n=[];for(;e.length>0;)[t,e]=this.parseSimpleUserBinding(e),
n.push(t);return n}}t.KeybindingParser=r}),define(t[17],n([1,0]),function(e,t){"use strict";function n(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\[\]\(\)\#]/g,"\\$&")}function i(e,t){if(!e||!t)return e;let n=t.length;if(0===n||0===e.length)return e;let i=0;for(;e.indexOf(t,i)===i;)i+=n;return e.substring(i)}function r(e,t){if(!e||!t)return e;let n=t.length,i=e.length;if(0===n||0===i)return e;let r=i,o=-1;for(;;){if(-1===(o=e.lastIndexOf(t,r-1))||o+n!==r)break;if(0===o)return"";r=o}return e.substring(0,r)}function o(e,t){return e<t?-1:e>t?1:0}function s(e){return e>=97&&e<=122}function a(e){return e>=65&&e<=90}function c(e){return s(e)||a(e)}function l(e,t,n=e.length){if("string"!=typeof e||"string"!=typeof t)return!1;for(let i=0;i<n;i++){const n=e.charCodeAt(i),r=t.charCodeAt(i);if(n!==r)if(c(n)&&c(r)){let e=Math.abs(n-r);if(0!==e&&32!==e)return!1}else if(String.fromCharCode(n).toLowerCase()!==String.fromCharCode(r).toLowerCase())return!1}return!0}function u(e,t,n,i,r,o){for(;t<n&&r<o;){
if(e[t]!==i[r])return!1;t+=1,r+=1}return!0}function d(e){return(e=+e)>=11904&&e<=55215||e>=63744&&e<=64255||e>=65281&&e<=65374}function h(e){return!!(e&&e.length>0&&65279===e.charCodeAt(0))}Object.defineProperty(t,"__esModule",{value:!0}),t.empty="",t.isFalsyOrWhitespace=function(e){return!e||"string"!=typeof e||0===e.trim().length},t.pad=function(e,t,n="0"){let i=""+e,r=[i];for(let e=i.length;e<t;e++)r.push(n);return r.reverse().join("")};const p=/{(\d+)}/g;t.format=function(e,...t){return 0===t.length?e:e.replace(p,function(e,n){let i=parseInt(n,10);return isNaN(i)||i<0||i>=t.length?e:t[i]})},t.escape=function(e){return e.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})},t.escapeRegExpCharacters=n,t.trim=function(e,t=" "){return r(i(e,t),t)},t.ltrim=i,t.rtrim=r,t.convertSimple2RegExpPattern=function(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")},t.stripWildcards=function(e){
return e.replace(/\*/g,"")},t.startsWith=function(e,t){if(e.length<t.length)return!1;if(e===t)return!0;for(let n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0},t.endsWith=function(e,t){let n=e.length-t.length;return n>0?e.indexOf(t,n)===n:0===n&&e===t},t.createRegExp=function(e,t,i={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=n(e)),i.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));let r="";return i.global&&(r+="g"),i.matchCase||(r+="i"),i.multiline&&(r+="m"),i.unicode&&(r+="u"),new RegExp(e,r)},t.regExpLeadsToEndlessLoop=function(e){return"^"!==e.source&&"^$"!==e.source&&"$"!==e.source&&"^\\s*$"!==e.source&&!(!e.exec("")||0!==e.lastIndex)},t.regExpContainsBackreference=function(e){return!!e.match(/([^\\]|^)(\\\\)*\\\d+/)},t.regExpFlags=function(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")},t.firstNonWhitespaceIndex=function(e){for(let t=0,n=e.length;t<n;t++){let n=e.charCodeAt(t)
;if(32!==n&&9!==n)return t}return-1},t.getLeadingWhitespace=function(e,t=0,n=e.length){for(let i=t;i<n;i++){let n=e.charCodeAt(i);if(32!==n&&9!==n)return e.substring(t,i)}return e.substring(t,n)},t.lastNonWhitespaceIndex=function(e,t=e.length-1){for(let n=t;n>=0;n--){let t=e.charCodeAt(n);if(32!==t&&9!==t)return n}return-1},t.compare=o,t.compareIgnoreCase=function(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){let n=e.charCodeAt(i),r=t.charCodeAt(i);if(n===r)continue;a(n)&&(n+=32),a(r)&&(r+=32);const c=n-r;if(0!==c)return s(n)&&s(r)?c:o(e.toLowerCase(),t.toLowerCase())}return e.length<t.length?-1:e.length>t.length?1:0},t.isLowerAsciiLetter=s,t.isUpperAsciiLetter=a,t.equalsIgnoreCase=function(e,t){return(e?e.length:0)===(t?t.length:0)&&l(e,t)},t.startsWithIgnoreCase=function(e,t){const n=t.length;return!(t.length>e.length)&&l(e,t,n)},t.commonPrefixLength=function(e,t){let n,i=Math.min(e.length,t.length);for(n=0;n<i;n++)if(e.charCodeAt(n)!==t.charCodeAt(n))return n;return i},
t.commonSuffixLength=function(e,t){let n,i=Math.min(e.length,t.length),r=e.length-1,o=t.length-1;for(n=0;n<i;n++)if(e.charCodeAt(r-n)!==t.charCodeAt(o-n))return n;return i},t.overlap=function(e,t){let n=e.length,i=t.length,r=n-i;if(0===r)return e===t?n:0;for(r<0&&(i+=r,r=0);r<n&&i>0;){if(u(e,r,n,t,0,i))return i;i-=1,r+=1}return 0},t.isHighSurrogate=function(e){return 55296<=e&&e<=56319},t.isLowSurrogate=function(e){return 56320<=e&&e<=57343};const f=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u08BD\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE33\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDCFF]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD50-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;t.containsRTL=function(e){return f.test(e)}
;const g=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEF8]|\uD83E[\uDD00-\uDDE6])/;t.containsEmoji=function(e){return g.test(e)};const m=/^[\t\n\r\x20-\x7E]*$/;t.isBasicASCII=function(e){return m.test(e)},t.containsFullWidthCharacter=function(e){for(let t=0,n=e.length;t<n;t++)if(d(e.charCodeAt(t)))return!0;return!1},t.isFullWidthCharacter=d,t.lcut=function(e,n){if(e.length<n)return e;const i=/\b/g;let r=0;for(;i.test(e)&&!(e.length-i.lastIndex<n);)r=i.lastIndex,i.lastIndex+=1;return e.substring(r).replace(/^\s/,t.empty)};const v=/\x1B\x5B[12]?K/g,w=/\x1b\[\d+m/g,y=/\x1b\[0?m/g;t.removeAnsiEscapeCodes=function(e){return e&&(e=(e=(e=e.replace(v,"")).replace(w,"")).replace(y,"")),e},t.removeAccents=function(){if("function"!=typeof String.prototype.normalize)return function(e){return e};{const e=/[\u0300-\u036f]/g;return function(n){return n.normalize("NFD").replace(e,t.empty)}}}(),t.UTF8_BOM_CHARACTER=String.fromCharCode(65279),
t.startsWithUTF8BOM=h,t.stripUTF8BOM=function(e){return h(e)?e.substr(1):e},t.safeBtoa=function(e){return btoa(encodeURIComponent(e))},t.repeat=function(e,t){let n="";for(let i=0;i<t;i++)n+=e;return n},t.fuzzyContains=function(e,t){if(!e||!t)return!1;if(e.length<t.length)return!1;const n=t.length,i=e.toLowerCase();let r=0,o=-1;for(;r<n;){let e=i.indexOf(t[r],o+1);if(e<0)return!1;o=e,r++}return!0},t.containsUppercaseCharacter=function(e,t=!1){return!!e&&(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e)},t.uppercaseFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.getNLines=function(e,t=1){if(0===t)return"";let n=-1;do{n=e.indexOf("\n",n+1),t--}while(t>0&&n>=0);return n>=0?e.substr(0,n):e}}),define(t[157],n([1,0,17]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLocalISOString=function(e){
return e.getFullYear()+"-"+n.pad(e.getMonth()+1,2)+"-"+n.pad(e.getDate(),2)+"T"+n.pad(e.getHours(),2)+":"+n.pad(e.getMinutes(),2)+":"+n.pad(e.getSeconds(),2)+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}),define(t[33],n([1,0,3,17,4]),function(e,t,n,i,r){"use strict";function o(e){return 47===e||92===e}function s(e){return e>=65&&e<=90||e>=97&&e<=122}Object.defineProperty(t,"__esModule",{value:!0}),t.toSlashes=function(e){return e.replace(/[\\/]/g,"/")},t.getRoot=function(e,t="/"){if(!e)return"";let n=e.length;const i=e.charCodeAt(0);if(o(i)){if(o(e.charCodeAt(1))&&!o(e.charCodeAt(2))){let i=3,r=i;for(;i<n&&!o(e.charCodeAt(i));i++);if(r!==i&&!o(e.charCodeAt(i+1)))for(i+=1;i<n;i++)if(o(e.charCodeAt(i)))return e.slice(0,i+1).replace(/[\\/]/g,t)}return t}if(s(i)&&58===e.charCodeAt(1))return o(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let r=e.indexOf("://");if(-1!==r)for(r+=3;r<n;r++)if(o(e.charCodeAt(r)))return e.slice(0,r+1);return""},t.isUNC=function(e){if(!n.isWindows)return!1
;if(!e||e.length<5)return!1;let t=e.charCodeAt(0);if(92!==t)return!1;if(92!==(t=e.charCodeAt(1)))return!1;let i=2,r=i;for(;i<e.length&&92!==(t=e.charCodeAt(i));i++);return r!==i&&(t=e.charCodeAt(i+1),!isNaN(t)&&92!==t)};const a=n.isWindows?/[\\/:\*\?"<>\|]/g:/[\\/]/g,c=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])$/i;t.isValidBasename=function(e){return!(!e||0===e.length||/^\s+$/.test(e)||(a.lastIndex=0,a.test(e)||n.isWindows&&c.test(e)||"."===e||".."===e||n.isWindows&&"."===e[e.length-1]||n.isWindows&&e.length!==e.trim().length||e.length>255))},t.isEqual=function(e,t,n){const r=e===t;return!n||r?r:!(!e||!t)&&i.equalsIgnoreCase(e,t)},t.isEqualOrParent=function(e,t,n,o=r.sep){if(e===t)return!0;if(!e||!t)return!1;if(t.length>e.length)return!1;if(n){if(!i.startsWithIgnoreCase(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===o&&n--,e.charAt(n)===o}return t.charAt(t.length-1)!==o&&(t+=o),0===e.indexOf(t)},t.isWindowsDriveLetter=s}),define(t[18],n([1,0]),function(e,t){
"use strict";function n(e){return Array.isArray?Array.isArray(e):!(!e||typeof e.length!==l.number||e.constructor!==Array)}function i(e){return typeof e===l.string||e instanceof String}function r(e){return!(typeof e!==l.object||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}function o(e){return typeof e===l.undefined}function s(e){return o(e)||null===e}function a(e){return typeof e===l.function}function c(e,t){if(i(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(a(t)){try{if(e instanceof t)return}catch(e){}if(!s(e)&&e.constructor===t)return;if(1===t.length&&!0===t.call(void 0,e))return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}Object.defineProperty(t,"__esModule",{value:!0});const l={number:"number",string:"string",undefined:"undefined",object:"object",function:"function"};t.isArray=n,t.isString=i,t.isStringArray=function(e){
return n(e)&&e.every(e=>i(e))},t.isObject=r,t.isNumber=function(e){return(typeof e===l.number||e instanceof Number)&&!isNaN(e)},t.isBoolean=function(e){return!0===e||!1===e},t.isUndefined=o,t.isUndefinedOrNull=s;const u=Object.prototype.hasOwnProperty;t.isEmptyObject=function(e){if(!r(e))return!1;for(let t in e)if(u.call(e,t))return!1;return!0},t.isFunction=a,t.areFunctions=function(...e){return e.length>0&&e.every(a)},t.validateConstraints=function(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++)c(e[i],t[i])},t.validateConstraint=c,t.create=function(e,...t){if(function(e){return"function"==typeof e&&e.hasOwnProperty("prototype")&&!e.hasOwnProperty("arguments")}(e))return new e(...t);{let n=Object.create(e.prototype);return e.apply(n,t),n}},t.getAllPropertyNames=function(e){let t=[],n=Object.getPrototypeOf(e);for(;Object.prototype!==n;)t=t.concat(Object.getOwnPropertyNames(n)),n=Object.getPrototypeOf(n);return t}}),define(t[15],n([1,0,18]),function(e,t,n){"use strict";function i(e){
if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.keys(e).forEach(n=>{e[n]&&"object"==typeof e[n]?t[n]=i(e[n]):t[n]=e[n]}),t}function r(e,t,i){if(n.isUndefinedOrNull(e))return e;const o=t(e);if(void 0!==o)return o;if(n.isArray(e)){const n=[];for(const o of e)n.push(r(o,t,i));return n}if(n.isObject(e)){if(i.has(e))throw new Error("Cannot clone recursive data-structure");i.add(e);const n={};for(let o in e)a.call(e,o)&&(n[o]=r(e[o],t,i));return i.delete(e),n}return e}function o(e,t,i=!0){return n.isObject(e)?(n.isObject(t)&&Object.keys(t).forEach(r=>{r in e?i&&(n.isObject(e[r])&&n.isObject(t[r])?o(e[r],t[r],i):e[r]=t[r]):e[r]=t[r]}),e):t}function s(e,t){if(e===t)return!0;if(null===e||void 0===e||null===t||void 0===t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;let n,i;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!s(e[n],t[n]))return!1}else{
const r=[];for(i in e)r.push(i);r.sort();const o=[];for(i in t)o.push(i);if(o.sort(),!s(r,o))return!1;for(n=0;n<r.length;n++)if(!s(e[r[n]],t[r[n]]))return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=i,t.deepFreeze=function(e){if(!e||"object"!=typeof e)return e;const t=[e];for(;t.length>0;){let e=t.shift();Object.freeze(e);for(const n in e)if(a.call(e,n)){let i=e[n];"object"!=typeof i||Object.isFrozen(i)||t.push(i)}}return e};const a=Object.prototype.hasOwnProperty;t.cloneAndChange=function(e,t){return r(e,t,new Set)},t.mixin=o,t.assign=function(e,...t){return t.forEach(t=>Object.keys(t).forEach(n=>e[n]=t[n])),e},t.equals=s,t.createKeywordMatcher=function(e,t=!1){t&&(e=e.map(function(e){return e.toLowerCase()}));const n=function(e){const t={};for(const n of e)t[n]=!0;return t}(e);return t?function(e){return void 0!==n[e.toLowerCase()]&&n.hasOwnProperty(e.toLowerCase())}:function(e){return void 0!==n[e]&&n.hasOwnProperty(e)}},t.safeStringify=function(e){const t=[]
;return JSON.stringify(e,(e,i)=>{if(n.isObject(i)||Array.isArray(i)){if(-1!==t.indexOf(i))return"[Circular]";t.push(i)}return i})},t.getOrDefault=function(e,t,n){const i=t(e);return void 0===i?n:i},t.distinct=function(e,t){const n=Object.create(null);return e&&t?(Object.keys(t).forEach(i=>{const r=e[i],o=t[i];s(r,o)||(n[i]=o)}),n):n}}),define(t[8],n([1,0,3]),function(e,t,n){"use strict";function i(e,t){let n=void 0,i=-1;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||45===o||46===o||95===o||126===o||t&&47===o)-1!==i&&(n+=encodeURIComponent(e.substring(i,r)),i=-1),void 0!==n&&(n+=e.charAt(r));else{void 0===n&&(n=e.substr(0,r));let t=f[o];void 0!==t?(-1!==i&&(n+=encodeURIComponent(e.substring(i,r)),i=-1),n+=t):-1===i&&(i=r)}}return-1!==i&&(n+=encodeURIComponent(e.substring(i))),void 0!==n?n:e}function r(e){let t
;return t=e.authority&&e.path.length>1&&"file"===e.scheme?`//${e.authority}${e.path}`:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?e.path[1].toLowerCase()+e.path.substr(2):e.path,n.isWindows&&(t=t.replace(/\//g,"\\")),t}function o(e,t){const n=t?function(e){let t=void 0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);35===i||63===i?(void 0===t&&(t=e.substr(0,n)),t+=f[i]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}:i;let r="",{scheme:o,authority:s,path:a,query:c,fragment:l}=e;if(o&&(r+=o,r+=":"),(s||"file"===o)&&(r+=u,r+=u),s){let e=s.indexOf("@");if(-1!==e){const t=s.substr(0,e);s=s.substr(e+1),-1===(e=t.indexOf(":"))?r+=n(t,!1):(r+=n(t.substr(0,e),!1),r+=":",r+=n(t.substr(e+1),!1)),r+="@"}-1===(e=(s=s.toLowerCase()).indexOf(":"))?r+=n(s,!1):(r+=n(s.substr(0,e),!1),r+=s.substr(e))}if(a){if(a.length>=3&&47===a.charCodeAt(0)&&58===a.charCodeAt(2)){let e=a.charCodeAt(1)
;e>=65&&e<=90&&(a=`/${String.fromCharCode(e+32)}:${a.substr(3)}`)}else if(a.length>=2&&58===a.charCodeAt(1)){let e=a.charCodeAt(0);e>=65&&e<=90&&(a=`${String.fromCharCode(e+32)}:${a.substr(2)}`)}r+=n(a,!0)}return c&&(r+="?",r+=n(c,!1)),l&&(r+="#",r+=t?l:i(l,!1)),r}Object.defineProperty(t,"__esModule",{value:!0});const s=/^\w[\w\d+.-]*$/,a=/^\//,c=/^\/\//;let l=!0;t.setUriThrowOnMissingScheme=function(e){const t=l;return l=e,t};const u="/",d=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class h{static isUri(e){return e instanceof h||!!e&&("string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"function"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString)}constructor(e,t,n,i,r,o){"object"==typeof e?(this.scheme=e.scheme||"",this.authority=e.authority||"",this.path=e.path||"",this.query=e.query||"",this.fragment=e.fragment||""):(this.scheme=e||"",this.authority=t||"",this.path=function(e,t){
switch(e){case"https":case"http":case"file":t?t[0]!==u&&(t=u+t):t=u}return t}(this.scheme,n||""),this.query=i||"",this.fragment=r||"",function(e,t){if(!e.scheme){if(t||l)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);console.warn(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`)}if(e.scheme&&!s.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!a.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(c.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,o))}get fsPath(){return r(this)}with(e){if(!e)return this
;let{scheme:t,authority:n,path:i,query:r,fragment:o}=e;return void 0===t?t=this.scheme:null===t&&(t=""),void 0===n?n=this.authority:null===n&&(n=""),void 0===i?i=this.path:null===i&&(i=""),void 0===r?r=this.query:null===r&&(r=""),void 0===o?o=this.fragment:null===o&&(o=""),t===this.scheme&&n===this.authority&&i===this.path&&r===this.query&&o===this.fragment?this:new p(t,n,i,r,o)}static parse(e,t=!1){const n=d.exec(e);return n?new p(n[2]||"",decodeURIComponent(n[4]||""),decodeURIComponent(n[5]||""),decodeURIComponent(n[7]||""),decodeURIComponent(n[9]||""),t):new p("","","","","")}static file(e){let t="";if(n.isWindows&&(e=e.replace(/\\/g,u)),e[0]===u&&e[1]===u){let n=e.indexOf(u,2);-1===n?(t=e.substring(2),e=u):(t=e.substring(2,n),e=e.substring(n)||u)}return new p("file",t,e,"","")}static from(e){return new p(e.scheme,e.authority,e.path,e.query,e.fragment)}toString(e=!1){return o(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof h)return e;{let t=new p(e);return t._fsPath=e.fsPath,
t._formatted=e.external,t}}return e}}t.URI=h;class p extends h{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=r(this)),this._fsPath}toString(e=!1){return e?o(this,!0):(this._formatted||(this._formatted=o(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const f={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"}}),define(t[44],n([1,0,8]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPathFromAmdModule=function(e,t){return n.URI.parse(e.toUrl(t)).fsPath}}),define(t[26],n([1,0,8,71]),function(e,t,n,i){
"use strict";function r(e){const t=[];return e.forEach(e=>t.push(e)),t}function o(e){const t=[];return e.forEach((e,n)=>t.push(n)),t}Object.defineProperty(t,"__esModule",{value:!0}),t.values=r,t.keys=o,t.getOrSet=function(e,t,n){let i=e.get(t);return void 0===i&&(i=n,e.set(t,i)),i},t.mapToString=function(e){const t=[];return e.forEach((e,n)=>{t.push(`${n} => ${e}`)}),`Map(${e.size}) {${t.join(", ")}}`},t.setToString=function(e){const t=[];return e.forEach(e=>{t.push(e)}),`Set(${e.size}) {${t.join(", ")}}`},t.mapToSerializable=function(e){const t=[];return e.forEach((e,n)=>{t.push([n,e])}),t},t.serializableToMap=function(e){const t=new Map;for(const[n,i]of e)t.set(n,i);return t};class s{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){return e.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}}t.StringIterator=s;class a{reset(e){
return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const t=this._value.charCodeAt(this._to);if(47===t||92===t){if(!e)break;this._from++}else e=!1}return this}cmp(e){let t=0,n=e.length,i=this._from;for(;t<n&&i<this._to;){let n=e.charCodeAt(t)-this._value.charCodeAt(i);if(0!==n)return n;t+=1,i+=1}return n===this._to-this._from?0:t<n?-1:1}value(){return this._value.substring(this._from,this._to)}}t.PathIterator=a;class c{isEmpty(){return!(this.left||this.mid||this.right||this.value)}}class l{constructor(e){this._iter=e}static forPaths(){return new l(new a)}static forStrings(){return new l(new s)}clear(){this._root=void 0}set(e,t){let n,i=this._iter.reset(e);for(this._root||(this._root=new c,this._root.segment=i.value()),n=this._root;;){let e=i.cmp(n.segment);if(e>0)n.left||(n.left=new c,n.left.segment=i.value()),n=n.left;else if(e<0)n.right||(n.right=new c,
n.right.segment=i.value()),n=n.right;else{if(!i.hasNext())break;i.next(),n.mid||(n.mid=new c,n.mid.segment=i.value()),n=n.mid}}const r=n.value;return n.value=t,n.key=e,r}get(e){let t=this._iter.reset(e),n=this._root;for(;n;){let e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!t.hasNext())break;t.next(),n=n.mid}}return n?n.value:void 0}delete(e){let t=this._iter.reset(e),n=[],i=this._root;for(;i;){let e=t.cmp(i.segment);if(e>0)n.push([1,i]),i=i.left;else if(e<0)n.push([-1,i]),i=i.right;else{if(!t.hasNext()){for(i.value=void 0;n.length>0&&i.isEmpty();){let[e,t]=n.pop();switch(e){case 1:t.left=void 0;break;case 0:t.mid=void 0;break;case-1:t.right=void 0}i=t}break}t.next(),n.push([0,i]),i=i.mid}}}findSubstr(e){let t=this._iter.reset(e),n=this._root,i=void 0;for(;n;){let e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!t.hasNext())break;t.next(),i=n.value||i,n=n.mid}}return n&&n.value||i}findSuperstr(e){let t=this._iter.reset(e),n=this._root;for(;n;){let e=t.cmp(n.segment)
;if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!t.hasNext())return n.mid?this._nodeIterator(n.mid):void 0;t.next(),n=n.mid}}}_nodeIterator(e){let t,n,r;return{next:()=>(r||(r=[],n=0,this._forEach(e,e=>r.push(e))),n>=r.length?i.FIN:(t?t.value=r[n++]:t={done:!1,value:r[n++]},t))}}forEach(e){this._forEach(this._root,e)}_forEach(e,t){e&&(this._forEach(e.left,t),e.value&&t(e.value,e.key),this._forEach(e.mid,t),this._forEach(e.right,t))}}t.TernarySearchTree=l;class u{constructor(){this.map=new Map,this.ignoreCase=!1}set(e,t){this.map.set(this.toKey(e),t)}get(e){return this.map.get(this.toKey(e))}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e){this.map.forEach(e)}values(){return r(this.map)}toKey(e){let t=e.toString();return this.ignoreCase&&(t=t.toLowerCase()),t}keys(){return o(this.map).map(e=>n.URI.parse(e))}clone(){const e=new u;return this.map.forEach((t,n)=>e.map.set(n,t)),e}}t.ResourceMap=u
;!function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"}(t.Touch||(t.Touch={}));class d{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return 0!==t&&this.touch(n,t),n.value}set(e,t,n=0){let i=this._map.get(e);if(i)i.value=t,0!==n&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:default:this.addItemLast(i)}this._map.set(e,i),this._size++}}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),
this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._head;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.next}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0)}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){
if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(1===t||2===t)if(1===t){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(2===t){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}t.LinkedMap=d;class h extends d{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,
this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e){return super.get(e,2)}peek(e){return super.get(e,0)}set(e,t){super.set(e,t,2),this.checkTrim()}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}t.LRUCache=h}),define(t[69],n([1,0,21,17,33,4,26,12]),function(e,t,n,i,r,o,s,a){"use strict";function c(e){switch(e){case 0:return"";case 1:return`${_}*?`;default:return`(?:${b}|${_}+${b}|${b}${_}+)*?`}}function l(e,t){if(!e)return[];let n=[],i=!1,r=!1,o="";for(const s of e){switch(s){case t:if(!i&&!r){n.push(o),o="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":r=!0;break;case"]":r=!1}o+=s}return o&&n.push(o),n}function u(e){if(!e)return"";let t="",n=l(e,S);if(n.every(e=>e===y))t=".*";else{let e=!1;n.forEach((r,o)=>{if(r===y)return void(e||(t+=c(2),e=!0));let s=!1,a="",d=!1,h="";for(const e of r)if("}"!==e&&s)a+=e;else if(!d||"]"===e&&h)switch(e){case"{":s=!0;continue;case"[":d=!0;continue
;case"}":let n=`(?:${l(a,",").map(e=>u(e)).join("|")})`;t+=n,s=!1,a="";break;case"]":t+="["+h+"]",d=!1,h="";break;case"?":t+=_;continue;case"*":t+=c(1);continue;default:t+=i.escapeRegExpCharacters(e)}else{let t;h+=t="-"===e?e:"^"!==e&&"!"!==e||h?e===S?"":i.escapeRegExpCharacters(e):"^"}o<n.length-1&&(n[o+1]!==y||o+2<n.length)&&(t+=b),e=!1})}return t}function d(e,t){if(!e)return D;let r;r="string"!=typeof e?e.pattern:e;const o=`${r=r.trim()}_${!!t.trimForExclusions}`;let s=A.get(o);if(s)return h(s,e);let a;if(E.test(r)){const e=r.substr(4);s=function(t,n){return"string"==typeof t&&i.endsWith(t,e)?r:null}}else s=(a=k.exec(p(r,t)))?function(e,t){const n=`/${e}`,r=`\\${e}`,o=function(o,s){return"string"!=typeof o?null:s?s===e?t:null:o===e||i.endsWith(o,n)||i.endsWith(o,r)?t:null},s=[e];return o.basenames=s,o.patterns=[t],o.allBasenames=s,o}(a[1],r):(t.trimForExclusions?P:I).test(r)?function(e,t){const i=w(e.slice(1,-1).split(",").map(e=>d(e,t)).filter(e=>e!==D),e),r=i.length;if(!r)return D;if(1===r)return i[0]
;const o=function(t,n){for(let r=0,o=i.length;r<o;r++)if(i[r](t,n))return e;return null},s=n.first(i,e=>!!e.allBasenames);s&&(o.allBasenames=s.allBasenames);const a=i.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);a.length&&(o.allPaths=a);return o}(r,t):(a=M.exec(p(r,t)))?f(a[1].substr(1),r,!0):(a=O.exec(p(r,t)))?f(a[1],r,!1):function(e){try{const t=new RegExp(`^${u(e)}$`);return function(n,i){return t.lastIndex=0,"string"==typeof n&&t.test(n)?e:null}}catch(e){return D}}(r);return A.set(o,s),h(s,e)}function h(e,t){return"string"==typeof t?e:function(n,i){return r.isEqualOrParent(n,t.base)?e(o.relative(t.base,n),i):null}}function p(e,t){return t.trimForExclusions&&i.endsWith(e,"/**")?e.substr(0,e.length-2):e}function f(e,t,n){const r=o.sep!==o.posix.sep?e.replace(C,o.sep):e,s=o.sep+r,a=n?function(e,n){return"string"!=typeof e||e!==r&&!i.endsWith(e,s)?null:t}:function(e,n){return"string"==typeof e&&e===r?t:null};return a.allPaths=[(n?"*/":"./")+e],a}function g(e,t={}){if(!e)return W
;if("string"==typeof e||v(e)){const n=d(e,t);if(n===D)return W;const i=function(e,t){return!!n(e,t)};return n.allBasenames&&(i.allBasenames=n.allBasenames),n.allPaths&&(i.allPaths=n.allPaths),i}return function(e,t){const i=w(Object.getOwnPropertyNames(e).map(n=>(function(e,t,n){if(!1===t)return D;const i=d(e,n);if(i===D)return D;if("boolean"==typeof t)return i;if(t){const n=t.when;if("string"==typeof n){const t=(t,r,o,s)=>{if(!s||!i(t,r))return null;const c=n.replace("$(basename)",o),l=s(c);return a.isThenable(l)?l.then(t=>t?e:null):l?e:null};return t.requiresSiblings=!0,t}}return i})(n,e[n],t)).filter(e=>e!==D)),r=i.length;if(!r)return D;if(!i.some(e=>!!e.requiresSiblings)){if(1===r)return i[0];const e=function(e,t){for(let n=0,r=i.length;n<r;n++){const r=i[n](e,t);if(r)return r}return null},t=n.first(i,e=>!!e.allBasenames);t&&(e.allBasenames=t.allBasenames);const o=i.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return o.length&&(e.allPaths=o),e}const s=function(e,t,n){let r=void 0
;for(let s=0,a=i.length;s<a;s++){const a=i[s];a.requiresSiblings&&n&&(t||(t=o.basename(e)),r||(r=t.substr(0,t.length-o.extname(e).length)));const c=a(e,t,r,n);if(c)return c}return null},c=n.first(i,e=>!!e.allBasenames);c&&(s.allBasenames=c.allBasenames);const l=i.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);l.length&&(s.allPaths=l);return s}(e,t)}function m(e){const t={};for(const n of e)t[n]=!0;return t}function v(e){const t=e;return t&&"string"==typeof t.base&&"string"==typeof t.pattern}function w(e,t){const n=e.filter(e=>!!e.basenames);if(n.length<2)return e;const i=n.reduce((e,t)=>{const n=t.basenames;return n?e.concat(n):e},[]);let r;if(t){r=[];for(let e=0,n=i.length;e<n;e++)r.push(t)}else r=n.reduce((e,t)=>{const n=t.patterns;return n?e.concat(n):e},[]);const o=function(e,t){if("string"!=typeof e)return null;if(!t){let n;for(n=e.length;n>0;n--){const t=e.charCodeAt(n-1);if(47===t||92===t)break}t=e.substr(n)}const n=i.indexOf(t);return-1!==n?r[n]:null};o.basenames=i,o.patterns=r,o.allBasenames=i
;const s=e.filter(e=>!e.basenames);return s.push(o),s}Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyExpression=function(){return Object.create(null)};const y="**",S="/",b="[/\\\\]",_="[^/\\\\]",C=/\//g;t.splitGlobAware=l;const E=/^\*\*\/\*\.[\w\.-]+$/,k=/^\*\*\/([\w\.-]+)\/?$/,I=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,P=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,M=/^\*\*((\/[\w\.-]+)+)\/?$/,O=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,A=new s.LRUCache(1e4),W=function(){return!1},D=function(){return null};t.match=function(e,t,n){return!(!e||"string"!=typeof t)&&g(e)(t,void 0,n)},t.parse=g,t.hasSiblingPromiseFn=function(e){if(!e)return;let t;return n=>(t||(t=(e()||Promise.resolve([])).then(e=>e?m(e):{})),t.then(e=>!!e[n]))},t.hasSiblingFn=function(e){if(!e)return;let t;return n=>{if(!t){const n=e();t=n?m(n):{}}return!!t[n]}},t.isRelativePattern=v,t.parseToAsync=function(e,t){const n=g(e,t);return(e,t,i)=>{const r=n(e,t,i)
;return a.isThenable(r)?r:Promise.resolve(r)}},t.getBasenameTerms=function(e){return e.allBasenames||[]},t.getPathTerms=function(e){return e.allPaths||[]}}),define(t[91],n([1,0,4,17,21,69]),function(e,t,n,i,r,o){"use strict";function s(e,t=!1){const i=function(e){return{id:e.id,mime:e.mime,filename:e.filename,extension:e.extension,filepattern:e.filepattern,firstline:e.firstline,userConfigured:e.userConfigured,filenameLowercase:e.filename?e.filename.toLowerCase():void 0,extensionLowercase:e.extension?e.extension.toLowerCase():void 0,filepatternLowercase:e.filepattern?e.filepattern.toLowerCase():void 0,filepatternOnPath:!!e.filepattern&&e.filepattern.indexOf(n.posix.sep)>=0}}(e);u.push(i),i.userConfigured?h.push(i):d.push(i),t&&!i.userConfigured&&u.forEach(e=>{e.mime===i.mime||e.userConfigured||(i.extension&&e.extension===i.extension&&console.warn(`Overwriting extension <<${i.extension}>> to now point to mime <<${i.mime}>>`),
i.filename&&e.filename===i.filename&&console.warn(`Overwriting filename <<${i.filename}>> to now point to mime <<${i.mime}>>`),i.filepattern&&e.filepattern===i.filepattern&&console.warn(`Overwriting filepattern <<${i.filepattern}>> to now point to mime <<${i.mime}>>`),i.firstline&&e.firstline===i.firstline&&console.warn(`Overwriting firstline <<${i.firstline}>> to now point to mime <<${i.mime}>>`))})}function a(e,r){if(!e)return[t.MIME_UNKNOWN];e=e.toLowerCase();const o=n.basename(e),s=c(e,o,h);if(s)return[s,t.MIME_TEXT];const a=c(e,o,d);if(a)return[a,t.MIME_TEXT];if(r){const e=function(e){i.startsWithUTF8BOM(e)&&(e=e.substr(1));if(e.length>0)for(const t of u){if(!t.firstline)continue;const n=e.match(t.firstline);if(n&&n.length>0)return t.mime}return null}(r);if(e)return[e,t.MIME_TEXT]}return[t.MIME_UNKNOWN]}function c(e,t,n){let r=null,s=null,a=null;for(let c=n.length-1;c>=0;c--){const l=n[c];if(t===l.filenameLowercase){r=l;break}if(l.filepattern&&(!s||l.filepattern.length>s.filepattern.length)){
const n=l.filepatternOnPath?e:t;o.match(l.filepatternLowercase,n)&&(s=l)}l.extension&&(!a||l.extension.length>a.extension.length)&&i.endsWith(t,l.extensionLowercase)&&(a=l)}return r?r.mime:s?s.mime:a?a.mime:null}function l(e){return!e||("string"==typeof e?e===t.MIME_BINARY||e===t.MIME_TEXT||e===t.MIME_UNKNOWN:1===e.length&&l(e[0]))}Object.defineProperty(t,"__esModule",{value:!0}),t.MIME_TEXT="text/plain",t.MIME_BINARY="application/octet-stream",t.MIME_UNKNOWN="application/unknown";let u=[],d=[],h=[];t.registerTextMime=s,t.clearTextMimes=function(e){e?(u=u.filter(e=>!e.userConfigured),h=[]):(u=[],d=[],h=[])},t.guessMimeTypes=a,t.isUnspecific=l,t.suggestFilename=function(e,t){const n=u.filter(t=>!t.userConfigured&&t.extension&&t.id===e).map(e=>e.extension),o=r.coalesce(n).filter(e=>i.startsWith(e,"."));return o.length>0?t+o[0]:n[0]||t};const p={".bmp":"image/bmp",".gif":"image/gif",".jpg":"image/jpg",".jpeg":"image/jpg",".jpe":"image/jpg",".png":"image/png",".tiff":"image/tiff",".tif":"image/tiff",
".ico":"image/x-icon",".tga":"image/x-tga",".psd":"image/vnd.adobe.photoshop",".webp":"image/webp",".mid":"audio/midi",".midi":"audio/midi",".mp4a":"audio/mp4",".mpga":"audio/mpeg",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".m2a":"audio/mpeg",".m3a":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".spx":"audio/ogg",".aac":"audio/x-aac",".wav":"audio/x-wav",".wma":"audio/x-ms-wma",".mp4":"video/mp4",".mp4v":"video/mp4",".mpg4":"video/mp4",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpe":"video/mpeg",".m1v":"video/mpeg",".m2v":"video/mpeg",".ogv":"video/ogg",".qt":"video/quicktime",".mov":"video/quicktime",".webm":"video/webm",".mkv":"video/x-matroska",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".wmv":"video/x-ms-wmv",".flv":"video/x-flv",".avi":"video/x-msvideo",".movie":"video/x-sgi-movie"};t.getMediaMime=function(e){const t=n.extname(e);return p[t.toLowerCase()]}}),define(t[67],n([1,0,26]),function(e,t,n){"use strict";function i(e,n,i){if(!t.canNormalize||!e)return e
;const r=i.get(e);if(r)return r;let o;return o=s.test(e)?e.normalize(n):e,i.set(e,o),o}Object.defineProperty(t,"__esModule",{value:!0}),t.canNormalize="function"==typeof"".normalize;const r=new n.LRUCache(1e4);t.normalizeNFC=function(e){return i(e,"NFC",r)};const o=new n.LRUCache(1e4);t.normalizeNFD=function(e){return i(e,"NFD",o)};const s=/[^\u0000-\u0080]/}),define(t[27],n([1,0,33,4,8,17,31,3,69,26]),function(e,t,n,i,r,o,s,a,c,l){"use strict";function u(e){return!e||e.scheme!==s.Schemas.file||!a.isLinux}function d(e,t,i=u(e)){if(e.scheme===t.scheme){if(e.scheme===s.Schemas.file)return n.isEqualOrParent(f(e),f(t),i);if(h(e.authority,t.authority))return n.isEqualOrParent(e.path,t.path,i,"/")}return!1}function h(e,t){return e===t||o.equalsIgnoreCase(e,t)}function p(e){return i.posix.basename(e.path)}function f(e){let t;const i=e.path
;return t=e.authority&&i.length>1&&"file"===e.scheme?`//${e.authority}${i}`:a.isWindows&&47===i.charCodeAt(0)&&n.isWindowsDriveLetter(i.charCodeAt(1))&&58===i.charCodeAt(2)?i.substr(1):i,a.isWindows&&(t=t.replace(/\//g,"\\")),t}function g(e){if(e.scheme===s.Schemas.file){const t=f(e);return t.length>n.getRoot(t).length&&t[t.length-1]===i.sep}{let t=e.path;return t.length>1&&47===t.charCodeAt(t.length-1)}}function m(e,t){if(e.scheme===t.scheme&&h(e.authority,t.authority)){if(e.scheme===s.Schemas.file){const r=i.relative(e.path,t.path);return a.isWindows?n.toSlashes(r):r}return i.posix.relative(e.path||"/",t.path||"/")}}Object.defineProperty(t,"__esModule",{value:!0}),t.getComparisonKey=function(e){return u(e)?e.toString().toLowerCase():e.toString()},t.hasToIgnoreCase=u,t.basenameOrAuthority=function(e){return p(e)||e.authority},t.isEqualOrParent=d,t.isEqualAuthority=h,t.isEqual=function(e,t,n=u(e)){if(e===t)return!0;if(!e||!t)return!1;if(e.scheme!==t.scheme||!h(e.authority,t.authority))return!1
;const i=e.path||"/",r=t.path||"/";return i===r||n&&o.equalsIgnoreCase(i||"/",r||"/")},t.basename=p,t.extname=function(e){return i.posix.extname(e.path)},t.dirname=function(e){if(0===e.path.length)return e;if(e.scheme===s.Schemas.file)return r.URI.file(i.dirname(f(e)));let t=i.posix.dirname(e.path);return e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/"),e.with({path:t})},t.joinPath=function(e,...t){let n;return n=e.scheme===s.Schemas.file?r.URI.file(i.join(f(e),...t)).path:i.posix.join(e.path||"/",...t),e.with({path:n})},t.normalizePath=function(e){if(!e.path.length)return e;let t;return t=e.scheme===s.Schemas.file?r.URI.file(i.normalize(f(e))).path:i.posix.normalize(e.path),e.with({path:t})},t.originalFSPath=f,t.isAbsolutePath=function(e){return!!e.path&&"/"===e.path[0]},t.hasTrailingPathSeparator=g,t.removeTrailingPathSeparator=function(e){return g(e)?e.with({path:e.path.substr(0,e.path.length-1)}):e},t.relativePath=m,
t.resolvePath=function(e,t){let n;return n=e.scheme===s.Schemas.file?r.URI.file(i.resolve(f(e),t)).path:i.posix.resolve(e.path,t),e.with({path:n})},t.distinctParents=function(e,t){const n=[];for(let i=0;i<e.length;i++){const r=t(e[i]);e.some((e,n)=>n!==i&&d(r,t(e)))||n.push(e[i])}return n},t.isMalformedFileUri=function(e){if(!e.scheme||a.isWindows&&e.scheme.match(/^[a-zA-Z]$/))return r.URI.file((e.scheme?e.scheme+":":"")+e.path)};!function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=function(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(e=>{const[t,i]=e.split(":");t&&i&&n.set(t,i)});const i=t.path.substring(0,t.path.indexOf(";"));return i&&n.set(e.META_DATA_MIME,i),n}}(t.DataUri||(t.DataUri={}));class v{constructor(e,t){this.expressionsByRoot=l.TernarySearchTree.forPaths(),this.globalExpression=c.parse(e);for(const e of t)this.expressionsByRoot.set(e.root.toString(),{
root:e.root,expression:c.parse(e.expression)})}matches(e){const t=this.expressionsByRoot.findSubstr(e.toString());if(t){const n=m(t.root,e);if(n&&t.expression(n))return!0}return!!this.globalExpression(e.path)}}t.ResourceGlobMatcher=v}),define(t[42],n([1,0,8,4,17,31,3,27]),function(e,t,n,i,r,o,s,a){"use strict";function c(e){return!(!s.isWindows||!e||":"!==e[1])}function l(e){return c(e)?e.charAt(0).toUpperCase()+e.slice(1):e}function u(e,t){if(s.isWindows||!e||!t)return e;let n=d.original===t?d.normalized:void 0;return n||(n=`${r.rtrim(t,i.posix.sep)}${i.posix.sep}`,d={original:t,normalized:n}),(s.isLinux?r.startsWith(e,n):r.startsWithIgnoreCase(e,n))&&(e=`~/${e.substr(n.length)}`),e}Object.defineProperty(t,"__esModule",{value:!0}),t.getPathLabel=function(e,t,d){if("string"==typeof e&&(e=n.URI.file(e)),d){const t=d.getWorkspaceFolder(e);if(t){const n=d.getWorkspace().folders.length>1;let o;if(o=a.isEqual(t.uri,e)?"":i.normalize(r.ltrim(e.path.substr(t.uri.path.length),i.posix.sep)),n){
const e=t&&t.name?t.name:a.basename(t.uri);o=o?e+"  "+o:e}return o}}if(e.scheme!==o.Schemas.file&&e.scheme!==o.Schemas.untitled)return e.with({query:null,fragment:null}).toString(!0);if(c(e.fsPath))return i.normalize(l(e.fsPath));let h=i.normalize(e.fsPath);return!s.isWindows&&t&&(h=u(h,t.userHome)),h},t.getBaseLabel=function(e){if(!e)return;"string"==typeof e&&(e=n.URI.file(e));const t=a.basename(e)||(e.scheme===o.Schemas.file?e.fsPath:e.path);return c(t)?l(t):t},t.normalizeDriveLetter=l;let d=Object.create(null);t.tildify=u,t.untildify=function(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)};const h="",p="\\\\",f="~";t.shorten=function(e){const t=new Array(e.length);let n=!1;for(let o=0;o<e.length;o++){let s=e[o];if(""===s){t[o]=`.${i.sep}`;continue}if(!s){t[o]=s;continue}n=!0;let a="";0===s.indexOf(p)?(a=s.substr(0,s.indexOf(p)+p.length),s=s.substr(s.indexOf(p)+p.length)):0===s.indexOf(i.sep)?(a=s.substr(0,s.indexOf(i.sep)+i.sep.length),
s=s.substr(s.indexOf(i.sep)+i.sep.length)):0===s.indexOf(f)&&(a=s.substr(0,s.indexOf(f)+f.length),s=s.substr(s.indexOf(f)+f.length));const c=s.split(i.sep);for(let s=1;n&&s<=c.length;s++)for(let l=c.length-s;n&&l>=0;l--){n=!1;let u=c.slice(l,l+s).join(i.sep);for(let t=0;!n&&t<e.length;t++)if(t!==o&&e[t]&&e[t].indexOf(u)>-1){const o=l+s===c.length,a=l>0&&e[t].indexOf(i.sep)>-1?i.sep+u:u,d=r.endsWith(e[t],a);n=!o||d}if(!n){let e="";(r.endsWith(c[0],":")||""!==a)&&(1===l&&(l=0,s++,u=c[0]+i.sep+u),l>0&&(e=c[0]+i.sep),e=a+e),l>0&&(e=e+h+i.sep),e+=u,l+s<c.length&&(e=e+i.sep+h),t[o]=e}}n&&(t[o]=s)}return t};var g;!function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"}(g||(g={})),t.template=function(e,t=Object.create(null)){const n=[];let i=!1,r="";for(const o of e)if("$"===o||i&&"{"===o)r&&n.push({value:r,type:g.TEXT}),r="",i=!0;else if("}"===o&&i){const e=t[r];if("string"==typeof e)e.length&&n.push({value:e,type:g.VARIABLE});else if(e){const t=n[n.length-1]
;t&&t.type===g.SEPARATOR||n.push({value:e.label,type:g.SEPARATOR})}r="",i=!1}else r+=o;return r&&!i&&n.push({value:r,type:g.TEXT}),n.filter((e,t)=>e.type!==g.SEPARATOR||[n[t-1],n[t+1]].every(e=>e&&(e.type===g.VARIABLE||e.type===g.TEXT)&&e.value.length>0)).map(e=>e.value).join("")},t.mnemonicMenuLabel=function(e,t){return s.isMacintosh||t?e.replace(/\(&&\w\)|&&/g,"").replace(/&/g,s.isMacintosh?"&":"&&"):e.replace(/&&|&/g,e=>"&"===e?"&&":"&")},t.mnemonicButtonLabel=function(e){return s.isMacintosh?e.replace(/\(&&\w\)|&&/g,""):s.isWindows?e.replace(/&&|&/g,e=>"&"===e?"&&":"&"):e.replace(/&&/g,"_")},t.unmnemonicLabel=function(e){return e.replace(/&/g,"&&")}}),define(t[29],n([1,0]),function(e,t){"use strict";function n(){return new o}function i(e){return s.test(e)}Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this._value=e}asHex(){return this._value}}class o extends r{constructor(){
super([o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),"-",o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),"-","4",o._randomHex(),o._randomHex(),o._randomHex(),"-",o._oneOf(o._timeHighBits),o._randomHex(),o._randomHex(),o._randomHex(),"-",o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return o._oneOf(o._chars)}}o._chars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],o._timeHighBits=["8","9","a","b"],t.v4=n;const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;t.isUUID=i,t.parse=function(e){if(!i(e))throw new Error("invalid uuid");return new r(e)},t.generateUuid=function(){return n().asHex()}}),define(t[126],n([1,0,16,58,60]),function(e,t,n,i,r){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0}),t.checksum=function(e,t){return new Promise((t,o)=>{const s=n.createReadStream(e),a=i.createHash("sha1");s.pipe(a);const c=r.once((e,n)=>{s.removeAllListeners(),a.removeAllListeners(),e?o(e):t(n)});s.once("error",c),s.once("end",c),a.once("error",c),a.once("data",e=>c(void 0,e.toString("hex")))}).then(e=>e!==t?Promise.reject(new Error("Hash mismatch")):Promise.resolve())}}),define(t[140],n([1,0,154]),function(e,t,n){"use strict";function i(e,t,r){if(n.ok(e,"Missing first parameter"),n.ok("function"==typeof t,"Second parameter must be a function that is called for each element"),n.ok("function"==typeof r,"Third parameter must be a function that is called on error and success"),"function"==typeof e)try{e((e,n)=>{e?r(e,null):i(n,t,r)})}catch(e){r(e,null)}else{let n=[],i=function(o){if(o<e.length)try{t(e[o],(e,t)=>{!0!==e&&!1!==e||(t=e,e=null),e?r(e,null):(t&&n.push(t),process.nextTick(()=>{i(o+1)}))},o,e.length)}catch(e){r(e,null)}else r(null,n)};i(0)}}
function r(e){!function(e){n.ok(e.length>1,"Need at least one error handler and one function to process sequence"),e.forEach(e=>{n.ok("function"==typeof e)});let t=e.splice(0,1)[0],r=null;i(e,(e,t)=>{let n=function(e,n){!0!==e&&!1!==e||(n=e,e=null),e?t(e,null):(r=n,t(null,null))};try{e.call(n,r)}catch(e){t(e,null)}},(e,n)=>{e&&t(e)})}(Array.isArray(e)?e:Array.prototype.slice.call(arguments))}Object.defineProperty(t,"__esModule",{value:!0}),t.parallel=function(e,t,n){let i=new Array(e.length),r=new Array(e.length),o=!1,s=0;if(0===e.length)return n(null,[]);e.forEach((a,c)=>{t(a,(t,a)=>{if(t?(o=!0,i[c]=null,r[c]=t):(i[c]=a,r[c]=null),++s===e.length)return n(o?r:null,i)})})},t.loop=i,t.sequence=r}),define(t[62],n([1,0,19,29,23,26]),function(e,t,n,i,r,o){"use strict";function s(){return a||(a=new Promise(t=>{Promise.all([new Promise((t,n)=>{e(["crypto"],t,n)}),new Promise((t,n)=>{e(["getmac"],t,n)})]).then(([e,i])=>{try{i.getMac((n,i)=>{t(n?void 0:e.createHash("sha256").update(i,"utf8").digest("hex"))}),
setTimeout(()=>{t(void 0)},1e4)}catch(e){n.onUnexpectedError(e),t(void 0)}},e=>{n.onUnexpectedError(e),t(void 0)})}).then(e=>e||i.generateUuid()))}Object.defineProperty(t,"__esModule",{value:!0}),t.virtualMachineHint=new class{_isVirtualMachineMacAdress(e){return this._virtualMachineOUIs||(this._virtualMachineOUIs=o.TernarySearchTree.forStrings(),this._virtualMachineOUIs.set("00-50-56",!0),this._virtualMachineOUIs.set("00-0C-29",!0),this._virtualMachineOUIs.set("00-05-69",!0),this._virtualMachineOUIs.set("00-03-FF",!0),this._virtualMachineOUIs.set("00-1C-42",!0),this._virtualMachineOUIs.set("00-16-3E",!0),this._virtualMachineOUIs.set("08-00-27",!0),this._virtualMachineOUIs.set("00:50:56",!0),this._virtualMachineOUIs.set("00:0C:29",!0),this._virtualMachineOUIs.set("00:05:69",!0),this._virtualMachineOUIs.set("00:03:FF",!0),this._virtualMachineOUIs.set("00:1C:42",!0),this._virtualMachineOUIs.set("00:16:3E",!0),this._virtualMachineOUIs.set("08:00:27",!0)),!!this._virtualMachineOUIs.findSubstr(e)}value(){
if(void 0===this._value){let e=0,t=0;const n=r.networkInterfaces();for(let i in n)if(Object.prototype.hasOwnProperty.call(n,i))for(const{mac:r,internal:o}of n[i])o||(t+=1,this._isVirtualMachineMacAdress(r.toUpperCase())&&(e+=1));this._value=t>0?e/t:0}return this._value}};let a;t.getMachineId=s}),define(t[92],n([1,0,44]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n.getPathFromAmdModule(e,"paths"),r=e.__$__nodeRequire(i);t.getAppDataPath=r.getAppDataPath,t.getDefaultUserDataPath=r.getDefaultUserDataPath}),define(t[93],n([1,0,94,18]),function(e,t,n,r){"use strict";function o(t,o={}){return i(this,void 0,void 0,function*(){const i=n.parse(t),s=o.proxyUrl||function(e){return"http:"===e.protocol?process.env.HTTP_PROXY||process.env.http_proxy||null:"https:"===e.protocol?process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy||null:null}(i);if(!s)return null;const a=n.parse(s);if(!/^https?:$/.test(a.protocol||""))return null;const c={
host:a.hostname||"",port:Number(a.port),auth:a.auth,rejectUnauthorized:!r.isBoolean(o.strictSSL)||o.strictSSL};return new("http:"===i.protocol?yield new Promise((t,n)=>{e(["http-proxy-agent"],t,n)}):yield new Promise((t,n)=>{e(["https-proxy-agent"],t,n)}))(c)})}Object.defineProperty(t,"__esModule",{value:!0}),t.getProxyAgent=o}),define(t[96],n([1,0,41,44]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listProcesses=function(t){return new Promise((r,o)=>{function s(e,n,i,r,o){const s=l.get(n);if(e===t||s){const u={name:a(i),cmd:i,pid:e,ppid:n,load:r,mem:o};l.set(e,u),e===t&&(c=u),s&&(s.children||(s.children=[]),s.children.push(u),s.children.length>1&&(s.children=s.children.sort((e,t)=>e.pid-t.pid)))}}function a(e){const t=/--disable-blink-features=Auxclick/;if(/\\watcher\\win32\\CodeHelper\.exe/.exec(e))return"watcherService ";if(/--crashes-directory/.exec(e))return"electron-crash-reporter";if(/\\pipe\\winpty-control/.exec(e))return"winpty-process"
;if(/conhost\.exe/.exec(e))return"console-window-host (Windows internal process)";let n=/--type=([a-zA-Z-]+)/.exec(e);if(n&&2===n.length)return"renderer"===n[1]?t.exec(e)?"shared-process":"window":n[1];const i=/[a-zA-Z-]+\.js/g;let r="";do{(n=i.exec(e))&&(r+=n+" ")}while(n);return r&&e.indexOf("node ")<0&&e.indexOf("node.exe")<0?`electron_node ${r}`:e}let c;const l=new Map;if("win32"===process.platform)new Promise((t,n)=>{e(["windows-process-tree"],t,n)}).then(e=>{e.getProcessList(t,n=>{e.getProcessCpuUsage(n,e=>{const n=new Map;e.forEach(e=>{const t=(e=>0===e.indexOf("\\\\?\\")?e.substr(4):0===e.indexOf("\\??\\")?e.substr(4):0===e.indexOf('"\\\\?\\')?'"'+e.substr(5):0===e.indexOf('"\\??\\')?'"'+e.substr(5):e)(e.commandLine||"");n.set(e.pid,{name:a(t),cmd:t,pid:e.pid,ppid:e.ppid,load:e.cpu||0,mem:e.memory||0})}),(c=n.get(t))?(n.forEach(e=>{let t=n.get(e.ppid);t&&(t.children||(t.children=[]),t.children.push(e))}),n.forEach(e=>{e.children&&(e.children=e.children.sort((e,t)=>e.pid-t.pid))}),
r(c)):o(new Error(`Root process ${t} not found`))})},e.ProcessDataFlag.CommandLine|e.ProcessDataFlag.Memory)});else{const t=/^\s*([0-9]+)\s+([0-9]+)\s+([0-9]+\.[0-9]+)\s+([0-9]+\.[0-9]+)\s+(.+)$/;n.exec("/bin/ps -ax -o pid=,ppid=,pcpu=,pmem=,command=",{maxBuffer:1024e3,env:{LC_NUMERIC:"en_US.UTF-8"}},(a,u,d)=>{if(a||d)o(a||d.toString());else{const a=u.toString().split("\n");for(const e of a){let n=t.exec(e.trim());n&&6===n.length&&s(parseInt(n[1]),parseInt(n[2]),n[5],parseFloat(n[3]),parseFloat(n[4]))}if("linux"===process.platform){let t=[c];const s=[];for(;t.length;){const e=t.shift();e&&(s.push(e.pid),e.children&&(t=t.concat(e.children)))}let a=JSON.stringify(i.getPathFromAmdModule(e,"vs/base/node/cpuUsage.sh"));a+=" "+s.join(" "),n.exec(a,{},(e,t,n)=>{if(e||n)o(e||n.toString());else{const e=t.toString().split("\n");for(let t=0;t<s.length;t++)l.get(s[t]).load=parseFloat(e[t]);r(c)}})}else r(c)}})}})}}),define(t[99],n([1,0,16,4,36]),function(e,t,n,r,o){"use strict";function s(e){let t=[]
;return e.forEach((e,n)=>t.push({name:n,count:e})),t.sort((e,t)=>t.count-e.count)}function a(e){let t=new Map,i=r.join(e,".vscode","launch.json");return new Promise((e,r)=>{n.exists(i,r=>{if(!r)return e([]);n.readFile(i,(n,r)=>{if(n)return e([]);const a=[],c=o.parse(r.toString(),a);if(a.length)return console.log(`Unable to parse ${i}`),e([]);if(c.configurations)for(const e of c.configurations){const n=e.type;n&&(t.has(n)?t.set(n,t.get(n)+1):t.set(n,1))}return e(s(t))})})})}Object.defineProperty(t,"__esModule",{value:!0}),t.collectLaunchConfigs=a,t.collectWorkspaceStats=function(e,t){function o(e,t,s,a){let c=[];n.readdir(e,(l,u)=>i(this,void 0,void 0,function*(){if(l)return a(c);let i=u.length;if(0===i)return a(c);for(const l of u){if(s.maxReached)return a(c);n.stat(r.join(e,l),(n,u)=>{if(n){if(0==--i)return a(c)}else u.isDirectory()?-1===t.indexOf(l)?o(r.join(e,l),t,s,e=>{if(c=c.concat(e),0==--i)return a(c)}):0==--i&&a(c):(s.count>=d&&(s.maxReached=!0),s.count++,c.push(l),0==--i&&a(c))})}}))}const c=[{
tag:"grunt.js",pattern:/^gruntfile\.js$/i},{tag:"gulp.js",pattern:/^gulpfile\.js$/i},{tag:"tsconfig.json",pattern:/^tsconfig\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"jsconfig.json",pattern:/^jsconfig\.json$/i},{tag:"tslint.json",pattern:/^tslint\.json$/i},{tag:"eslint.json",pattern:/^eslint\.json$/i},{tag:"tasks.json",pattern:/^tasks\.json$/i},{tag:"launch.json",pattern:/^launch\.json$/i},{tag:"settings.json",pattern:/^settings\.json$/i},{tag:"webpack.config.js",pattern:/^webpack\.config\.js$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"makefile",pattern:/^makefile$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"cmake",pattern:/^.+\.cmake$/i}];let l=new Map,u=new Map;const d=2e4;let h={count:0,maxReached:!1};return new Promise((n,r)=>{o(e,t,h,t=>i(this,void 0,void 0,function*(){t.forEach(e=>{if(e.lastIndexOf(".")>=0){let t=e.split(".").pop();t&&(e=>{l.has(e)?l.set(e,l.get(e)+1):l.set(e,1)})(t)}(e=>{
for(const t of c)t.pattern.test(e)&&(u.has(t.tag)?u.set(t.tag,u.get(t.tag)+1):u.set(t.tag,1))})(e)});let i=yield a(e);n({configFiles:s(u),fileTypes:s(l),fileCount:h.count,maxFilesReached:h.maxReached,launchConfigFiles:i})}))})}}),define(t[101],n([1,0,16]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readExactlyByFile=function(e,t){return new Promise((i,r)=>{n.open(e,"r",null,(e,o)=>{function s(e,t,s){n.close(o,n=>n?r(n):e&&"EISDIR"===e.code?r(e):i({buffer:t,bytesRead:s}))}function a(){n.read(o,c,l,t-l,null,(e,n)=>e?s(e,null,0):0===n?s(null,c,l):(l+=n)===t?s(null,c,l):a())}if(e)return r(e);const c=Buffer.allocUnsafe(t);let l=0;a()})})},t.readToMatchingString=function(e,t,i,r){return new Promise((o,s)=>n.open(e,"r",null,(a,c)=>{function l(e,t){n.close(c,n=>n?s(n):e&&"EISDIR"===e.code?s(e):o(t))}function u(){n.read(c,d,h,i,null,(n,i)=>{if(n)return l(n,null);if(0===i)return l(null,null);h+=i;const o=d.indexOf(t)
;return o>=0?l(null,d.toString("utf8").substr(0,o)):h>=r?l(new Error(`Could not find ${t} in first ${r} bytes of ${e}`),null):u()})}if(a)return s(a);let d=Buffer.allocUnsafe(r),h=0;u()}))}}),define(t[103],n([1,0,101,192,3,41,188]),function(e,t,n,i,r,o,s){"use strict";function a(e){return i.decodeStream(c(e))}function c(e){return e===t.UTF8_with_bom||null===e?t.UTF8:e}function l(e,n){if(!e||n<2)return null;const i=e.readUInt8(0),r=e.readUInt8(1);if(254===i&&255===r)return t.UTF16be;if(255===i&&254===r)return t.UTF16le;if(n<3)return null;const o=e.readUInt8(2);return 239===i&&187===r&&191===o?t.UTF8:null}function u(t){return new Promise((t,n)=>{e(["jschardet"],t,n)}).then(e=>{e.Constants.MINIMUM_THRESHOLD=p;const n=e.detect(t);if(!n||!n.encoding)return null;const i=n.encoding.toLowerCase();return 0<=f.indexOf(i)?null:d(n.encoding)})}function d(e){const t=e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();return g[t]||t}function h({buffer:e,bytesRead:n},i){let r=l(e,n),o=!1;if(r!==t.UTF16be&&r!==t.UTF16le&&e){
let i=!0,s=!0,a=!1;for(let t=0;t<n&&t<m;t++){const n=t%2==1,r=0===e.readInt8(t);if(r&&(a=!0),i&&(n&&!r||!n&&r)&&(i=!1),s&&(n&&r||!n&&!r)&&(s=!1),r&&!i&&!s)break}a&&(i?r=t.UTF16le:s?r=t.UTF16be:o=!0)}return i&&!o&&!r&&e?u(e.slice(0,n)).then(e=>({seemsBinary:!1,encoding:e})):{seemsBinary:o,encoding:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.UTF8="utf8",t.UTF8_with_bom="utf8bom",t.UTF16be="utf16be",t.UTF16le="utf16le",t.toDecodeStream=function(e,n){return n.minBytesRequiredForDetection||(n.minBytesRequiredForDetection=n.guessEncoding?w:v),n.overwriteEncoding||(n.overwriteEncoding=(e=>e||t.UTF8)),new Promise((t,i)=>{e.on("error",i),e.pipe(new class extends s.Writable{constructor(){super(...arguments),this._buffer=[],this._bytesBuffered=0}_write(e,t,i){Buffer.isBuffer(e)||i(new Error("data must be a buffer")),this._decodeStream?this._decodeStream.write(e,i):(this._buffer.push(e),this._bytesBuffered+=e.length,
this._decodeStreamConstruction?this._decodeStreamConstruction.then(e=>i(),e=>i(e)):"number"==typeof n.minBytesRequiredForDetection&&this._bytesBuffered>=n.minBytesRequiredForDetection?this._startDecodeStream(i):i())}_startDecodeStream(e){this._decodeStreamConstruction=Promise.resolve(h({buffer:Buffer.concat(this._buffer),bytesRead:this._bytesBuffered},n.guessEncoding)).then(i=>{n.overwriteEncoding&&(i.encoding=n.overwriteEncoding(i.encoding)),this._decodeStream=a(i.encoding);for(const e of this._buffer)this._decodeStream.write(e);e(),t({detected:i,stream:this._decodeStream})},t=>{this.emit("error",t),e(t)})}_final(e){this._decodeStream?this._decodeStream.end(e):this._startDecodeStream(()=>this._decodeStream.end(e))}})})},t.bomLength=function(e){switch(e){case t.UTF8:return 3;case t.UTF16be:case t.UTF16le:return 2}return 0},t.decode=function(e,t){return i.decode(e,c(t))},t.encode=function(e,t,n){return i.encode(e,c(t),n)},t.encodingExists=function(e){return i.encodingExists(c(e))},t.decodeStream=a,
t.encodeStream=function(e,t){return i.encodeStream(c(e),t)},t.detectEncodingByBOMFromBuffer=l,t.detectEncodingByBOM=function(e){return n.readExactlyByFile(e,3).then(({buffer:e,bytesRead:t})=>l(e,t))};const p=.2,f=["ascii","utf-8","utf-16","utf-32"];t.guessEncodingByBuffer=u;const g={ibm866:"cp866",big5:"cp950"};t.toCanonicalName=function(e){switch(e){case"shiftjis":return"shift-jis";case"utf16le":return"utf-16le";case"utf16be":return"utf-16be";case"big5hkscs":return"big5-hkscs";case"eucjp":return"euc-jp";case"euckr":return"euc-kr";case"koi8r":return"koi8-r";case"koi8u":return"koi8-u";case"macroman":return"x-mac-roman";case"utf8bom":return"utf8";default:const t=e.match(/windows(\d+)/);return t?"windows-"+t[1]:e}};const m=512,v=512,w=4096;t.detectEncodingFromBuffer=h;const y={437:"cp437",850:"cp850",852:"cp852",855:"cp855",857:"cp857",860:"cp860",861:"cp861",863:"cp863",865:"cp865",866:"cp866",869:"cp869",936:"cp936",1252:"cp1252"};t.resolveTerminalEncoding=function(e){let n
;const s=process.env.VSCODE_CLI_ENCODING;return s?(e&&console.log(`Found VSCODE_CLI_ENCODING variable: ${s}`),n=Promise.resolve(s)):n=r.isLinux||r.isMacintosh?new Promise(t=>{e&&console.log('Running "locale charmap" to detect terminal encoding...'),o.exec("locale charmap",(e,n,i)=>t(n))}):new Promise(t=>{e&&console.log('Running "chcp" to detect terminal encoding...'),o.exec("chcp",(e,n,i)=>{if(n){const e=Object.keys(y);for(const i of e)if(n.indexOf(i)>=0)return t(y[i])}return t(void 0)})}),n.then(n=>{if(e&&console.log(`Detected raw terminal encoding: ${n}`),!n||"utf-8"===n.toLowerCase()||n.toLowerCase()===t.UTF8)return t.UTF8;const r=d(n);return i.encodingExists(r)?r:(e&&console.log("Unsupported terminal encoding, falling back to UTF-8."),t.UTF8)})}}),define(t[34],n([1,0,16,4,12,67,3,17,29,103,140,6]),function(e,t,n,i,r,o,s,a,c,l,u,d){"use strict";function h(e){return s.isMacintosh?n.readdirSync(e).map(e=>o.normalizeNFC(e)):n.readdirSync(e)}function p(e,t){
return s.isMacintosh?n.readdir(e,(e,n)=>e?t(e,[]):t(null,n.map(e=>o.normalizeNFC(e)))):n.readdir(e,t)}function f(e,t,r,o){const s=o||Object.create(null);n.stat(e,(o,a)=>{if(o)return r(o);if(!a.isDirectory())return function(e,t,i,r){const o=n.createReadStream(e),s=n.createWriteStream(t,{mode:i});let a=!1;const c=e=>{a||(a=!0,e?r(e):n.chmod(t,i,r))};o.once("error",e=>c(e)),s.once("error",e=>c(e)),s.once("close",()=>c()),o.pipe(s)}(e,t,511&a.mode,r);if(s[e])return r(null);s[e]=!0;const c=function(){p(e,(n,o)=>{_(o,(n,r)=>{f(i.join(e,n),i.join(t,n),e=>r(e,[]),s)},r)})};g(t,511&a.mode).then(c,c)})}function g(e,t,o){const s=()=>r.nfcall(n.mkdir,e,t).then(void 0,t=>"ENOENT"===t.code?Promise.reject(t):r.nfcall(n.stat,e).then(t=>t.isDirectory()?null:Promise.reject(new Error(`'${e}' exists and is not a directory.`)),e=>Promise.reject(t)));return e===i.dirname(e)?Promise.resolve(!0):s().then(void 0,n=>o&&o.isCancellationRequested?Promise.resolve(!1):"ENOENT"===n.code?g(i.dirname(e),t).then(s):Promise.reject(n))}
function m(e,t){if("\\"===e||"/"===e)return t(new Error("Will not delete root!"));n.exists(e,r=>{r?n.lstat(e,(r,o)=>{if(r||!o)t(r);else if(!o.isDirectory()||o.isSymbolicLink()){const i=o.mode;128&i?n.unlink(e,t):n.chmod(e,128|i,i=>{i?t(i):n.unlink(e,t)})}else p(e,(r,o)=>{if(r||!o)t(r);else if(0===o.length)n.rmdir(e,t);else{let r=null,s=o.length;o.forEach(o=>{m(i.join(e,o),i=>{s--,i&&(r=r||i),0===s&&(r?t(r):n.rmdir(e,t))})})}})}):t(null)})}function v(e){try{const t=n.lstatSync(e);t.isDirectory()&&!t.isSymbolicLink()?(h(e).forEach(t=>v(i.join(e,t))),n.rmdirSync(e)):n.unlinkSync(e)}catch(e){if("ENOENT"===e.code)return;throw e}}function w(e,t,i,r){i=y(i),"string"==typeof t||Buffer.isBuffer(t)?function(e,t,i,r){i.encoding&&(t=l.encode(t,i.encoding.charset,{addBOM:i.encoding.addBOM}));if(!C)return n.writeFile(e,t,{mode:i.mode,flag:i.flag},r);n.open(e,"string"==typeof i.flag?i.flag:"r",i.mode,(e,i)=>{if(e)return r(e);n.writeFile(i,t,e=>{if(e)return n.close(i,()=>r(e))
;n.fdatasync(i,e=>(e&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",e),C=!1),n.close(i,e=>r(e))))})})}(e,t,i,r):function(e,t,i,r){let o=!1;const s=e=>{o||(o=!0,e?u?(a.once("close",()=>r(e)),a.destroy()):r(e):r())},a=n.createWriteStream(e,{mode:i.mode,flags:i.flag,autoClose:!1});let c,u;a.once("open",e=>{c=e,u=!0,i.encoding&&(t=t.pipe(l.encodeStream(i.encoding.charset,{addBOM:i.encoding.addBOM}))),t.pipe(a)}),t.once("error",e=>s(e)),a.once("error",e=>s(e)),a.once("finish",()=>{C&&u?n.fdatasync(c,e=>{e&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",e),C=!1),a.destroy()}):a.destroy()}),a.once("close",()=>s())}(e,t,i,r)}function y(e){if(!e)return{mode:438,flag:"w"};const t={mode:e.mode,flag:e.flag,encoding:e.encoding};return"number"!=typeof t.mode&&(t.mode=438),"string"!=typeof t.flag&&(t.flag="w"),t}function S(e){const t=i.dirname(e);if(e===t)return e;const n=(i.basename(e)||e).toLowerCase();try{
const e=h(t).filter(e=>e.toLowerCase()===n);if(1===e.length){const n=S(t);if(n)return i.join(n,e[0])}else if(e.length>1){const r=e.indexOf(n);if(r>=0){const n=S(t);if(n)return i.join(n,e[r])}}}catch(e){}return null}function b(e){return a.rtrim(i.normalize(e),i.sep)}Object.defineProperty(t,"__esModule",{value:!0});const _=u.loop;t.readdirSync=h,t.readdir=p,t.statLink=function(e,t){n.lstat(e,(i,r)=>{i||r.isSymbolicLink()?n.stat(e,(e,n)=>{if(e)return t(e,null);t(null,{stat:n,isSymbolicLink:r&&r.isSymbolicLink()})}):t(null,{stat:r,isSymbolicLink:!1})})},t.copy=f,t.mkdirp=g,t.del=function(e,t,r,o){n.exists(e,s=>{if(!s)return r(null);n.stat(e,(s,l)=>{if(s||!l)return r(s);if("."===e[e.length-1]||a.endsWith(e,"./")||a.endsWith(e,".\\"))return m(e,r);const u=i.join(t,c.generateUuid());n.rename(e,u,t=>{if(t)return m(e,r);r(null),m(u,e=>{e&&console.error(e),o&&o(e)})})})})},t.delSync=v,t.mv=function(e,t,i){function r(e){if(e)return i(e);n.stat(t,(e,r)=>e?i(e):r.isDirectory()?i(null):void n.open(t,"a",null,(e,t)=>{
if(e)return i(e);n.futimes(t,r.atime,new Date,e=>{if(e)return i(e);n.close(t,i)})}))}if(e===t)return i(null);n.rename(e,t,n=>n?n&&e.toLowerCase()!==t.toLowerCase()&&"EXDEV"===n.code||a.endsWith(e,".")?f(e,t,t=>{if(t)return i(t);m(e,r)}):i(n):r(null))};let C=!0;t.writeFileAndFlush=w,t.writeFileAndFlushSync=function(e,t,i){if((i=y(i)).encoding&&(t=l.encode(t,i.encoding.charset,{addBOM:i.encoding.addBOM})),!C)return n.writeFileSync(e,t,{mode:i.mode,flag:i.flag});const r=n.openSync(e,"string"==typeof i.flag?i.flag:"r",i.mode);try{n.writeFileSync(r,t);try{n.fdatasyncSync(r)}catch(e){console.warn("[node.js fs] fdatasyncSync is now disabled for this session because it failed: ",e),C=!1}}finally{n.closeSync(r)}},t.realcaseSync=S,t.realpathSync=function(e){try{return n.realpathSync(e)}catch(t){const i=b(e);return n.accessSync(i,n.constants.R_OK),i}},t.realpath=function(e,t){return n.realpath(e,(i,r)=>{if(!i)return t(null,r);const o=b(e);return n.access(o,n.constants.R_OK,e=>t(e,o))})},t.watch=function(e,t,i){try{
const r=n.watch(e);return r.on("change",(e,n)=>{let i;n&&(i=n.toString(),s.isMacintosh&&(i=o.normalizeNFC(i))),t(e,i)}),r.on("error",(t,n)=>i(`Failed to watch ${e} for changes (${t}, ${n})`)),d.toDisposable(()=>{r.removeAllListeners(),r.close()})}catch(t){n.exists(e,n=>{n&&i(`Failed to watch ${e} for changes (${t.toString()})`)})}return d.Disposable.None},t.sanitizeFilePath=function(e,t){return s.isWindows&&a.endsWith(e,":")&&(e+=i.sep),i.isAbsolute(e)||(e=i.join(t,e)),e=i.normalize(e),s.isWindows?(e=a.rtrim(e,i.sep),a.endsWith(e,":")&&(e+=i.sep)):(e=a.rtrim(e,i.sep))||(e=i.sep),e}}),define(t[112],n([1,0,16,4,15,6,2,36,34,3]),function(e,t,n,i,r,o,s,a,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class u{constructor(e,t={defaultConfig:Object.create(null),onError:e=>console.error(e)}){this._path=e,this.options=t,this.disposables=[],this.configName=i.basename(this._path),this._onDidUpdateConfiguration=new s.Emitter,this.disposables.push(this._onDidUpdateConfiguration),this.registerWatcher(),
this.initAsync()}get path(){return this._path}get hasParseErrors(){return this.parseErrors&&this.parseErrors.length>0}get onDidUpdateConfiguration(){return this._onDidUpdateConfiguration.event}initAsync(){this.loadAsync(e=>{this.loaded||this.updateCache(e),this.options.initCallback&&this.options.initCallback(this.getConfig())})}updateCache(e){this.cache=e,this.loaded=!0}loadSync(){try{return this.parse(n.readFileSync(this._path).toString())}catch(e){return this.options.defaultConfig}}loadAsync(e){n.readFile(this._path,(t,n)=>e(t?this.options.defaultConfig:this.parse(n.toString())))}parse(e){let t;try{return this.parseErrors=[],(t=this.options.parse?this.options.parse(e,this.parseErrors):a.parse(e,this.parseErrors))||this.options.defaultConfig}catch(e){return this.options.defaultConfig}}registerWatcher(){const e=i.dirname(this._path);this.watch(e,!0),n.lstat(this._path,(e,t)=>{e||t.isDirectory()||t.isSymbolicLink()&&n.readlink(this._path,(e,t)=>{e||this.watch(t,!1)})})}watch(e,t){
this.disposed||this.disposables.push(c.watch(e,(e,n)=>this.onConfigFileChange(e,n,t),e=>this.options.onError(e)))}onConfigFileChange(e,t,n){n&&(l.isWindows&&t&&t!==this.configName&&(t=i.basename(t)),t!==this.configName)||(this.timeoutHandle&&(global.clearTimeout(this.timeoutHandle),this.timeoutHandle=null),this.timeoutHandle=global.setTimeout(()=>this.reload(),this.options.changeBufferDelay||0))}reload(e){this.loadAsync(t=>{if(r.equals(t,this.cache)||(this.updateCache(t),this._onDidUpdateConfiguration.fire({config:this.cache})),e)return e(t)})}getConfig(){return this.ensureLoaded(),this.cache}ensureLoaded(){this.loaded||this.updateCache(this.loadSync())}dispose(){this.disposed=!0,this.disposables=o.dispose(this.disposables)}}t.ConfigWatcher=u}),define(t[24],n([1,0,34,4,12,16,23,3,2]),function(e,t,n,i,r,o,s,a,c){"use strict";function l(e){return r.nfcall(n.readdir,e)}function u(e){
return h(e).then(t=>t.isDirectory()&&!t.isSymbolicLink()?l(e).then(t=>Promise.all(t.map(t=>u(i.join(e,t))))).then(()=>p(e)):f(e),e=>{if("ENOENT"!==e.code)return Promise.reject(e)})}function d(e){return r.nfcall(o.stat,e)}function h(e){return r.nfcall(o.lstat,e)}function p(e){return r.nfcall(o.rmdir,e)}function f(e){return r.nfcall(o.unlink,e)}function g(e,t,i){return function(e){let t=w[e];if(!t){t=new r.Queue,w[e]=t;c.Event.once(t.onFinished)(()=>{delete w[e],t.dispose()})}return t}(function(e){let t=e;(a.isWindows||a.isMacintosh)&&(t=t.toLowerCase());return t}(e)).queue(()=>r.nfcall(n.writeFileAndFlush,e,t,i))}function m(e){return d(e).then(e=>e.isDirectory(),()=>!1)}function v(e,t=(y||(y=s.tmpdir()),y)){return r.nfcall(n.del,e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.readdir=l,t.exists=function(e){return new Promise(t=>o.exists(e,t))},t.chmod=function(e,t){return r.nfcall(o.chmod,e,t)},t.mkdirp=n.mkdirp,t.rimraf=u,t.realpath=function(e){return r.nfcall(n.realpath,e)},t.stat=d,
t.statLink=function(e){return r.nfcall(n.statLink,e)},t.lstat=h,t.rename=function(e,t){return r.nfcall(o.rename,e,t)},t.renameIgnoreError=function(e,t){return new Promise(n=>{o.rename(e,t,()=>n())})},t.rmdir=p,t.unlink=f,t.symlink=function(e,t,n){return r.nfcall(o.symlink,e,t,n)},t.readlink=function(e){return r.nfcall(o.readlink,e)},t.truncate=function(e,t){return r.nfcall(o.truncate,e,t)},t.readFile=function(e,t){return r.nfcall(o.readFile,e,t)};const w=Object.create(null);t.writeFile=g,t.readDirsInDir=function(e){return l(e).then(t=>Promise.all(t.map(t=>m(i.join(e,t)))).then(e=>t.filter((t,n)=>e[n])))},t.dirExists=m,t.fileExists=function(e){return d(e).then(e=>e.isFile(),()=>!1)};let y=null;t.del=v,t.whenDeleted=function(e){return new Promise(t=>{let n=!1;const i=setInterval(()=>{n||(n=!0,o.exists(e,e=>{n=!1,e||(clearInterval(i),t(void 0))}))},1e3)})},t.copy=function(e,t){return r.nfcall(n.copy,e,t)}}),define(t[118],n([1,0,6,2,12,18,26,4,24,21]),function(e,t,n,i,r,o,s,a,c,l){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0});var u;!function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST"}(u=t.StorageHint||(t.StorageHint={}));var d;!function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"}(d||(d={}));class h extends n.Disposable{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new i.Emitter),this.state=d.None,this.cache=new Map,this.pendingDeletes=new Set,this.pendingInserts=new Map,this.flushDelayer=this._register(new r.ThrottledDelayer(h.DEFAULT_FLUSH_DELAY)),this.registerListeners()}get onDidChangeStorage(){return this._onDidChangeStorage.event}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){e.items.forEach((e,t)=>this.accept(t,e))}accept(e,t){if(this.state===d.Closed)return;let n=!1;if(o.isUndefinedOrNull(t))n=this.cache.delete(e);else{this.cache.get(e)!==t&&(this.cache.set(e,t),
n=!0)}n&&this._onDidChangeStorage.fire(e)}get items(){return this.cache}get size(){return this.cache.size}init(){return this.state!==d.None?Promise.resolve():(this.state=d.Initialized,this.options.hint===u.STORAGE_DOES_NOT_EXIST?Promise.resolve():this.database.getItems().then(e=>{this.cache=e}))}get(e,t){const n=this.cache.get(e);return o.isUndefinedOrNull(n)?t:n}getBoolean(e,t){const n=this.get(e);return o.isUndefinedOrNull(n)?t:"true"===n}getInteger(e,t){const n=this.get(e);return o.isUndefinedOrNull(n)?t:parseInt(n,10)}set(e,t){if(this.state===d.Closed)return Promise.resolve();if(o.isUndefinedOrNull(t))return this.delete(e);const n=String(t);return this.cache.get(e)===n?Promise.resolve():(this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending()))}delete(e){if(this.state===d.Closed)return Promise.resolve();return this.cache.delete(e)?(this.pendingDeletes.has(e)||this.pendingDeletes.add(e),
this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())):Promise.resolve()}close(){if(this.state===d.Closed)return Promise.resolve();this.state=d.Closed;const e=()=>this.database.close(()=>this.cache);return this.flushDelayer.trigger(()=>this.flushPending(),0).then(e,e)}flushPending(){if(0===this.pendingInserts.size&&0===this.pendingDeletes.size)return Promise.resolve();const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e)}checkIntegrity(e){return this.database.checkIntegrity(e)}}h.DEFAULT_FLUSH_DELAY=100,t.Storage=h;class p{constructor(e,t=Object.create(null)){this.path=e,this.name=a.basename(e),this.logger=new f(t.logging),this.whenConnected=this.connect(e)}get onDidChangeItemsExternal(){return i.Event.None}getItems(){return this.whenConnected.then(e=>{const t=new Map
;return this.all(e,"SELECT * FROM ItemTable").then(e=>(e.forEach(e=>t.set(e.key,e.value)),this.logger.isTracing&&this.logger.trace(`[storage ${this.name}] getItems(): ${s.mapToString(t)}`),t))})}updateItems(e){return this.whenConnected.then(t=>this.doUpdateItems(t,e))}doUpdateItems(e,t){let n=0;return t.insert&&(n+=t.insert.size),t.delete&&(n+=t.delete.size),0===n?Promise.resolve():(this.logger.isTracing&&this.logger.trace(`[storage ${this.name}] updateItems(): insert(${t.insert?s.mapToString(t.insert):"0"}), delete(${t.delete?s.setToString(t.delete):"0"})`),this.transaction(e,()=>{if(t.insert&&t.insert.size>0){const n=[];n.push([]);let i=0;t.insert.forEach((e,t)=>{let r=n[i];r.length>p.MAX_HOST_PARAMETERS&&(i++,r=[],n.push(r)),r.push(t,e)}),n.forEach(n=>{this.prepare(e,`INSERT INTO ItemTable VALUES ${l.fill(n.length/2,"(?,?)").join(",")}`,e=>e.run(n),()=>{const e=[];let n=0;return t.insert.forEach((t,i)=>{e.push(i),n+=t.length}),`Keys: ${e.join(", ")} Length: ${n}`})})}if(t.delete&&t.delete.size){const n=[]
;n.push([]);let i=0;t.delete.forEach(e=>{let t=n[i];t.length>p.MAX_HOST_PARAMETERS&&(i++,t=[],n.push(t)),t.push(e)}),n.forEach(n=>{this.prepare(e,`DELETE FROM ItemTable WHERE key IN (${l.fill(n.length,"?").join(",")})`,e=>e.run(n),()=>{const e=[];return t.delete.forEach(t=>{e.push(t)}),`Keys: ${e.join(", ")}`})})}}))}close(e){return this.logger.trace(`[storage ${this.name}] close()`),this.whenConnected.then(t=>this.doClose(t,e))}doClose(e,t){return new Promise((n,i)=>{e.db.close(r=>(r&&this.handleSQLiteError(e,r,`[storage ${this.name}] close(): ${r}`),this.path===p.IN_MEMORY_PATH?n():e.isErroneous||e.isInMemory?"function"==typeof t?c.unlink(this.path).then(()=>this.doConnect(this.path).then(e=>{const n=()=>this.doClose(e,void 0);return this.doUpdateItems(e,{insert:t()}).then(()=>n(),e=>(n(),Promise.reject(e)))})).then(n,i):i(r||new Error("Database has errors or is in-memory without recovery option")):this.backup().then(n,e=>(this.logger.error(`[storage ${this.name}] backup(): ${e}`),n()))))})}backup(){
const e=this.toBackupPath(this.path);return c.copy(this.path,e)}toBackupPath(e){return`${e}.backup`}checkIntegrity(e){return this.logger.trace(`[storage ${this.name}] checkIntegrity(full: ${e})`),this.whenConnected.then(t=>this.get(t,e?"PRAGMA integrity_check":"PRAGMA quick_check").then(n=>{const i=e?n.integrity_check:n.quick_check;return t.isErroneous?`${i} (last error: ${t.lastError})`:t.isInMemory?`${i} (in-memory!)`:i}))}connect(e,t=!0){return this.logger.trace(`[storage ${this.name}] open(${e}, retryOnBusy: ${t})`),this.doConnect(e).then(void 0,n=>(this.logger.error(`[storage ${this.name}] open(): Unable to open DB due to ${n}`),"SQLITE_BUSY"===n.code&&t?r.timeout(p.BUSY_OPEN_TIMEOUT).then(()=>this.connect(e,!1)):c.unlink(e).then(()=>c.renameIgnoreError(this.toBackupPath(e),e)).then(()=>this.doConnect(e)).then(void 0,e=>(this.logger.error(`[storage ${this.name}] open(): Unable to use backup due to ${e}`),this.doConnect(p.IN_MEMORY_PATH)))))}handleSQLiteError(e,t,n){e.isErroneous=!0,e.lastError=n,
this.logger.error(n)}doConnect(t){return new Promise((n,i)=>{new Promise((t,n)=>{e(["vscode-sqlite3"],t,n)}).then(e=>{const r={db:new(this.logger.isTracing?e.verbose().Database:e.Database)(t,e=>e?r.db?r.db.close(()=>i(e)):i(e):this.exec(r,["PRAGMA user_version = 1;","CREATE TABLE IF NOT EXISTS ItemTable (key TEXT UNIQUE ON CONFLICT REPLACE, value BLOB)"].join("")).then(()=>n(r),e=>r.db.close(()=>i(e)))),isInMemory:t===p.IN_MEMORY_PATH};r.db.on("error",e=>this.handleSQLiteError(r,e,`[storage ${this.name}] Error (event): ${e}`)),this.logger.isTracing&&r.db.on("trace",e=>this.logger.trace(`[storage ${this.name}] Trace (event): ${e}`))},i)})}exec(e,t){return new Promise((n,i)=>{e.db.exec(t,t=>t?(this.handleSQLiteError(e,t,`[storage ${this.name}] exec(): ${t}`),i(t)):n())})}get(e,t){return new Promise((n,i)=>{e.db.get(t,(t,r)=>t?(this.handleSQLiteError(e,t,`[storage ${this.name}] get(): ${t}`),i(t)):n(r))})}all(e,t){return new Promise((n,i)=>{
e.db.all(t,(t,r)=>t?(this.handleSQLiteError(e,t,`[storage ${this.name}] all(): ${t}`),i(t)):n(r))})}transaction(e,t){return new Promise((n,i)=>{e.db.serialize(()=>{e.db.run("BEGIN TRANSACTION"),t(),e.db.run("END TRANSACTION",t=>t?(this.handleSQLiteError(e,t,`[storage ${this.name}] transaction(): ${t}`),i(t)):n())})})}prepare(e,t,n,i){const r=e.db.prepare(t),o=n=>{this.handleSQLiteError(e,n,`[storage ${this.name}] prepare(): ${n} (${t}). Details: ${i()}`)};r.on("error",o),n(r),r.finalize(e=>{e&&o(e),r.removeListener("error",o)})}}p.IN_MEMORY_PATH=":memory:",p.BUSY_OPEN_TIMEOUT=2e3,p.MAX_HOST_PARAMETERS=256,t.SQLiteStorageDatabase=p;class f{constructor(e){e&&"function"==typeof e.logTrace&&(this.logTrace=e.logTrace),e&&"function"==typeof e.logError&&(this.logError=e.logError)}get isTracing(){return!!this.logTrace}trace(e){this.logTrace&&this.logTrace(e)}error(e){this.logError&&this.logError(e)}}class g{constructor(){this.onDidChangeItemsExternal=i.Event.None,this.items=new Map}getItems(){
return Promise.resolve(this.items)}updateItems(e){return e.insert&&e.insert.forEach((e,t)=>this.items.set(t,e)),e.delete&&e.delete.forEach(e=>this.items.delete(e)),Promise.resolve()}close(){return Promise.resolve()}checkIntegrity(e){return Promise.resolve("ok")}}t.InMemoryStorageDatabase=g}),define(t[120],n([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTEXT_MENU_CHANNEL="vscode:contextmenu",t.CONTEXT_MENU_CLOSE_CHANNEL="vscode:onCloseContextMenu"}),define(t[122],n([1,0,10,120]),function(e,t,n,i){"use strict";function r(e,t,i){const o=new n.Menu;return i.forEach(i=>{let s;s="separator"===i.type?new n.MenuItem({type:i.type}):Array.isArray(i.submenu)?new n.MenuItem({submenu:r(e,t,i.submenu),label:i.label}):new n.MenuItem({label:i.label,type:i.type,accelerator:i.accelerator,checked:i.checked,enabled:i.enabled,visible:i.visible,click:(n,r,o)=>e.sender.send(t,i.id,o)}),o.append(s)}),o}Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextMenuListener=function(){
n.ipcMain.on(i.CONTEXT_MENU_CHANNEL,(e,t,o,s,a)=>{r(e,s,o).popup({window:n.BrowserWindow.fromWebContents(e.sender),x:a?a.x:void 0,y:a?a.y:void 0,positioningItem:a?a.positioningItem:void 0,callback:()=>{e.sender.send(i.CONTEXT_MENU_CLOSE_CHANNEL,t)}})})}}),define(t[48],n([1,0,6,2,12,35,19]),function(e,t,n,r,o,s,a){"use strict";function c(e){const t=Buffer.allocUnsafe(4);return t.writeUInt32BE(e,0),t}function l(e){return e.read(4).readUInt32BE(0)}function u(e,t){if(void 0===t)e.write(v.Undefined);else if("string"==typeof t){const n=Buffer.from(t);e.write(v.String),e.write(c(n.length)),e.write(n)}else if(Buffer.isBuffer(t))e.write(v.Buffer),e.write(c(t.length)),e.write(t);else if(Array.isArray(t)){e.write(v.Array),e.write(c(t.length));for(const n of t)u(e,n)}else{const n=Buffer.from(JSON.stringify(t));e.write(v.Object),e.write(c(n.length)),e.write(n)}}function d(e){switch(e.read(1).readUInt8(0)){case m.Undefined:return;case m.String:return e.read(l(e)).toString();case m.Buffer:return e.read(l(e));case m.Array:{
const t=l(e),n=[];for(let i=0;i<t;i++)n.push(d(e));return n}case m.Object:return JSON.parse(e.read(l(e)).toString())}}function h(e){return{call:(t,n,i)=>e.then(e=>e.call(t,n,i)),listen(t,n){const i=new r.Relay;return e.then(e=>i.input=e.listen(t,n)),i.event}}}Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Promise=100]="Promise",e[e.PromiseCancel=101]="PromiseCancel",e[e.EventListen=102]="EventListen",e[e.EventDispose=103]="EventDispose"}(t.RequestType||(t.RequestType={}));!function(e){e[e.Initialize=200]="Initialize",e[e.PromiseSuccess=201]="PromiseSuccess",e[e.PromiseError=202]="PromiseError",e[e.PromiseErrorObj=203]="PromiseErrorObj",e[e.EventFire=204]="EventFire"}(t.ResponseType||(t.ResponseType={}));var p;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Idle=1]="Idle"}(p||(p={}));class f{constructor(e){this.buffer=e,this.pos=0}read(e){const t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=t.length,t}}class g{constructor(){this.buffers=[]}get buffer(){
return Buffer.concat(this.buffers)}write(e){this.buffers.push(e)}}var m;!function(e){e[e.Undefined=0]="Undefined",e[e.String=1]="String",e[e.Buffer=2]="Buffer",e[e.Array=3]="Array",e[e.Object=4]="Object"}(m||(m={}));const v={Undefined:Buffer.alloc(1,m.Undefined),String:Buffer.alloc(1,m.String),Buffer:Buffer.alloc(1,m.Buffer),Array:Buffer.alloc(1,m.Array),Object:Buffer.alloc(1,m.Object)};class w{constructor(e,t){this.protocol=e,this.ctx=t,this.channels=new Map,this.activeRequests=new Map,this.protocolListener=this.protocol.onMessage(e=>this.onRawMessage(e)),this.sendResponse({type:200})}registerChannel(e,t){this.channels.set(e,t)}sendResponse(e){switch(e.type){case 200:return this.send([e.type]);case 201:case 202:case 204:case 203:return this.send([e.type,e.id],e.data)}}send(e,t){const n=new g;u(n,e),u(n,t),this.sendBuffer(n.buffer)}sendBuffer(e){try{this.protocol.send(e)}catch(e){}}onRawMessage(e){const t=new f(e),n=d(t),i=d(t),r=n[0];switch(r){case 100:return this.onPromise({type:r,id:n[1],channelName:n[2],
name:n[3],arg:i});case 102:return this.onEventListen({type:r,id:n[1],channelName:n[2],name:n[3],arg:i});case 101:case 103:return this.disposeActiveRequest({type:r,id:n[1]})}}onPromise(e){const t=this.channels.get(e.channelName);if(!t)throw new Error("Unknown channel");const i=new s.CancellationTokenSource;let r;try{r=t.call(this.ctx,e.name,e.arg,i.token)}catch(e){r=Promise.reject(e)}const o=e.id;r.then(t=>{this.sendResponse({id:o,data:t,type:201}),this.activeRequests.delete(e.id)},t=>{t instanceof Error?this.sendResponse({id:o,data:{message:t.message,name:t.name,stack:t.stack?t.stack.split?t.stack.split("\n"):t.stack:void 0},type:202}):this.sendResponse({id:o,data:t,type:203}),this.activeRequests.delete(e.id)});const a=n.toDisposable(()=>i.cancel());this.activeRequests.set(e.id,a)}onEventListen(e){const t=this.channels.get(e.channelName);if(!t)throw new Error("Unknown channel");const n=e.id,i=t.listen(this.ctx,e.name,e.arg)(e=>this.sendResponse({id:n,data:e,type:204}));this.activeRequests.set(e.id,i)}
disposeActiveRequest(e){const t=this.activeRequests.get(e.id);t&&(t.dispose(),this.activeRequests.delete(e.id))}dispose(){this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),this.activeRequests.forEach(e=>e.dispose()),this.activeRequests.clear()}}t.ChannelServer=w;class y{constructor(e){this.protocol=e,this.state=p.Uninitialized,this.activeRequests=new Set,this.handlers=new Map,this.lastRequestId=0,this._onDidInitialize=new r.Emitter,this.onDidInitialize=this._onDidInitialize.event,this.protocolListener=this.protocol.onMessage(e=>this.onBuffer(e))}getChannel(e){const t=this;return{call:(n,i,r)=>t.requestPromise(e,n,i,r),listen:(n,i)=>t.requestEvent(e,n,i)}}requestPromise(e,t,i,r=s.CancellationToken.None){const c=this.lastRequestId++,l={id:c,type:100,channelName:e,name:t,arg:i};if(r.isCancellationRequested)return Promise.reject(a.canceled());let u;return new Promise((e,t)=>{if(r.isCancellationRequested)return t(a.canceled())
;let i=o.createCancelablePromise(e=>this.whenInitialized());i.then(()=>{i=null;this.handlers.set(c,n=>{switch(n.type){case 201:this.handlers.delete(c),e(n.data);break;case 202:this.handlers.delete(c);const i=new Error(n.data.message);i.stack=n.data.stack,i.name=n.data.name,t(i);break;case 203:this.handlers.delete(c),t(n.data)}}),this.sendRequest(l)});const s=()=>{i?(i.cancel(),i=null):this.sendRequest({id:c,type:101}),t(a.canceled())},d=r.onCancellationRequested(s);u=n.combinedDisposable([n.toDisposable(s),d]),this.activeRequests.add(u)}).finally(()=>this.activeRequests.delete(u))}requestEvent(e,t,n){const i=this.lastRequestId++,s={id:i,type:102,channelName:e,name:t,arg:n};let a=null;const c=new r.Emitter({onFirstListenerAdd:()=>{(a=o.createCancelablePromise(e=>this.whenInitialized())).then(()=>{a=null,this.activeRequests.add(c),this.sendRequest(s)})},onLastListenerRemove:()=>{a?(a.cancel(),a=null):(this.activeRequests.delete(c),this.sendRequest({id:i,type:103}))}})
;return this.handlers.set(i,e=>c.fire(e.data)),c.event}sendRequest(e){switch(e.type){case 100:case 102:return this.send([e.type,e.id,e.channelName,e.name],e.arg);case 101:case 103:return this.send([e.type,e.id])}}send(e,t){const n=new g;u(n,e),u(n,t),this.sendBuffer(n.buffer)}sendBuffer(e){try{this.protocol.send(e)}catch(e){}}onBuffer(e){const t=new f(e),n=d(t),i=d(t);switch(n[0]){case 200:return this.onResponse({type:n[0]});case 201:case 202:case 204:case 203:return this.onResponse({type:n[0],id:n[1],data:i})}}onResponse(e){if(200===e.type)return this.state=p.Idle,void this._onDidInitialize.fire();const t=this.handlers.get(e.id);t&&t(e)}whenInitialized(){return this.state===p.Idle?Promise.resolve():r.Event.toPromise(this.onDidInitialize)}dispose(){this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),this.activeRequests.forEach(e=>e.dispose()),this.activeRequests.clear()}}t.ChannelClient=y;class S{constructor(e){this.channels=new Map,this._connections=new Set,
this._onDidChangeConnections=new r.Emitter,this.onDidChangeConnections=this._onDidChangeConnections.event,e(({protocol:e,onDidClientDisconnect:t})=>{r.Event.once(e.onMessage)(n=>{const i=d(new f(n)),r=new w(e,i),o=new y(e);this.channels.forEach((e,t)=>r.registerChannel(t,e));const s={channelClient:o,ctx:i};this._connections.add(s),this._onDidChangeConnections.fire(s),t(()=>{r.dispose(),o.dispose(),this._connections.delete(s)})})})}get connections(){const e=[];return this._connections.forEach(t=>e.push(t)),e}getChannel(e,t){const n=this;return{call:(i,r,o)=>h(t.routeCall(n,i,r).then(t=>t.channelClient.getChannel(e))).call(i,r,o),listen:(i,r)=>h(t.routeEvent(n,i,r).then(t=>t.channelClient.getChannel(e))).listen(i,r)}}registerChannel(e,t){this.channels.set(e,t)}dispose(){this.channels.clear(),this._connections.clear(),this._onDidChangeConnections.dispose()}}t.IPCServer=S;class b{constructor(e,t){const n=new g;u(n,t),e.send(n.buffer),this.channelClient=new y(e),this.channelServer=new w(e,t)}getChannel(e){
return this.channelClient.getChannel(e)}registerChannel(e,t){this.channelServer.registerChannel(e,t)}dispose(){this.channelClient.dispose(),this.channelServer.dispose()}}t.IPCClient=b,t.getDelayedChannel=h,t.getNextTickChannel=function(e){let t=!1;return{call:(n,i,r)=>t?e.call(n,i,r):o.timeout(0).then(()=>t=!0).then(()=>e.call(n,i,r)),listen(n,i){if(t)return e.listen(n,i);const s=new r.Relay;return o.timeout(0).then(()=>t=!0).then(()=>s.input=e.listen(n,i)),s.event}}};class _{constructor(e){this.fn=e}routeCall(e){return this.route(e)}routeEvent(e){return this.route(e)}route(e){return i(this,void 0,void 0,function*(){for(const t of e.connections)if(yield Promise.resolve(this.fn(t.ctx)))return Promise.resolve(t);return yield r.Event.toPromise(e.onDidChangeConnections),yield this.route(e)})}}t.StaticRouter=_}),define(t[127],n([1,0,6,2]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t){this.sender=e,this._onMessage=new i.Emitter,
t(e=>this._onMessage.fire(Buffer.from(e,"base64")))}get onMessage(){return this._onMessage.event}send(e){try{this.sender.send("ipc:message",e.toString("base64"))}catch(e){}}dispose(){this.sender.send("ipc:disconnect",null),this.listener=n.dispose(this.listener)}}t.Protocol=r}),define(t[128],n([1,0,2,48,127,10,6]),function(e,t,n,i,r,o,s){"use strict";function a(e,t){const i=n.Event.fromNodeEventEmitter(o.ipcMain,t,(e,t)=>({event:e,message:t})),r=n.Event.filter(i,({event:t})=>t.sender.id===e);return n.Event.map(r,({message:e})=>e)}Object.defineProperty(t,"__esModule",{value:!0});class c extends i.IPCServer{constructor(){super(c.getOnDidClientConnect())}static getOnDidClientConnect(){const e=n.Event.fromNodeEventEmitter(o.ipcMain,"ipc:hello",({sender:e})=>e);return n.Event.map(e,e=>{const t=e.id,i=c.Clients.get(t);i&&i.dispose();const o=new n.Emitter;c.Clients.set(t,s.toDisposable(()=>o.fire()));const l=a(t,"ipc:message"),u=n.Event.any(n.Event.signal(a(t,"ipc:disconnect")),o.event);return{
protocol:new r.Protocol(e,l),onDidClientDisconnect:u}})}}c.Clients=new Map,t.Server=c}),define(t[51],n([1,0,187,2,48,4,23,29,12]),function(e,t,n,i,r,o,s,a,c){"use strict";function l(e){let t,n=!1,r=!1,o=[];const s=()=>{if(!r){for(r=!0;n&&o.length>0;)t.fire(o.shift());r=!1}};return e(e=>{o.push(e),s()}),(t=new i.Emitter({onFirstListenerAdd:()=>{n=!0,process.nextTick(s)},onLastListenerRemove:()=>{n=!1}})).event}Object.defineProperty(t,"__esModule",{value:!0}),t.generateRandomPipeName=function(){const e=a.generateUuid();return"win32"===process.platform?`\\\\.\\pipe\\vscode-ipc-${e}-sock`:o.join(s.tmpdir(),`vscode-ipc-${e}.sock`)};class u{constructor(e,t){this._socket=e,this._onMessage=new i.Emitter,this.onMessage=this._onMessage.event,this._onClose=new i.Emitter,this.onClose=this._onClose.event,this._writeBuffer=new class{constructor(){this._data=[],this._totalLength=0}add(e,t){const n=0===this._totalLength;return this._data.push(e,t),this._totalLength+=e.length+t.length,n}take(){
const e=Buffer.concat(this._data,this._totalLength);return this._data.length=0,this._totalLength=0,e}},this._isDisposed=!1,this._chunks=[];let n=0;const r={readHead:!0,bodyLen:-1},o=e=>{for(this._chunks.push(e),n+=e.length;n>0;){if(r.readHead){if(!(n>=u._headerLen))break;{const e=Buffer.concat(this._chunks);r.bodyLen=e.readUInt32BE(0),r.readHead=!1;const t=e.slice(u._headerLen);n=t.length,this._chunks=[t]}}if(!r.readHead){if(!(n>=r.bodyLen))break;{const e=Buffer.concat(this._chunks),t=e.slice(0,r.bodyLen),i=e.slice(r.bodyLen);if(n=i.length,this._chunks=[i],r.bodyLen=-1,r.readHead=!0,this._onMessage.fire(t),this._isDisposed)break}}}},s=()=>{if(t&&t.length>0){let e=t;t=void 0,o(e)}};this._firstChunkTimer=new c.TimeoutTimer,this._firstChunkTimer.setIfNotSet(()=>{s()},0),this._socketDataListener=(e=>{s(),o(e)}),e.on("data",this._socketDataListener),this._socketEndListener=(()=>{s()}),e.on("end",this._socketEndListener),this._socketCloseListener=(()=>{this._onClose.fire()}),
e.once("close",this._socketCloseListener)}dispose(){this._isDisposed=!0,this._firstChunkTimer.dispose(),this._socket.removeListener("data",this._socketDataListener),this._socket.removeListener("end",this._socketEndListener),this._socket.removeListener("close",this._socketCloseListener)}end(){this._socket.end()}getBuffer(){return Buffer.concat(this._chunks)}send(e){const t=Buffer.allocUnsafe(u._headerLen);t.writeUInt32BE(e.length,0,!0),this._writeSoon(t,e)}_writeSoon(e,t){this._writeBuffer.add(e,t)&&setImmediate(()=>{this._socket.destroyed||this._socket.write(this._writeBuffer.take())})}}u._headerLen=4,t.Protocol=u;class d extends r.IPCServer{static toClientConnectionEvent(e){const t=i.Event.fromNodeEventEmitter(e,"connection");return i.Event.map(t,e=>({protocol:new u(e),onDidClientDisconnect:i.Event.once(i.Event.fromNodeEventEmitter(e,"close"))}))}constructor(e){super(d.toClientConnectionEvent(e)),this.server=e}dispose(){super.dispose(),this.server&&(this.server.close(),this.server=null)}}t.Server=d
;class h extends r.IPCClient{constructor(e,t){super(e,t),this.protocol=e}static fromSocket(e,t){return new h(new u(e),t)}get onClose(){return this.protocol.onClose}dispose(){super.dispose(),this.protocol.end()}}t.Client=h,t.serve=function(e){return new Promise((t,i)=>{const r=n.createServer();r.on("error",i),r.listen(e,()=>{r.removeListener("error",i),t(new d(r))})})},t.connect=function(e,t){return new Promise((i,r)=>{const o=n.createConnection(e,()=>{o.removeListener("error",r),i(h.fromSocket(o,t))});o.once("error",r)})};class p{constructor(e){this._actual=e,this.onMessage=l(this._actual.onMessage),this.onClose=l(this._actual.onClose)}send(e){this._actual.send(e)}end(){this._actual.end()}}t.BufferedProtocol=p}),define(t[134],n([1,0,189,2]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this._emitter=new i.Emitter,this._registered=!1}onDidChangeKeyboardLayout(e){return this._registered||(this._registered=!0,n.onDidChangeKeyboardLayout(()=>{
this._emitter.fire()})),this._emitter.event(e)}}r.INSTANCE=new r,t.KeyboardLayoutMonitor=r}),define(t[56],n([1,0,3,10]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="#FFFFFF",o="#1E1E1E",s="#000000",a="theme",c="themeBackground";t.storeBackgroundColor=function(e,t){e.setItem(a,t.baseTheme),e.setItem(c,t.background)},t.getBackgroundColor=function(e){if(n.isWindows&&i.systemPreferences.isInvertedColorScheme())return s;let t=e.getItem(c,null);if(!t){let c;t="hc-black"===(c=n.isWindows&&i.systemPreferences.isInvertedColorScheme()?"hc-black":e.getItem(a,"vs-dark").split(" ")[0])?s:"vs"===c?r:o}return n.isMacintosh&&t.toUpperCase()===o&&(t="#171717"),t}}),define(t[136],n([1,0,8]),function(e,t,n){"use strict";function i(e){const t={uiState:e.uiState};return e.backupPath&&(t.backupPath=e.backupPath),e.remoteAuthority&&(t.remoteAuthority=e.remoteAuthority),
e.folder?t.folderUri=n.URI.parse(e.folder):e.folderUri?t.folderUri=n.URI.revive(e.folderUri):e.folderPath&&(t.folderUri=n.URI.file(e.folderPath)),e.workspaceIdentifier?t.workspace={id:e.workspaceIdentifier.id,configPath:n.URI.parse(e.workspaceIdentifier.configURIPath)}:e.workspace&&(t.workspace={id:e.workspace.id,configPath:n.URI.file(e.workspace.configPath)}),t}function r(e){return{workspaceIdentifier:e.workspace&&{id:e.workspace.id,configURIPath:e.workspace.configPath.toString()},folder:e.folderUri&&e.folderUri.toString(),backupPath:e.backupPath,remoteAuthority:e.remoteAuthority,uiState:e.uiState}}Object.defineProperty(t,"__esModule",{value:!0}),t.restoreWindowsState=function(e){const t={openedWindows:[]},n=e||{openedWindows:[]};return n.lastActiveWindow&&(t.lastActiveWindow=i(n.lastActiveWindow)),n.lastPluginDevelopmentHostWindow&&(t.lastPluginDevelopmentHostWindow=i(n.lastPluginDevelopmentHostWindow)),Array.isArray(n.openedWindows)&&(t.openedWindows=n.openedWindows.map(e=>i(e))),t},
t.getWindowsStateStoreData=function(e){return{lastActiveWindow:e.lastActiveWindow&&r(e.lastActiveWindow),lastPluginDevelopmentHostWindow:e.lastPluginDevelopmentHostWindow&&r(e.lastPluginDevelopmentHostWindow),openedWindows:e.openedWindows.map(e=>r(e))}}}),define(t[73],n([1,0,4,21,17,33,3,18,34]),function(e,t,n,i,r,o,s,a,c){"use strict";function l(e){e["open-url"]&&(e._urls=e._,e._=[]);const t=function(e,t){const l=process.env.VSCODE_CWD||process.cwd(),d=e.map(e=>{let i=String(e),d=void 0;t&&(d=u(i),i=d.path),i&&(i=function(e,t){s.isWindows&&(t=r.rtrim(t,'"'));t=r.trim(r.trim(t," "),"\t"),s.isWindows&&(t=n.resolve(e,t),t=r.rtrim(t,"."));return t}(l,i));const h=c.sanitizeFilePath(i,l),p=n.basename(h);return p&&!o.isValidBasename(p)?null:t&&d?(d.path=h,function(e){const t=[e.path];a.isNumber(e.line)&&t.push(String(e.line));a.isNumber(e.column)&&t.push(String(e.column));return t.join(":")}(d)):h}),h=s.isWindows||s.isMacintosh,p=i.distinct(d,e=>e&&h?e.toLowerCase():e||"");return i.coalesce(p)}(e._,e.goto)
;return e._=t,e.diff=e.diff&&2===t.length,e}function u(e){let t=null,n=null,i=null;if(e.split(":").forEach(e=>{const r=Number(e);a.isNumber(r)?null===n?n=r:null===i&&(i=r):t=t?[t,e].join(":"):e}),!t)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:t,line:null!==n?n:void 0,column:null!==i?i:null!==n?1:void 0}}Object.defineProperty(t,"__esModule",{value:!0}),t.validatePaths=l,t.parseLineAndColumnAware=u}),define(t[143],n([1,0,41,15,29,3]),function(e,t,n,i,r,o){"use strict";function s(){return void 0===a&&(a=o.isWindows?Promise.resolve({}):"1"===process.env.VSCODE_CLI?Promise.resolve({}):new Promise((e,t)=>{const o=process.env.ELECTRON_RUN_AS_NODE,s=process.env.ELECTRON_NO_ATTACH_CONSOLE,a=r.generateUuid().replace(/-/g,"").substr(0,12),c=new RegExp(a+"(.*)"+a),l=i.assign({},process.env,{ELECTRON_RUN_AS_NODE:"1",ELECTRON_NO_ATTACH_CONSOLE:"1"}),u=`'${process.execPath}' -p '"${a}" + JSON.stringify(process.env) + "${a}"'`,d=n.spawn(process.env.SHELL,["-ilc",u],{detached:!0,
stdio:["ignore","pipe",process.stderr],env:l}),h=[];d.on("error",()=>e({})),d.stdout.on("data",e=>h.push(e)),d.on("close",(n,i)=>{if(0!==n)return t(new Error("Failed to get environment"));const r=Buffer.concat(h).toString("utf8"),a=c.exec(r),l=a?a[1]:"{}";try{const n=JSON.parse(l);o?n.ELECTRON_RUN_AS_NODE=o:delete n.ELECTRON_RUN_AS_NODE,s?n.ELECTRON_NO_ATTACH_CONSOLE=s:delete n.ELECTRON_NO_ATTACH_CONSOLE,delete n.XDG_RUNTIME_DIR,e(n)}catch(e){t(e)}})}).catch(()=>({}))),a}Object.defineProperty(t,"__esModule",{value:!0});let a;t.getShellEnvironment=s}),define(t[147],n([1,0,4,23,24]),function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createWaitMarkerFile=function(e){const t=n.join(i.tmpdir(),Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,10));return r.writeFile(t,"").then(()=>(e&&console.log(`Marker file for --wait created: ${t}`),t),t=>(e&&console.error(`Failed to create marker file for --wait: ${t}`),Promise.resolve(void 0)))}}),
define(t[148],n([13,11]),function(e,t){return e.create("vs/base/common/keybindingLabels",t)}),define(t[158],n([1,0,148]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(0===t.length)return null;let i=[];for(let r=0,o=t.length;r<o;r++){const o=t[r],s=n(o);if(null===s)return null;i[r]=function(e,t,n){if(null===t)return"";let i=[];return e.ctrlKey&&i.push(n.ctrlKey),e.shiftKey&&i.push(n.shiftKey),e.altKey&&i.push(n.altKey),e.metaKey&&i.push(n.metaKey),i.push(t),i.join(n.separator)}(o,s,this.modifierLabels[e])}return i.join(" ")}}t.ModifierLabelProvider=i,t.UILabelProvider=new i({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:n.localize(0,null),shiftKey:n.localize(1,null),altKey:n.localize(2,null),metaKey:n.localize(3,null),separator:"+"},{ctrlKey:n.localize(4,null),shiftKey:n.localize(5,null),
altKey:n.localize(6,null),metaKey:n.localize(7,null),separator:"+"}),t.AriaLabelProvider=new i({ctrlKey:n.localize(8,null),shiftKey:n.localize(9,null),altKey:n.localize(10,null),metaKey:n.localize(11,null),separator:"+"},{ctrlKey:n.localize(12,null),shiftKey:n.localize(13,null),altKey:n.localize(14,null),metaKey:n.localize(15,null),separator:"+"},{ctrlKey:n.localize(16,null),shiftKey:n.localize(17,null),altKey:n.localize(18,null),metaKey:n.localize(19,null),separator:"+"}),t.ElectronAcceleratorLabelProvider=new i({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),t.UserSettingsLabelProvider=new i({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"})}),define(t[165],n([13,11]),function(e,t){return e.create("vs/code/electron-main/app",t)}),
define(t[171],n([13,11]),function(e,t){return e.create("vs/code/electron-main/auth",t)}),define(t[177],n([13,11]),function(e,t){return e.create("vs/code/electron-main/logUploader",t)}),define(t[75],n([13,11]),function(e,t){return e.create("vs/code/electron-main/window",t)}),define(t[76],n([13,11]),function(e,t){return e.create("vs/code/electron-main/windows",t)}),define(t[77],n([13,11]),function(e,t){return e.create("vs/platform/configuration/common/configurationRegistry",t)}),define(t[78],n([13,11]),function(e,t){return e.create("vs/platform/environment/node/argv",t)}),define(t[79],n([13,11]),function(e,t){return e.create("vs/platform/environment/node/argvHelper",t)}),define(t[80],n([13,11]),function(e,t){return e.create("vs/platform/extensionManagement/common/extensionManagement",t)}),define(t[81],n([13,11]),function(e,t){return e.create("vs/platform/extensions/node/extensionValidator",t)}),define(t[82],n([13,11]),function(e,t){return e.create("vs/platform/history/electron-main/historyMainService",t)}),
define(t[83],n([13,11]),function(e,t){return e.create("vs/platform/issue/electron-main/issueService",t)}),define(t[84],n([13,11]),function(e,t){return e.create("vs/platform/label/common/label",t)}),define(t[85],n([13,11]),function(e,t){return e.create("vs/platform/menubar/electron-main/menubar",t)}),define(t[86],n([13,11]),function(e,t){return e.create("vs/platform/request/node/request",t)}),define(t[87],n([13,11]),function(e,t){return e.create("vs/platform/telemetry/common/telemetryService",t)}),define(t[88],n([13,11]),function(e,t){return e.create("vs/platform/update/node/update.config.contribution",t)}),define(t[89],n([13,11]),function(e,t){return e.create("vs/platform/windows/electron-main/windowsService",t)}),define(t[90],n([13,11]),function(e,t){return e.create("vs/platform/workspaces/common/workspaces",t)}),define(t[39],n([1,0,193,23,78]),function(e,t,n,i,r){"use strict";function o(e){let t="";return e.args&&(t=Array.isArray(e.args)?` <${e.args.join("> <")}>`:` <${e.args}>`),
e.alias?`-${e.alias} --${e.id}${t}`:`--${e.id}${t}`}function s(e,t){let n=e.map(o),i=Math.max.apply(null,n.map(e=>e.length))+2+1;if(t-i<25)return e.reduce((e,t,i)=>e.concat([`  ${n[i]}`,`      ${t.description}`]),[]);let r=t-i-1,s=[];return e.forEach((e,t)=>{let o=n[t],c=function(e,t){let n=[];for(;e.length;){let i=e.length<t?e.length:e.lastIndexOf(" ",t),r=e.slice(0,i).trim();e=e.slice(i),n.push(r)}return n}(e.description,r),l=a(i-o.length-2);s.push("  "+o+l+c[0]);for(let e=1;e<c.length;e++)s.push(a(i)+c[e])}),s}function a(e){return" ".repeat(e)}Object.defineProperty(t,"__esModule",{value:!0});class c{constructor(){this.o=r.localize(0,null),this.e=r.localize(1,null),this.t=r.localize(2,null)}}t.options=[{id:"diff",type:"boolean",cat:"o",alias:"d",args:["file","file"],description:r.localize(3,null)},{id:"add",type:"boolean",cat:"o",alias:"a",args:"folder",description:r.localize(4,null)},{id:"goto",type:"boolean",cat:"o",alias:"g",args:"file:line[:character]",description:r.localize(5,null)},{id:"new-window",
type:"boolean",cat:"o",alias:"n",description:r.localize(6,null)},{id:"reuse-window",type:"boolean",cat:"o",alias:"r",description:r.localize(7,null)},{id:"wait",type:"boolean",cat:"o",alias:"w",description:r.localize(8,null)},{id:"locale",type:"string",cat:"o",args:"locale",description:r.localize(9,null)},{id:"user-data-dir",type:"string",cat:"o",args:"dir",description:r.localize(10,null)},{id:"version",type:"boolean",cat:"o",alias:"v",description:r.localize(11,null)},{id:"help",type:"boolean",cat:"o",alias:"h",description:r.localize(12,null)},{id:"folder-uri",type:"string",cat:"o",args:"uri",description:r.localize(13,null)},{id:"file-uri",type:"string",cat:"o",args:"uri",description:r.localize(14,null)},{id:"extensions-dir",type:"string",deprecates:"extensionHomePath",cat:"e",args:"dir",description:r.localize(15,null)},{id:"list-extensions",type:"boolean",cat:"e",description:r.localize(16,null)},{id:"show-versions",type:"boolean",cat:"e",description:r.localize(17,null)},{id:"install-extension",type:"string",
cat:"e",args:"extension-id",description:r.localize(18,null)},{id:"uninstall-extension",type:"string",cat:"e",args:"extension-id",description:r.localize(19,null)},{id:"enable-proposed-api",type:"string",cat:"e",args:"extension-id",description:r.localize(20,null)},{id:"verbose",type:"boolean",cat:"t",description:r.localize(21,null)},{id:"log",type:"string",cat:"t",args:"level",description:r.localize(22,null)},{id:"status",type:"boolean",alias:"s",cat:"t",description:r.localize(23,null)},{id:"prof-modules",type:"boolean",alias:"p",cat:"t",description:r.localize(24,null)},{id:"prof-startup",type:"boolean",cat:"t",description:r.localize(25,null)},{id:"disable-extensions",type:"boolean",deprecates:"disableExtensions",cat:"t",description:r.localize(26,null)},{id:"disable-extension",type:"string",cat:"t",args:"extension-id",description:r.localize(27,null)},{id:"inspect-extensions",type:"string",deprecates:"debugPluginHost",args:"port",cat:"t",description:r.localize(28,null)},{id:"inspect-brk-extensions",
type:"string",deprecates:"debugBrkPluginHost",args:"port",cat:"t",description:r.localize(29,null)},{id:"disable-gpu",type:"boolean",cat:"t",description:r.localize(30,null)},{id:"upload-logs",type:"string",cat:"t",description:r.localize(31,null)},{id:"max-memory",type:"string",cat:"t",description:r.localize(32,null)},{id:"remote",type:"string"},{id:"extensionDevelopmentPath",type:"string"},{id:"extensionTestsPath",type:"string"},{id:"debugId",type:"string"},{id:"inspect-search",type:"string",deprecates:"debugSearch"},{id:"inspect-brk-search",type:"string",deprecates:"debugBrkSearch"},{id:"export-default-configuration",type:"string"},{id:"install-source",type:"string"},{id:"driver",type:"string"},{id:"logExtensionHostCommunication",type:"boolean"},{id:"skip-getting-started",type:"boolean"},{id:"skip-release-notes",type:"boolean"},{id:"sticky-quickopen",type:"boolean"},{id:"disable-restore-windows",type:"boolean"},{id:"disable-telemetry",type:"boolean"},{id:"disable-updates",type:"boolean"},{
id:"disable-crash-reporter",type:"boolean"},{id:"skip-add-to-recently-opened",type:"boolean"},{id:"unity-launch",type:"boolean"},{id:"open-url",type:"boolean"},{id:"nolazy",type:"boolean"},{id:"issue",type:"boolean"},{id:"file-write",type:"boolean"},{id:"file-chmod",type:"boolean"},{id:"driver-verbose",type:"boolean"},{id:"force",type:"boolean"},{id:"trace-category-filter",type:"string"},{id:"trace-options",type:"string"},{id:"prof-code-loading",type:"boolean"}],t.parseArgs=function(e,i=(e=>!0)){const r={},o=[],s=[];for(let e of t.options)i(e)&&e.alias&&(r[e.id]=e.alias),"string"===e.type?(o.push(e.id),e.deprecates&&o.push(e.deprecates)):"boolean"===e.type&&(s.push(e.id),e.deprecates&&s.push(e.deprecates));const a=n(e,{string:o,boolean:s,alias:r});for(let e of t.options)e.alias&&delete a[e.alias],e.deprecates&&a.hasOwnProperty(e.deprecates)&&!a[e.id]&&(a[e.id]=a[e.deprecates],delete a[e.deprecates]);return a},t.formatOptions=s,t.buildHelpMessage=function(e,n,o,a=(e=>!0)){
const l=process.stdout.isTTY&&process.stdout.columns||80;let u=new c,d=[`${e} ${o}`];d.push(""),d.push(`${r.localize(33,null)}: ${n} [${r.localize(34,null)}][${r.localize(35,null)}...]`),d.push(""),"win32"===i.platform()?d.push(r.localize(36,null,n)):d.push(r.localize(37,null,n)),d.push("");for(let e in u){let n=t.options.filter(t=>!!t.description&&t.cat===e&&a(t));n.length&&(d.push(u[e]),d.push(...s(n,l)),d.push(""))}return d.join("\n")},t.buildVersionMessage=function(e,t){return`${e||r.localize(38,null)}\n${t||r.localize(39,null)}\n${process.arch}`},t.asArray=function(e){return e?Array.isArray(e)?e:[e]:[]},t.hasArgs=function(e){return!(!e||Array.isArray(e)&&!e.length)}}),define(t[74],n([1,0,17]),function(e,t,n){"use strict";function i(e,t){return e.uuid&&t.uuid?e.uuid===t.uuid:e.id===t.id||0===n.compareIgnoreCase(e.id,t.id)}Object.defineProperty(t,"__esModule",{value:!0}),t.areSameExtensions=i,t.adoptToGalleryExtensionId=function(e){return e.toLocaleLowerCase()},t.getGalleryExtensionId=function(e,t){
return`${e.toLocaleLowerCase()}.${t.toLocaleLowerCase()}`},t.groupByExtension=function(e,t){const n=[],r=e=>{for(const r of n)if(r.some(n=>i(t(n),t(e))))return r;return null};for(const t of e){const e=r(t);e?e.push(t):n.push([t])}return n},t.getLocalExtensionTelemetryData=function(e){return{id:e.identifier.id,name:e.manifest.name,galleryId:null,publisherId:e.metadata?e.metadata.publisherId:null,publisherName:e.manifest.publisher,publisherDisplayName:e.metadata?e.metadata.publisherDisplayName:null,dependencies:e.manifest.extensionDependencies&&e.manifest.extensionDependencies.length>0}},t.getGalleryExtensionTelemetryData=function(e){return Object.assign({id:e.identifier.id,name:e.name,galleryId:e.identifier.uuid,publisherId:e.publisherId,publisherName:e.publisher,publisherDisplayName:e.publisherDisplayName,dependencies:!!(e.properties.dependencies&&e.properties.dependencies.length>0)},e.telemetryData)},t.BetterMergeId="pprice.better-merge",t.getMaliciousExtensionsSet=function(e){const t=new Set
;for(const n of e)n.malicious&&t.add(n.id.id);return t}}),define(t[55],n([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}t.SyncDescriptor=n,t.createSyncDescriptor=((e,...t)=>new n(e,t))}),define(t[95],n([1,0,18,97]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this._hashFn=e,this._nodes=Object.create(null)}roots(){const e=[];return i.forEach(this._nodes,t=>{n.isEmptyObject(t.value.outgoing)&&e.push(t.value)}),e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing[this._hashFn(t)]=i,i.incoming[this._hashFn(e)]=n}removeNode(e){const t=this._hashFn(e);delete this._nodes[t],i.forEach(this._nodes,e=>{delete e.value.outgoing[t],delete e.value.incoming[t]})}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes[t];return n||(n=function(e){return{data:e,
incoming:Object.create(null),outgoing:Object.create(null)}}(e),this._nodes[t]=n),n}lookup(e){return this._nodes[this._hashFn(e)]}isEmpty(){for(const e in this._nodes)return!1;return!0}toString(){let e=[];return i.forEach(this._nodes,t=>{e.push(`${t.key}, (incoming)[${Object.keys(t.value.incoming).join(", ")}], (outgoing)[${Object.keys(t.value.outgoing).join(",")}]`)}),e.join("\n")}}t.Graph=r}),define(t[5],n([1,0]),function(e,t){"use strict";function n(e,t,n,i){t[r.DI_TARGET]===t?t[r.DI_DEPENDENCIES].push({id:e,index:n,optional:i}):(t[r.DI_DEPENDENCIES]=[{id:e,index:n,optional:i}],t[r.DI_TARGET]=t)}function i(e){if(r.serviceIds.has(e))return r.serviceIds.get(e);const t=function(e,i,r){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");n(t,e,r,!1)};return t.toString=(()=>e),r.serviceIds.set(e,t),t}Object.defineProperty(t,"__esModule",{value:!0});var r;!function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",
e.getServiceDependencies=function(t){return t[e.DI_DEPENDENCIES]||[]}}(r=t._util||(t._util={})),t.IInstantiationService=i("instantiationService"),t.createDecorator=i,t.optional=function(e){return function(t,i,r){if(3!==arguments.length)throw new Error("@optional-decorator can only be used to decorate a parameter");n(e,t,r,!0)}}}),define(t[54],n([1,0,5]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IBackupMainService=n.createDecorator("backupMainService")}),define(t[98],n([1,0,51,5]),function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ID="driverService",t.IDriver=r.createDecorator(t.ID);class o{constructor(e){this.driver=e}listen(e,t){throw new Error("No event found")}call(e,t,n){switch(t){case"getWindowIds":return this.driver.getWindowIds();case"capturePage":return this.driver.capturePage(n);case"reloadWindow":return this.driver.reloadWindow(n);case"exitApplication":return this.driver.exitApplication();case"dispatchKeybinding":
return this.driver.dispatchKeybinding(n[0],n[1]);case"click":return this.driver.click(n[0],n[1],n[2],n[3]);case"doubleClick":return this.driver.doubleClick(n[0],n[1]);case"setValue":return this.driver.setValue(n[0],n[1],n[2]);case"getTitle":return this.driver.getTitle(n[0]);case"isActiveElement":return this.driver.isActiveElement(n[0],n[1]);case"getElements":return this.driver.getElements(n[0],n[1],n[2]);case"typeInEditor":return this.driver.typeInEditor(n[0],n[1],n[2]);case"getTerminalBuffer":return this.driver.getTerminalBuffer(n[0],n[1]);case"writeInTerminal":return this.driver.writeInTerminal(n[0],n[1],n[2])}throw new Error(`Call not found: ${t}`)}}t.DriverChannel=o;class s{constructor(e){this.channel=e}getWindowIds(){return this.channel.call("getWindowIds")}capturePage(e){return this.channel.call("capturePage",e)}reloadWindow(e){return this.channel.call("reloadWindow",e)}exitApplication(){return this.channel.call("exitApplication")}dispatchKeybinding(e,t){
return this.channel.call("dispatchKeybinding",[e,t])}click(e,t,n,i){return this.channel.call("click",[e,t,n,i])}doubleClick(e,t){return this.channel.call("doubleClick",[e,t])}setValue(e,t,n){return this.channel.call("setValue",[e,t,n])}getTitle(e){return this.channel.call("getTitle",[e])}isActiveElement(e,t){return this.channel.call("isActiveElement",[e,t])}getElements(e,t,n){return this.channel.call("getElements",[e,t,n])}typeInEditor(e,t,n){return this.channel.call("typeInEditor",[e,t,n])}getTerminalBuffer(e,t){return this.channel.call("getTerminalBuffer",[e,t])}writeInTerminal(e,t,n){return this.channel.call("writeInTerminal",[e,t,n])}}t.DriverChannelClient=s;class a{constructor(e){this.registry=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,n){switch(t){case"registerWindowDriver":return this.registry.registerWindowDriver(n);case"reloadWindowDriver":return this.registry.reloadWindowDriver(n)}throw new Error(`Call not found: ${t}`)}}t.WindowDriverRegistryChannel=a;class c{constructor(e){
this.channel=e}registerWindowDriver(e){return this.channel.call("registerWindowDriver",e)}reloadWindowDriver(e){return this.channel.call("reloadWindowDriver",e)}}t.WindowDriverRegistryChannelClient=c;class l{constructor(e){this.driver=e}listen(e,t){throw new Error(`No event found: ${t}`)}call(e,t,n){switch(t){case"click":return this.driver.click(n[0],n[1],n[2]);case"doubleClick":return this.driver.doubleClick(n);case"setValue":return this.driver.setValue(n[0],n[1]);case"getTitle":return this.driver.getTitle();case"isActiveElement":return this.driver.isActiveElement(n);case"getElements":return this.driver.getElements(n[0],n[1]);case"typeInEditor":return this.driver.typeInEditor(n[0],n[1]);case"getTerminalBuffer":return this.driver.getTerminalBuffer(n);case"writeInTerminal":return this.driver.writeInTerminal(n[0],n[1])}throw new Error(`Call not found: ${t}`)}}t.WindowDriverChannel=l;class u{constructor(e){this.channel=e}click(e,t,n){return this.channel.call("click",[e,t,n])}doubleClick(e){
return this.channel.call("doubleClick",e)}setValue(e,t){return this.channel.call("setValue",[e,t])}getTitle(){return this.channel.call("getTitle")}isActiveElement(e){return this.channel.call("isActiveElement",e)}getElements(e,t){return this.channel.call("getElements",[e,t])}typeInEditor(e,t){return this.channel.call("typeInEditor",[e,t])}getTerminalBuffer(e){return this.channel.call("getTerminalBuffer",e)}writeInTerminal(e,t){return this.channel.call("writeInTerminal",[e,t])}}t.WindowDriverChannelClient=u,t.connect=function(e){return i(this,void 0,void 0,function*(){const t=yield n.connect(e,"driverClient"),i=t.getChannel("driver");return{client:t,driver:new s(i)}})}}),define(t[9],n([1,0,5]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IEnvironmentService=n.createDecorator("environmentService")}),define(t[100],n([1,0,80,5]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),
t.EXTENSION_IDENTIFIER_PATTERN="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",t.EXTENSION_IDENTIFIER_REGEX=new RegExp(t.EXTENSION_IDENTIFIER_PATTERN),t.isIExtensionIdentifier=function(e){return e&&"object"==typeof e&&"string"==typeof e.id&&(!e.uuid||"string"==typeof e.uuid)},t.IExtensionManagementService=i.createDecorator("extensionManagementService"),t.IExtensionGalleryService=i.createDecorator("extensionGalleryService");!function(e){e[e.NoneOrRelevance=0]="NoneOrRelevance",e[e.LastUpdatedDate=1]="LastUpdatedDate",e[e.Title=2]="Title",e[e.PublisherName=3]="PublisherName",e[e.InstallCount=4]="InstallCount",e[e.PublishedDate=5]="PublishedDate",e[e.AverageRating=6]="AverageRating",e[e.WeightedRating=12]="WeightedRating"}(t.SortBy||(t.SortBy={}));!function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"}(t.SortOrder||(t.SortOrder={}));!function(e){e.Uninstall="uninstall"}(t.StatisticType||(t.StatisticType={}));!function(e){e[e.None=0]="None",
e[e.Install=1]="Install",e[e.Update=2]="Update"}(t.InstallOperation||(t.InstallOperation={})),t.INSTALL_ERROR_MALICIOUS="malicious",t.INSTALL_ERROR_INCOMPATIBLE="incompatible",t.IExtensionManagementServerService=i.createDecorator("extensionManagementServerService");!function(e){e[e.Disabled=0]="Disabled",e[e.WorkspaceDisabled=1]="WorkspaceDisabled",e[e.Enabled=2]="Enabled",e[e.WorkspaceEnabled=3]="WorkspaceEnabled"}(t.EnablementState||(t.EnablementState={})),t.IExtensionEnablementService=i.createDecorator("extensionEnablementService"),t.IExtensionTipsService=i.createDecorator("extensionTipsService");!function(e){e[e.Workspace=0]="Workspace",e[e.File=1]="File",e[e.Executable=2]="Executable",e[e.DynamicWorkspace=3]="DynamicWorkspace",e[e.Experimental=4]="Experimental"}(t.ExtensionRecommendationReason||(t.ExtensionRecommendationReason={})),t.ExtensionsLabel=n.localize(0,null),t.ExtensionsChannelId="extensions",t.PreferencesLabel=n.localize(1,null)}),
define(t[63],n([1,0,4,3,5,2,17,6,27,18,12]),function(e,t,n,i,r,o,s,a,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFileService=r.createDecorator("fileService");class d extends a.Disposable{constructor(e,t){super(),this.file=e,this.fileService=t,this._onDidContentChange=new o.Emitter,this.onDidContentChange=this._onDidContentChange.event,this.watching=!1,this.delayer=new u.ThrottledDelayer(500)}watch(e){this.watching||(this.etag=e,this.poll(),this.watching=!0)}poll(){this.delayer.trigger(()=>this.doWatch().then(()=>this.poll()))}doWatch(){return this.fileService.resolveFile(this.file).then(e=>{e.etag!==this.etag&&(this.etag=e.etag,this._onDidContentChange.fire(e))})}unwatch(){this.watching&&(this.delayer.cancel(),this.watching=!1)}dispose(){this.unwatch(),super.dispose()}}t.FileListener=d;!function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"}(t.FileType||(t.FileType={}));!function(e){
e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly"}(t.FileSystemProviderCapabilities||(t.FileSystemProviderCapabilities={}));!function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY"}(t.FileOperation||(t.FileOperation={}));class h{constructor(e,t,n){this._resource=e,this._operation=t,this._target=n}get resource(){return this._resource}get target(){return this._target}get operation(){return this._operation}}t.FileOperationEvent=h;!function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"}(t.FileChangeType||(t.FileChangeType={}));class p{constructor(e){this._changes=e}get changes(){return this._changes}contains(e,t){if(!e)return!1;const n=!l.isUndefinedOrNull(t)
;return this._changes.some(r=>(!n||r.type===t)&&(2===r.type?c.isEqualOrParent(e,r.resource,!i.isLinux):c.isEqual(e,r.resource,!i.isLinux)))}getAdded(){return this.getOfType(1)}gotAdded(){return this.hasType(1)}getDeleted(){return this.getOfType(2)}gotDeleted(){return this.hasType(2)}getUpdated(){return this.getOfType(0)}gotUpdated(){return this.hasType(0)}getOfType(e){return this._changes.filter(t=>t.type===e)}hasType(e){return this._changes.some(t=>t.type===e)}}t.FileChangesEvent=p,t.isParent=function(e,t,i){return!(!e||!t||e===t)&&!(t.length>e.length)&&(t.charAt(t.length-1)!==n.sep&&(t+=n.sep),i?s.startsWithIgnoreCase(e,t):0===e.indexOf(t))};class f{constructor(e){this._value=e}read(){let e=this._value;return this._value=null,e}}t.StringSnapshot=f,t.snapshotToString=function(e){const t=[];let n;for(;"string"==typeof(n=e.read());)t.push(n);return t.join("")};class g extends Error{constructor(e,t,n){super(e),this.fileOperationResult=t,this.options=n}static isFileOperationError(e){
return e instanceof Error&&!l.isUndefinedOrNull(e.fileOperationResult)}}t.FileOperationError=g;!function(e){e[e.FILE_IS_BINARY=0]="FILE_IS_BINARY",e[e.FILE_IS_DIRECTORY=1]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=2]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=3]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=4]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=5]="FILE_MOVE_CONFLICT",e[e.FILE_READ_ONLY=6]="FILE_READ_ONLY",e[e.FILE_PERMISSION_DENIED=7]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=8]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=9]="FILE_INVALID_PATH",e[e.FILE_EXCEED_MEMORY_LIMIT=10]="FILE_EXCEED_MEMORY_LIMIT"}(t.FileOperationResult||(t.FileOperationResult={})),t.AutoSaveConfiguration={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange",ON_WINDOW_CHANGE:"onWindowChange"},t.HotExitConfiguration={OFF:"off",ON_EXIT:"onExit",ON_EXIT_AND_WINDOW_CLOSE:"onExitAndWindowClose"},t.CONTENT_CHANGE_EVENT_BUFFER_DELAY=1e3,t.FILES_ASSOCIATIONS_CONFIG="files.associations",
t.FILES_EXCLUDE_CONFIG="files.exclude",t.SUPPORTED_ENCODINGS={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",
labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:21},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:22},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:23},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:24},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:25},iso88597:{labelLong:"Greek (ISO 8859-7)",
labelShort:"ISO 8859-7",order:26},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:27},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:28},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:29},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:30},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:31},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:32},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:33},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:34},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:35},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:36},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:37},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:38},eucjp:{
labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:39},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:40},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:41},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:42},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:43},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:44},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:45},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:46},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:47}};!function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"}(t.FileKind||(t.FileKind={})),t.MIN_MAX_MEMORY_SIZE_MB=2048,t.FALLBACK_MAX_MEMORY_SIZE_MB=4096}),define(t[102],n([1,0,154,21,79,63,39]),function(e,t,n,i,r,o,s){"use strict";function a(e){return e.goto&&e._.forEach(e=>n(/^(\w:)?[^:]+(:\d*){0,2}$/.test(e),r.localize(0,null))),
e["max-memory"]&&n(parseInt(e["max-memory"])>=o.MIN_MAX_MEMORY_SIZE_MB,`The max-memory argument cannot be specified lower than ${o.MIN_MAX_MEMORY_SIZE_MB} MB.`),e}function c(e){const t=i.firstIndex(e,e=>!/^-/.test(e));if(t>-1)return[...e.slice(0,t),...e.slice(t+1)]}Object.defineProperty(t,"__esModule",{value:!0}),t.parseMainProcessArgv=function(e){let[,...t]=e;return process.env.VSCODE_DEV&&(t=c(t)||[]),a(s.parseArgs(t))},t.parseCLIProcessArgv=function(e){let[,,...t]=e;return process.env.VSCODE_DEV&&(t=c(t)||[]),a(s.parseArgs(t))}}),define(t[50],n([1,0,5]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IHistoryMainService=n.createDecorator("historyMainService")}),define(t[57],n([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(...e){this._entries=new Map;for(let[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}forEach(e){this._entries.forEach((t,n)=>e(n,t))}has(e){
return this._entries.has(e)}get(e){return this._entries.get(e)}}t.ServiceCollection=n}),define(t[105],n([1,0,19,18,95,55,5,57]),function(e,t,n,i,r,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class c{constructor(e=new a.ServiceCollection,t=!1,n){this._services=e,this._strict=t,this._parent=n,this._services.set(s.IInstantiationService,this)}createChild(e){return new c(e,this._strict,this)}invokeFunction(e,...t){let i=u.traceInvocation(e),r=!1;try{const o={get:(e,t)=>{if(r)throw n.illegalState("service accessor is only valid during the invocation of its target method");const o=this._getOrCreateServiceInstance(e,i);if(!o&&t!==s.optional)throw new Error(`[invokeFunction] unknown service '${e}'`);return o}};return e.apply(void 0,[o,...t])}finally{r=!0,i.stop()}}createInstance(e,...t){let n,i;return e instanceof o.SyncDescriptor?(n=u.traceCreation(e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=u.traceCreation(e),i=this._createInstance(e,t,n)),n.stop(),i}
_createInstance(e,t=[],n){let r=s._util.getServiceDependencies(e).sort((e,t)=>e.index-t.index),o=[];for(const t of r){let i=this._getOrCreateServiceInstance(t.id,n);if(!i&&this._strict&&!t.optional)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${t.id}.`);o.push(i)}let a=r.length>0?r[0].index:t.length;if(t.length!==a){console.warn(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${t.length} static arguments`);let n=a-t.length;t=n>0?t.concat(new Array(n)):t.slice(0,a)}return i.create.apply(null,[e].concat(t,o))}_setServiceInstance(e,t){if(this._services.get(e)instanceof o.SyncDescriptor)this._services.set(e,t);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setServiceInstance(e,t)}}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let n=this._getServiceInstanceOrDescriptor(e)
;return n instanceof o.SyncDescriptor?this._createAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_createAndCacheServiceInstance(e,t,n){function i(){const e=new Error("[createInstance] cyclic dependency between services");throw e.message=a.toString(),e}const a=new r.Graph(e=>e.id.toString());let c=0;const l=[{id:e,desc:t,_trace:n}];for(;l.length;){const t=l.pop();a.lookupOrInsertNode(t),c++>100&&i();let n=s._util.getServiceDependencies(t.desc.ctor);for(let i of n){let n=this._getServiceInstanceOrDescriptor(i.id);if(n||i.optional||console.warn(`[createInstance] ${e} depends on ${i.id} which is NOT registered.`),n instanceof o.SyncDescriptor){const e={id:i.id,desc:n,_trace:t._trace.branch(i.id,!0)};a.insertEdge(t,e),l.push(e)}}}for(;;){let e=a.roots();if(0===e.length){a.isEmpty()||i();break}for(let{data:t}of e){const e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setServiceInstance(t.id,e),a.removeNode(t)}}
return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],i,r){if(this._services.get(e)instanceof o.SyncDescriptor)return this._createServiceInstance(t,n,i,r);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,i,r);throw new Error("illegalState - creating UNKNOWN service instance")}_createServiceInstance(e,t=[],n,i){return this._createInstance(e,t,i)}}t.InstantiationService=c;var l;!function(e){e[e.Creation=0]="Creation",e[e.Invocation=1]="Invocation",e[e.Branch=2]="Branch"}(l||(l={}));class u{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return u._None}static traceCreation(e){return u._None}branch(e,t){let n=new u(2,e.toString());return this._dep.push([e,t,n]),n}stop(){function e(t,i){let r=[],o=new Array(t+1).join("\t");for(const[s,a,c]of i._dep)if(a&&c){n=!0,r.push(`${o}CREATES -> ${s}`);let i=e(t+1,c);i&&r.push(i)}else r.push(`${o}uses -> ${s}`);return r.join("\n")}let t=Date.now()-this._start
;u._totals+=t;let n=!1,i=[`${0===this.type?"CREATE":"CALL"} ${this.name}`,`${e(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${u._totals.toFixed(2)}ms)`];(t>2||n)&&console.log(i.join("\n"))}}u._None=new class extends u{constructor(){super(-1,null)}stop(){}branch(){return this}},u._totals=0}),define(t[106],n([1,0,12,105]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends i.InstantiationService{createChild(e){return new r(e,this._strict,this)}_createServiceInstance(e,t=[],n,i){return n?r._newIdleProxyService(()=>super._createServiceInstance(e,t,n,i)):super._createServiceInstance(e,t,n,i)}static _newIdleProxyService(e){const t=new n.IdleValue(e);return new Proxy(Object.create(null),{get:(e,n)=>t.getValue()[n],set:(e,n,i)=>(t.getValue()[n]=i,!0)})}}t.InstantiationService=r}),define(t[107],n([1,0,5]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IIssueService=n.createDecorator("issueService");!function(e){e[e.Bug=0]="Bug",
e[e.PerformanceIssue=1]="PerformanceIssue",e[e.FeatureRequest=2]="FeatureRequest",e[e.SettingsSearchIssue=3]="SettingsSearchIssue"}(t.IssueType||(t.IssueType={}))}),define(t[108],n([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.service=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,n){switch(t){case"openIssueReporter":return this.service.openReporter(n);case"openProcessExplorer":return this.service.openProcessExplorer(n)}throw new Error(`Call not found: ${t}`)}}t.IssueChannel=n;class i{constructor(e){this.channel=e}openReporter(e){return this.channel.call("openIssueReporter",e)}openProcessExplorer(e){return this.channel.call("openProcessExplorer",e)}}t.IssueChannelClient=i}),define(t[109],n([1,0,19,158,53]),function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o extends r.ResolvedKeybinding{constructor(e,t){if(super(),0===t.length)throw n.illegalArgument("parts");this._os=e,this._parts=t}
getLabel(){return i.UILabelProvider.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return i.AriaLabelProvider.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1?null:i.ElectronAcceleratorLabelProvider.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return i.UserSettingsLabelProvider.toLabel(this._os,this._parts,e=>this._getUserSettingsLabel(e))}isWYSIWYG(){return this._parts.every(e=>this._isWYSIWYG(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new r.ResolvedKeybindingPart(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}}t.BaseResolvedKeybinding=o}),define(t[110],n([1,0,53,109]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends i.BaseResolvedKeybinding{constructor(e,t){
super(t,e.parts)}_keyCodeToUILabel(e){if(2===this._os)switch(e){case 15:return"";case 16:return"";case 17:return"";case 18:return""}return n.KeyCodeUtils.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":n.KeyCodeUtils.toString(e.keyCode)}_keyCodeToElectronAccelerator(e){if(e>=93&&e<=108)return null;switch(e){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return n.KeyCodeUtils.toString(e)}_getElectronAccelerator(e){return e.isDuplicateModifierCase()?null:this._keyCodeToElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=n.KeyCodeUtils.toUserSettingsUS(e.keyCode);return t?t.toLowerCase():t}_isWYSIWYG(){return!0}_getDispatchPart(e){return r.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),
e.metaKey&&(t+="meta+"),t+=n.KeyCodeUtils.toString(e.keyCode)}}t.USLayoutResolvedKeybinding=r}),define(t[111],n([1,0,2,5,12]),function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ILifecycleService=i.createDecorator("lifecycleService");!function(e){e[e.CLOSE=1]="CLOSE",e[e.QUIT=2]="QUIT",e[e.RELOAD=3]="RELOAD",e[e.LOAD=4]="LOAD"}(t.ShutdownReason||(t.ShutdownReason={}));!function(e){e[e.NewWindow=1]="NewWindow",e[e.ReloadedWindow=3]="ReloadedWindow",e[e.ReopenedWindow=4]="ReopenedWindow"}(t.StartupKind||(t.StartupKind={})),t.StartupKindToString=function(e){switch(e){case 1:return"NewWindow";case 3:return"ReloadedWindow";case 4:return"ReopenedWindow"}};!function(e){e[e.Starting=1]="Starting",e[e.Ready=2]="Ready",e[e.Restored=3]="Restored",e[e.Eventually=4]="Eventually"}(t.LifecyclePhase||(t.LifecyclePhase={})),t.LifecyclePhaseToString=function(e){switch(e){case 1:return"Starting";case 2:return"Ready";case 3:return"Restored";case 4:return"Eventually"}},t.NullLifecycleService={
_serviceBrand:null,onBeforeShutdown:n.Event.None,onWillShutdown:n.Event.None,onShutdown:n.Event.None,phase:3,startupKind:1,when:()=>Promise.resolve()},t.handleVetos=function(e,t){if(0===e.length)return Promise.resolve(!1);const n=[];let i=!1;for(let o of e){if(!0===o)return Promise.resolve(!0);r.isThenable(o)&&n.push(o.then(e=>{e&&(i=!0)},e=>{t(e),i=!0}))}return Promise.all(n).then(()=>i)}}),define(t[7],n([1,0,5,6,3,2]),function(e,t,n,i,r,o){"use strict";function s(){return(new Date).toISOString()}Object.defineProperty(t,"__esModule",{value:!0}),t.ILogService=n.createDecorator("logService");var a;!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.Off=6]="Off"}(a=t.LogLevel||(t.LogLevel={})),t.DEFAULT_LOG_LEVEL=a.Info;class c extends i.Disposable{constructor(){super(...arguments),this.level=t.DEFAULT_LOG_LEVEL,this._onDidChangeLogLevel=this._register(new o.Emitter),
this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}t.AbstractLogService=c;class l extends c{constructor(e=t.DEFAULT_LOG_LEVEL){super(),this.setLevel(e),this.useColors=!r.isWindows}trace(e,...t){this.getLevel()<=a.Trace&&(this.useColors?console.log(`[90m[main ${s()}][0m`,e,...t):console.log(`[main ${s()}]`,e,...t))}debug(e,...t){this.getLevel()<=a.Debug&&(this.useColors?console.log(`[90m[main ${s()}][0m`,e,...t):console.log(`[main ${s()}]`,e,...t))}info(e,...t){this.getLevel()<=a.Info&&(this.useColors?console.log(`[90m[main ${s()}][0m`,e,...t):console.log(`[main ${s()}]`,e,...t))}warn(e,...t){this.getLevel()<=a.Warning&&(this.useColors?console.warn(`[93m[main ${s()}][0m`,e,...t):console.warn(`[main ${s()}]`,e,...t))}error(e,...t){this.getLevel()<=a.Error&&(this.useColors?console.error(`[91m[main ${s()}][0m`,e,...t):console.error(`[main ${s()}]`,e,...t))}critical(e,...t){
this.getLevel()<=a.Critical&&(this.useColors?console.error(`[90m[main ${s()}][0m`,e,...t):console.error(`[main ${s()}]`,e,...t))}dispose(){}}t.ConsoleLogMainService=l;class u extends c{constructor(e=t.DEFAULT_LOG_LEVEL){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=a.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=a.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=a.Info&&console.log("%c INFO","color: #33f",e,...t)}warn(e,...t){this.getLevel()<=a.Warning&&console.log("%c WARN","color: #993",e,...t)}error(e,...t){this.getLevel()<=a.Error&&console.log("%c  ERR","color: #f33",e,...t)}critical(e,...t){this.getLevel()<=a.Critical&&console.log("%cCRITI","background: #f33; color: white",e,...t)}dispose(){}}t.ConsoleLogService=u;class d extends c{constructor(e){super(),this.logServices=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.logServices)t.setLevel(e);super.setLevel(e)}trace(e,...t){
for(const n of this.logServices)n.trace(e,...t)}debug(e,...t){for(const n of this.logServices)n.debug(e,...t)}info(e,...t){for(const n of this.logServices)n.info(e,...t)}warn(e,...t){for(const n of this.logServices)n.warn(e,...t)}error(e,...t){for(const n of this.logServices)n.error(e,...t)}critical(e,...t){for(const n of this.logServices)n.critical(e,...t)}dispose(){for(const e of this.logServices)e.dispose()}}t.MultiplexLogService=d;class h extends i.Disposable{constructor(e){super(),this.logService=e,this._register(e)}get onDidChangeLogLevel(){return this.logService.onDidChangeLogLevel}setLevel(e){this.logService.setLevel(e)}getLevel(){return this.logService.getLevel()}trace(e,...t){this.logService.trace(e,...t)}debug(e,...t){this.logService.debug(e,...t)}info(e,...t){this.logService.info(e,...t)}warn(e,...t){this.logService.warn(e,...t)}error(e,...t){this.logService.error(e,...t)}critical(e,...t){this.logService.critical(e,...t)}}t.DelegatedLogService=h;class p{constructor(){
this.onDidChangeLogLevel=(new o.Emitter).event}setLevel(e){}getLevel(){return a.Info}trace(e,...t){}debug(e,...t){}info(e,...t){}warn(e,...t){}error(e,...t){}critical(e,...t){}dispose(){}}t.NullLogService=p,t.getLogLevel=function(e){if(e.verbose)return a.Trace;if("string"==typeof e.args.log)switch(e.args.log.toLowerCase()){case"trace":return a.Trace;case"debug":return a.Debug;case"info":return a.Info;case"warn":return a.Warning;case"error":return a.Error;case"critical":return a.Critical;case"off":return a.Off}return t.DEFAULT_LOG_LEVEL}}),define(t[113],n([1,0,7]),function(e,t,n){"use strict";function i(e,t){switch(t){case n.LogLevel.Trace:return e.trace;case n.LogLevel.Debug:return e.debug;case n.LogLevel.Info:return e.info;case n.LogLevel.Warning:return e.warn;case n.LogLevel.Error:return e.error;case n.LogLevel.Critical:return e.critical;default:throw new Error("Invalid log level")}}Object.defineProperty(t,"__esModule",{value:!0});class r extends n.AbstractLogService{constructor(){super(),this.buffer=[],
this._logger=void 0,this._register(this.onDidChangeLogLevel(e=>{this._logger&&this._logger.setLevel(e)}))}set logger(e){this._logger=e;for(const{level:t,args:n}of this.buffer){i(e,t).apply(e,n)}this.buffer=[]}_log(e,t){if(this._logger){i(this._logger,e).apply(this._logger,t)}else this.getLevel()<=e&&this.buffer.push({level:e,args:t})}trace(){this._log(n.LogLevel.Trace,arguments)}debug(){this._log(n.LogLevel.Debug,arguments)}info(){this._log(n.LogLevel.Info,arguments)}warn(){this._log(n.LogLevel.Warning,arguments)}error(){this._log(n.LogLevel.Error,arguments)}critical(){this._log(n.LogLevel.Critical,arguments)}dispose(){this._logger&&this._logger.dispose()}}t.BufferLogService=r}),define(t[114],n([1,0,7,2]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.service=e,this.onDidChangeLogLevel=i.Event.buffer(e.onDidChangeLogLevel,!0)}listen(e,t){switch(t){case"onDidChangeLogLevel":return this.onDidChangeLogLevel}throw new Error(`Event not found: ${t}`)}
call(e,t,n){switch(t){case"setLevel":this.service.setLevel(n)}throw new Error(`Call not found: ${t}`)}}t.LogLevelSetterChannel=r;class o{constructor(e){this.channel=e}get onDidChangeLogLevel(){return this.channel.listen("onDidChangeLogLevel")}setLevel(e){this.channel.call("setLevel",e)}}t.LogLevelSetterChannelClient=o;class s extends n.DelegatedLogService{constructor(e,t){super(t),this.master=e,this._register(e.onDidChangeLogLevel(e=>t.setLevel(e)))}setLevel(e){this.master.setLevel(e)}}t.FollowerLogService=s}),define(t[115],n([1,0,4,7]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSpdLogService=function(t,o,s){try{const i=e.__$__nodeRequire("spdlog");i.setAsyncMode(8192,500);const a=n.join(s,`${t}.log`),c=new i.RotatingLogger(t,a,5242880,6);return c.setLevel(0),new r(c,o)}catch(e){console.error(e)}return new i.NullLogService},t.createRotatingLogger=function(t,n,i,r){return new(e.__$__nodeRequire("spdlog").RotatingLogger)(t,n,i,r)}
;class r extends i.AbstractLogService{constructor(e,t=i.LogLevel.Error){super(),this.logger=e,this.setLevel(t)}trace(){this.getLevel()<=i.LogLevel.Trace&&this.logger.trace(this.format(arguments))}debug(){this.getLevel()<=i.LogLevel.Debug&&this.logger.debug(this.format(arguments))}info(){this.getLevel()<=i.LogLevel.Info&&this.logger.info(this.format(arguments))}warn(){this.getLevel()<=i.LogLevel.Warning&&this.logger.warn(this.format(arguments))}error(){if(this.getLevel()<=i.LogLevel.Error){const e=arguments[0];if(e instanceof Error){const t=Array.prototype.slice.call(arguments);t[0]=e.stack,this.logger.error(this.format(t))}else this.logger.error(this.format(arguments))}}critical(){this.getLevel()<=i.LogLevel.Critical&&this.logger.critical(this.format(arguments))}dispose(){this.logger.drop()}format(e){let t="";for(let n=0;n<e.length;n++){let i=e[n];if("object"==typeof i)try{i=JSON.stringify(i)}catch(e){}t+=(n>0?" ":"")+i}return t}}}),define(t[64],n([1,0,5]),function(e,t,n){"use strict";function i(e){
return void 0!==e.submenu}function r(e){return"vscode.menubar.separator"===e.id}function o(e){return void 0!==e.uri}Object.defineProperty(t,"__esModule",{value:!0}),t.IMenubarService=n.createDecorator("menubarService"),t.isMenubarMenuItemSubmenu=i,t.isMenubarMenuItemSeparator=r,t.isMenubarMenuItemUriAction=o,t.isMenubarMenuItemAction=function(e){return!i(e)&&!r(e)&&!o(e)}}),define(t[117],n([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.service=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,n){switch(t){case"updateMenubar":return this.service.updateMenubar(n[0],n[1])}throw new Error(`Call not found: ${t}`)}}t.MenubarChannel=n;class i{constructor(e){this.channel=e}updateMenubar(e,t){return this.channel.call("updateMenubar",[e,t])}}t.MenubarChannelClient=i}),define(t[46],n([1,0,4,44]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})
;const r=n.dirname(i.getPathFromAmdModule(e,"")),o=n.join(r,"package.json");t.default=e.__$__nodeRequire(o)}),define(t[119],n([1,0,81,46]),function(e,t,n,i){"use strict";function r(e){return"*"===(e=e.trim())||l.test(e)}function o(e){if(!r(e))return null;if("*"===(e=e.trim()))return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};let t=e.match(l);return t?{hasCaret:"^"===t[1],hasGreaterEquals:">="===t[1],majorBase:"x"===t[2]?0:parseInt(t[2],10),majorMustEqual:"x"!==t[2],minorBase:"x"===t[4]?0:parseInt(t[4],10),minorMustEqual:"x"!==t[4],patchBase:"x"===t[6]?0:parseInt(t[6],10),patchMustEqual:"x"!==t[6],preRelease:t[8]||null}:null}function s(e){if(!e)return null;let t=e.majorBase,n=e.majorMustEqual,i=e.minorBase,r=e.minorMustEqual,o=e.patchBase,s=e.patchMustEqual;return e.hasCaret&&(0===t?s=!1:(r=!1,s=!1)),{majorBase:t,majorMustEqual:n,minorBase:i,minorMustEqual:r,patchBase:o,patchMustEqual:s,isMinimum:e.hasGreaterEquals}
}function a(e,t){let n;n="string"==typeof e?s(o(e)):e;let i;if(i="string"==typeof t?s(o(t)):t,!n||!i)return!1;let r=n.majorBase,a=n.minorBase,c=n.patchBase,l=i.majorBase,u=i.minorBase,d=i.patchBase,h=i.majorMustEqual,p=i.minorMustEqual,f=i.patchMustEqual;return i.isMinimum?r>l||!(r<l)&&(a>u||!(a<u)&&c>=d):(1!==r||0!==l||h&&p&&f||(l=1,u=0,d=0,h=!0,p=!1,f=!1),!(r<l)&&(r>l?!h:!(a<u)&&(a>u?!p:!(c<d)&&(!(c>d)||!f))))}function c(e,t,i=[]){let r=s(o(t));if(!r)return i.push(n.localize(0,null,t)),!1;if(0===r.majorBase){if(!r.majorMustEqual||!r.minorMustEqual)return i.push(n.localize(1,null,t)),!1}else if(!r.majorMustEqual)return i.push(n.localize(2,null,t)),!1;return!!a(e,r)||(i.push(n.localize(3,null,e,t)),!1)}Object.defineProperty(t,"__esModule",{value:!0});const l=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/;t.isValidVersionStr=r,t.parseVersion=o,t.normalizeVersion=s,t.isValidVersion=a,t.isValidExtensionVersion=function(e,t,n){return!(!t.isBuiltin&&void 0!==t.main)||c(e,t.engines.vscode,n)},
t.isEngineValid=function(e){return"*"===e||c(i.default.version,e)},t.isVersionValid=c}),define(t[20],n([1,0,4,44]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n.dirname(i.getPathFromAmdModule(e,"")),o=n.join(r,"product.json"),s=e.__$__nodeRequire(o);process.env.VSCODE_DEV&&(s.nameShort+=" Dev",s.nameLong+=" Dev",s.dataFolderName+="-dev"),t.default=s}),define(t[121],n([1,0,23,41,16,4,177,20,35]),function(e,t,n,r,o,s,a,c,l){"use strict";function u(e,t,c){return i(this,void 0,void 0,function*(){const u=d.getFromProduct();if(!u)return void console.error(a.localize(0,null));const h=yield e.getLogsPath();if(yield function(e,t){if((t.args["upload-logs"]||"").toLowerCase()==="iConfirmLogsUpload".toLowerCase())return!0;{const t=a.localize(3,null)+"\n\n"+a.localize(4,null,e)+"\n\n"+a.localize(5,null)+"\n\n"+a.localize(6,null,"iConfirmLogsUpload");return console.log(t),!1}}(h,c)){console.log(a.localize(1,null));const e=yield function(e,t,n){
return i(this,void 0,void 0,function*(){const i=setInterval(()=>console.log("."),5e3);let r;try{r=yield n.request({url:e.url,type:"POST",data:Buffer.from(o.readFileSync(t)).toString("base64"),headers:{"Content-Type":"application/zip"}},l.CancellationToken.None)}catch(e){throw clearInterval(i),console.log(a.localize(7,null,e)),e}return new Promise((e,t)=>{const n=[];r.stream.on("data",e=>{n.push(e)}),r.stream.on("end",()=>{clearInterval(i);try{const i=Buffer.concat(n).toString("utf-8");if(200===r.res.statusCode)e(JSON.parse(i));else{const e=a.localize(8,null,r.res.statusCode,i);console.log(e),t(new Error(e))}}catch(e){console.log(a.localize(9,null)),t(e)}})})})}(u,yield function(e){const t=o.mkdtempSync(s.join(n.tmpdir(),"vscode-log-upload")),i=s.join(t,"logs.zip");return new Promise((o,c)=>{!function(e,t,i,o){switch(n.platform()){case"win32":const a=s.join(i,"sub")
;return r.execFile("powershell",["-Command",`[System.IO.Directory]::CreateDirectory("${a}"); Copy-Item -recurse "${e}" "${a}"; Compress-Archive -Path "${a}" -DestinationPath "${t}"`],{cwd:e},o);default:r.execFile("zip",["-r",t,"."],{cwd:e},o)}}(e,i,t,(e,t,n)=>{e?(console.error(a.localize(10,null,e.message)),c(e)):o(i)})})}(h),t);console.log(a.localize(2,null,e.blob_id))}})}Object.defineProperty(t,"__esModule",{value:!0});class d{constructor(e){this.url=e}static getFromProduct(){const e=c.default.logUploaderUrl;return e?new d(e):void 0}}t.uploadLogs=u}),define(t[65],n([1,0,99,96,20,46,23,62,17,3,10,4,8,5]),function(e,t,n,r,o,s,a,c,l,u,d,h,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ID="diagnosticsService",t.IDiagnosticsService=f.createDecorator(t.ID);class g{formatEnvironment(e){const t=1073741824,n=[];n.push(`Version:          ${s.default.name} ${s.default.version} (${o.default.commit||"Commit unknown"}, ${o.default.date||"Date unknown"})`),
n.push(`OS Version:       ${a.type()} ${a.arch()} ${a.release()}`);const i=a.cpus();return i&&i.length>0&&n.push(`CPUs:             ${i[0].model} (${i.length} x ${i[0].speed})`),n.push(`Memory (System):  ${(a.totalmem()/t).toFixed(2)}GB (${(a.freemem()/t).toFixed(2)}GB free)`),u.isWindows||n.push(`Load (avg):       ${a.loadavg().map(e=>Math.round(e)).join(", ")}`),n.push(`VM:               ${Math.round(100*c.virtualMachineHint.value())}%`),n.push(`Screen Reader:    ${d.app.isAccessibilitySupportEnabled()?"yes":"no"}`),n.push(`Process Argv:     ${e.mainArguments.join(" ")}`),n.push(`GPU Status:       ${this.expandGPUFeatures()}`),n.join("\n")}getPerformanceInfo(e){return r.listProcesses(e.mainPID).then(t=>{const r=[],o=[];return e.windows.some(e=>e.folderURIs&&e.folderURIs.length>0)&&e.windows.forEach(e=>{0!==e.folderURIs.length&&(r.push(`|  Window (${e.title})`),e.folderURIs.forEach(e=>{const t=p.URI.revive(e);if("file"===t.scheme){const e=t.fsPath
;o.push(n.collectWorkspaceStats(e,["node_modules",".git"]).then(t=>i(this,void 0,void 0,function*(){let n=`${t.fileCount} files`;t.maxFilesReached&&(n=`more than ${n}`),r.push(`|    Folder (${h.basename(e)}): ${n}`),r.push(this.formatWorkspaceStats(t))})))}else r.push(`|    Folder (${t.toString()}): RPerformance stats not available.`)}))}),Promise.all(o).then(()=>({processInfo:this.formatProcessList(e,t),workspaceInfo:r.join("\n")})).catch(n=>({processInfo:this.formatProcessList(e,t),workspaceInfo:`Unable to calculate workspace stats: ${n}`}))})}getSystemInfo(e){const t=1073741824,n={"Memory (System)":`${(a.totalmem()/t).toFixed(2)}GB (${(a.freemem()/t).toFixed(2)}GB free)`,VM:`${Math.round(100*c.virtualMachineHint.value())}%`,"Screen Reader":`${d.app.isAccessibilitySupportEnabled()?"yes":"no"}`,"Process Argv":`${e.mainArguments.join(" ")}`,"GPU Status":d.app.getGPUFeatureStatus()},i=a.cpus();return i&&i.length>0&&(n.CPUs=`${i[0].model} (${i.length} x ${i[0].speed})`),
u.isWindows||(n["Load (avg)"]=`${a.loadavg().map(e=>Math.round(e)).join(", ")}`),n}printDiagnostics(e){return r.listProcesses(e.mainPID).then(t=>{console.log(""),console.log(this.formatEnvironment(e)),console.log(""),console.log(this.formatProcessList(e,t));const r=[];return e.windows.some(e=>e.folderURIs&&e.folderURIs.length>0)&&(console.log(""),console.log("Workspace Stats: "),e.windows.forEach(e=>{0!==e.folderURIs.length&&(console.log(`|  Window (${e.title})`),e.folderURIs.forEach(e=>{const t=p.URI.revive(e);if("file"===t.scheme){const e=t.fsPath;r.push(n.collectWorkspaceStats(e,["node_modules",".git"]).then(t=>i(this,void 0,void 0,function*(){let n=`${t.fileCount} files`;t.maxFilesReached&&(n=`more than ${n}`),console.log(`|    Folder (${h.basename(e)}): ${n}`),console.log(this.formatWorkspaceStats(t))})).catch(t=>{console.log(`|      Error: Unable to collect workspace stats for folder ${e} (${t.toString()})`)}))}else console.log(`|    Folder (${t.toString()}): Workspace stats not available.`)}))})),
Promise.all(r).then(()=>{console.log(""),console.log("")})})}formatWorkspaceStats(e){const t=[];let n=0;const i=(e,i)=>{const o=` ${e}(${i})`;n+o.length>60?(t.push(r),n=(r="|                 ").length):n+=o.length,r+=o};let r="|      File types:";let o=e.fileTypes.length>10?10:e.fileTypes.length;for(let t=0;t<o;t++){const n=e.fileTypes[t];i(n.name,n.count)}if(t.push(r),e.configFiles.length>=0&&(r="|      Conf files:",n=0,e.configFiles.forEach(e=>{i(e.name,e.count)}),t.push(r)),e.launchConfigFiles.length>0){let n="|      Launch Configs:";e.launchConfigFiles.forEach(e=>{const t=e.count>1?` ${e.name}(${e.count})`:` ${e.name}`;n+=t}),t.push(n)}return t.join("\n")}expandGPUFeatures(){const e=d.app.getGPUFeatureStatus(),t=Math.max(...Object.keys(e).map(e=>e.length));return Object.keys(e).map(n=>`${n}:  ${l.repeat(" ",t-n.length)}  ${e[n]}`).join("\n                  ")}formatProcessList(e,t){const n=new Map;e.windows.forEach(e=>n.set(e.pid,e.title));const i=[];return i.push("CPU %\tMem MB\t   PID\tProcess"),
t&&this.formatProcessItem(n,i,t,0),i.join("\n")}formatProcessItem(e,t,n,i){let r;0===i?r=`${o.default.applicationName} main`:(r=`${l.repeat("  ",i)} ${n.name}`,"window"===n.name&&(r=`${r} (${e.get(n.pid)})`));const s="win32"===process.platform?n.mem:a.totalmem()*(n.mem/100);t.push(`${l.pad(Number(n.load.toFixed(0)),5," ")}\t${l.pad(Number((s/1048576).toFixed(0)),6," ")}\t${l.pad(Number(n.pid.toFixed(0)),6," ")}\t${r}`),Array.isArray(n.children)&&n.children.forEach(n=>this.formatProcessItem(e,t,n,i+1))}}t.DiagnosticsService=g});var o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};define(t[123],n([1,0,58,92,23,4,49,46,20,157,3,44,8]),function(e,t,n,i,r,s,a,c,l,u,d,h,p){"use strict";function f(e,t){
return d.isWindows?function(e,t){return`\\\\.\\pipe\\${n.createHash("md5").update(e).digest("hex")}-${c.default.version}-${t}-sock`}(e,t):function(e,t){if(S){const i=n.createHash("md5").update(e).digest("hex").substr(0,8);return s.join(S,`vscode-${i}-${c.default.version}-${t}.sock`)}return s.join(e,`${c.default.version}-${t}.sock`)}(e,t)}function g(e,t){return v(e["inspect-extensions"],e["inspect-brk-extensions"],5870,t,e.debugId)}function m(e,t){return v(e["inspect-search"],e["inspect-brk-search"],5876,t)}function v(e,t,n,i,r){const o=t||e,s=Number(o)||(i?null:n);return{port:s,break:!!s&&Boolean(!!t),debugId:r}}function w(e,t){if(!e)return;const n=s.resolve(e);return s.normalize(e)===n?n:s.resolve(t.env.VSCODE_CWD||t.cwd(),e)}function y(e,t){return w(e["user-data-dir"],t)||s.resolve(i.getDefaultUserDataPath(t.platform))}Object.defineProperty(t,"__esModule",{value:!0});const S=process.env.XDG_RUNTIME_DIR;class b{constructor(e,t){if(this._args=e,this._execPath=t,!process.env.VSCODE_LOGS){
const e=u.toLocalISOString(new Date).replace(/-|:|\.\d+Z$/g,"");process.env.VSCODE_LOGS=s.join(this.userDataPath,"logs",e)}this.logsPath=process.env.VSCODE_LOGS}get args(){return this._args}get appRoot(){return s.dirname(h.getPathFromAmdModule(e,""))}get execPath(){return this._execPath}get cliPath(){return function(e,t,n){return d.isWindows?n?s.join(s.dirname(e),"bin",`${l.default.applicationName}.cmd`):s.join(t,"scripts","code-cli.bat"):d.isLinux?n?s.join(s.dirname(e),"bin",`${l.default.applicationName}`):s.join(t,"scripts","code-cli.sh"):n?s.join(t,"bin","code"):s.join(t,"scripts","code-cli.sh")}(this.execPath,this.appRoot,this.isBuilt)}get userHome(){return r.homedir()}get userDataPath(){const e=process.env.VSCODE_PORTABLE;return e?s.join(e,"user-data"):y(this._args,process)}get appNameLong(){return l.default.nameLong}get appQuality(){return l.default.quality}get appSettingsHome(){return s.join(this.userDataPath,"User")}get appSettingsPath(){return s.join(this.appSettingsHome,"settings.json")}
get globalStorageHome(){return s.join(this.appSettingsHome,"globalStorage")}get workspaceStorageHome(){return s.join(this.appSettingsHome,"workspaceStorage")}get settingsSearchBuildId(){return l.default.settingsSearchBuildId}get settingsSearchUrl(){return l.default.settingsSearchUrl}get appKeybindingsPath(){return s.join(this.appSettingsHome,"keybindings.json")}get isExtensionDevelopment(){return!!this._args.extensionDevelopmentPath}get backupHome(){return s.join(this.userDataPath,"Backups")}get backupWorkspacesPath(){return s.join(this.backupHome,"workspaces.json")}get untitledWorkspacesHome(){return p.URI.file(s.join(this.userDataPath,"Workspaces"))}get installSourcePath(){return s.join(this.userDataPath,"installSource")}get builtinExtensionsPath(){const t=w(this._args["builtin-extensions-dir"],process);return t||s.normalize(s.join(h.getPathFromAmdModule(e,""),"..","extensions"))}get extensionsPath(){const e=w(this._args["extensions-dir"],process);if(e)return e;const t=process.env.VSCODE_EXTENSIONS
;if(t)return t;const n=process.env.VSCODE_PORTABLE;return n?s.join(n,"extensions"):s.join(this.userHome,l.default.dataFolderName,"extensions")}get extensionDevelopmentLocationURI(){const e=this._args.extensionDevelopmentPath;if(e)return/^[^:/?#]+?:\/\//.test(e)?p.URI.parse(e):p.URI.file(s.normalize(e))}get extensionTestsLocationURI(){const e=this._args.extensionTestsPath;if(e)return/^[^:/?#]+?:\/\//.test(e)?p.URI.parse(e):p.URI.file(s.normalize(e))}get disableExtensions(){if(this._args["disable-extensions"])return!0;const e=this._args["disable-extension"];if(e){if("string"==typeof e)return[e];if(Array.isArray(e)&&e.length>0)return e}return!1}get skipGettingStarted(){return!!this._args["skip-getting-started"]}get skipReleaseNotes(){return!!this._args["skip-release-notes"]}get skipAddToRecentlyOpened(){return!!this._args["skip-add-to-recently-opened"]}get debugExtensionHost(){return g(this._args,this.isBuilt)}get debugSearch(){return m(this._args,this.isBuilt)}get isBuilt(){return!process.env.VSCODE_DEV}
get verbose(){return!!this._args.verbose}get log(){return this._args.log}get wait(){return!!this._args.wait}get logExtensionHostCommunication(){return!!this._args.logExtensionHostCommunication}get status(){return!!this._args.status}get mainIPCHandle(){return f(this.userDataPath,"main")}get sharedIPCHandle(){return f(this.userDataPath,"shared")}get nodeCachedDataDir(){return process.env.VSCODE_NODE_CACHED_DATA_DIR||void 0}get disableUpdates(){return!!this._args["disable-updates"]}get disableCrashReporter(){return!!this._args["disable-crash-reporter"]}get driverHandle(){return this._args.driver}get driverVerbose(){return!!this._args["driver-verbose"]}}o([a.memoize],b.prototype,"appRoot",null),o([a.memoize],b.prototype,"cliPath",null),o([a.memoize],b.prototype,"userHome",null),o([a.memoize],b.prototype,"userDataPath",null),o([a.memoize],b.prototype,"appSettingsHome",null),o([a.memoize],b.prototype,"appSettingsPath",null),o([a.memoize],b.prototype,"globalStorageHome",null),
o([a.memoize],b.prototype,"workspaceStorageHome",null),o([a.memoize],b.prototype,"settingsSearchBuildId",null),o([a.memoize],b.prototype,"settingsSearchUrl",null),o([a.memoize],b.prototype,"appKeybindingsPath",null),o([a.memoize],b.prototype,"isExtensionDevelopment",null),o([a.memoize],b.prototype,"backupHome",null),o([a.memoize],b.prototype,"backupWorkspacesPath",null),o([a.memoize],b.prototype,"untitledWorkspacesHome",null),o([a.memoize],b.prototype,"installSourcePath",null),o([a.memoize],b.prototype,"builtinExtensionsPath",null),o([a.memoize],b.prototype,"extensionsPath",null),o([a.memoize],b.prototype,"extensionDevelopmentLocationURI",null),o([a.memoize],b.prototype,"extensionTestsLocationURI",null),o([a.memoize],b.prototype,"debugExtensionHost",null),o([a.memoize],b.prototype,"debugSearch",null),o([a.memoize],b.prototype,"mainIPCHandle",null),o([a.memoize],b.prototype,"sharedIPCHandle",null),o([a.memoize],b.prototype,"nodeCachedDataDir",null),t.EnvironmentService=b,t.parseExtensionHostPort=g,
t.parseSearchPort=m,t.parseDebugPort=v,t.parseUserDataDir=y}),define(t[38],n([1,0,18,135]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.data={}}add(e,t){i.ok(n.isString(e)),i.ok(n.isObject(t)),i.ok(!this.data.hasOwnProperty(e),"There is already an extension with this id"),this.data[e]=t}knows(e){return this.data.hasOwnProperty(e)}as(e){return this.data[e]||null}}t.Registry=new r}),define(t[125],n([1,0,38,2]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Extensions={JSONContribution:"base.contributions.json"};class r{constructor(){this._onDidChangeSchema=new i.Emitter,this.onDidChangeSchema=this._onDidChangeSchema.event,this.schemasById={}}registerSchema(e,t){this.schemasById[function(e){return e.length>0&&"#"===e.charAt(e.length-1)?e.substring(0,e.length-1):e}(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}}
const o=new r;n.Registry.add(t.Extensions.JSONContribution,o)}),define(t[40],n([1,0,77,2,38,18,17,125]),function(e,t,n,i,r,o,s,a){"use strict";function c(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}function l(e){return t.OVERRIDE_PROPERTY_PATTERN.test(e)?n.localize(3,null,e):void 0!==g.getConfigurationProperties()[e]?n.localize(4,null,e):null}Object.defineProperty(t,"__esModule",{value:!0}),t.Extensions={Configuration:"base.contributions.configuration"};!function(e){e[e.APPLICATION=1]="APPLICATION",e[e.WINDOW=2]="WINDOW",e[e.RESOURCE=3]="RESOURCE"}(t.ConfigurationScope||(t.ConfigurationScope={})),t.allSettings={properties:{},patternProperties:{}},t.applicationSettings={properties:{},patternProperties:{}},t.windowSettings={properties:{},patternProperties:{}},t.resourceSettings={properties:{},patternProperties:{}},t.editorConfigurationSchemaId="vscode://schemas/settings/editor"
;const u=r.Registry.as(a.Extensions.JSONContribution);class d{constructor(){this.overrideIdentifiers=[],this._onDidSchemaChange=new i.Emitter,this.onDidSchemaChange=this._onDidSchemaChange.event,this._onDidUpdateConfiguration=new i.Emitter,this.onDidUpdateConfiguration=this._onDidUpdateConfiguration.event,this.defaultOverridesConfigurationNode={id:"defaultOverrides",title:n.localize(0,null),properties:{}},this.configurationContributors=[this.defaultOverridesConfigurationNode],this.editorConfigurationSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting"},this.configurationProperties={},this.excludedConfigurationProperties={},this.computeOverridePropertyPattern(),u.registerSchema(t.editorConfigurationSchemaId,this.editorConfigurationSchema)}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=[];e.forEach(e=>{n.push(...this.validateAndRegisterProperties(e,t)),
this.configurationContributors.push(e),this.registerJSONConfiguration(e),this.updateSchemaForOverrideSettingsConfiguration(e)}),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(n)}deregisterConfigurations(e){const n=[],i=e=>{if(e.properties)for(const i in e.properties)switch(n.push(i),delete this.configurationProperties[i],delete this.editorConfigurationSchema.properties[i],delete t.allSettings.properties[i],e.properties[i].scope){case 1:delete t.applicationSettings.properties[i];break;case 2:delete t.windowSettings.properties[i];break;case 3:delete t.resourceSettings.properties[i]}e.allOf&&e.allOf.forEach(e=>i(e))};for(const t of e){i(t);const e=this.configurationContributors.indexOf(t);-1!==e&&this.configurationContributors.splice(e,1)}u.registerSchema(t.editorConfigurationSchemaId,this.editorConfigurationSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(n)}registerDefaultConfigurations(e){const i=[];for(const r of e)for(const e in r.defaults){const o=r.defaults[e]
;if(t.OVERRIDE_PROPERTY_PATTERN.test(e)&&"object"==typeof o){const r={type:"object",default:o,description:n.localize(1,null,e),$ref:t.editorConfigurationSchemaId};t.allSettings.properties[e]=r,this.defaultOverridesConfigurationNode.properties[e]=r,this.configurationProperties[e]=r,i.push(e)}}this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(i)}deregisterDefaultConfigurations(e){const n=[];for(const i of e)for(const e in i.defaults)n.push(e),delete t.allSettings.properties[e],delete this.defaultOverridesConfigurationNode.properties[e],delete this.configurationProperties[e];this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(n)}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){this.overrideIdentifiers.push(...e),this.updateOverridePropertyPatternKey()}validateAndRegisterProperties(e,n=!0,i=2,r=!1){i=o.isUndefinedOrNull(e.scope)?i:e.scope,r=e.overridable||r;let s=[],a=e.properties;if(a)for(let e in a){let u;if(n&&(u=l(e))){
console.warn(u),delete a[e];continue}let d=a[e],h=d.default;o.isUndefined(h)&&(d.default=c(d.type)),r&&(d.overridable=!0),t.OVERRIDE_PROPERTY_PATTERN.test(e)?d.scope=void 0:d.scope=o.isUndefinedOrNull(d.scope)?i:d.scope,!a[e].hasOwnProperty("included")||a[e].included?(this.configurationProperties[e]=a[e],s.push(e)):(this.excludedConfigurationProperties[e]=a[e],delete a[e])}let u=e.allOf;if(u)for(let e of u)s.push(...this.validateAndRegisterProperties(e,n,i,r));return s}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}registerJSONConfiguration(e){function n(e){let i=e.properties;if(i)for(const e in i)switch(t.allSettings.properties[e]=i[e],i[e].scope){case 1:t.applicationSettings.properties[e]=i[e];break;case 2:t.windowSettings.properties[e]=i[e];break;case 3:t.resourceSettings.properties[e]=i[e]}let r=e.allOf;r&&r.forEach(n)}n(e)}
updateSchemaForOverrideSettingsConfiguration(e){e.id!==h&&(this.update(e),u.registerSchema(t.editorConfigurationSchemaId,this.editorConfigurationSchema))}updateOverridePropertyPatternKey(){let e=t.allSettings.patternProperties[this.overridePropertyPattern];e||(e={type:"object",description:n.localize(2,null),errorMessage:"Unknown Identifier. Use language identifiers",$ref:t.editorConfigurationSchemaId}),delete t.allSettings.patternProperties[this.overridePropertyPattern],delete t.applicationSettings.patternProperties[this.overridePropertyPattern],delete t.windowSettings.patternProperties[this.overridePropertyPattern],delete t.resourceSettings.patternProperties[this.overridePropertyPattern],this.computeOverridePropertyPattern(),t.allSettings.patternProperties[this.overridePropertyPattern]=e,t.applicationSettings.patternProperties[this.overridePropertyPattern]=e,t.windowSettings.patternProperties[this.overridePropertyPattern]=e,t.resourceSettings.patternProperties[this.overridePropertyPattern]=e,
this._onDidSchemaChange.fire()}update(e){let t=e.properties;if(t)for(let e in t)t[e].overridable&&(this.editorConfigurationSchema.properties[e]=this.getConfigurationProperties()[e]);let n=e.allOf;n&&n.forEach(e=>this.update(e))}computeOverridePropertyPattern(){this.overridePropertyPattern=this.overrideIdentifiers.length?f.replace("${0}",this.overrideIdentifiers.map(e=>s.createRegExp(e,!1).source).join("|")):p}}const h="override",p="\\[.*\\]$",f="\\[(${0})\\]$";t.OVERRIDE_PROPERTY_PATTERN=new RegExp(p),t.getDefaultValue=c;const g=new d;r.Registry.add(t.Extensions.Configuration,g),t.validateProperty=l,t.getScopes=function(){const e={},t=g.getConfigurationProperties();for(const n of Object.keys(t))e[n]=t[n].scope;return e.launch=3,e.task=3,e}}),define(t[14],n([1,0,15,18,8,38,5,40]),function(e,t,n,i,r,o,s,a){"use strict";function c(e,t){const n=Object.create(null);for(let i in e)l(n,i,e[i],t);return n}function l(e,t,n,i){const r=t.split("."),o=r.pop();let s=e;for(let e=0;e<r.length;e++){let n=r[e],o=s[n]
;switch(typeof o){case"undefined":o=s[n]=Object.create(null);break;case"object":break;default:return void i(`Ignoring ${t} as ${r.slice(0,e+1).join(".")} is ${JSON.stringify(o)}`)}s=o}"object"==typeof s?s[o]=n:i(`Ignoring ${t} as ${r.join(".")} is ${JSON.stringify(s)}`)}function u(e,t){const n=t.shift();if(0!==t.length){if(-1!==Object.keys(e).indexOf(n)){const i=e[n];"object"!=typeof i||Array.isArray(i)||(u(i,t),0===Object.keys(i).length&&delete e[n])}}else delete e[n]}function d(e,t,n){const i=function(e,t){let n=e;for(const e of t){if("object"!=typeof n||null===n)return;n=n[e]}return n}(e,t.split("."));return void 0===i?n:i}function h(e,t,n){Object.keys(t).forEach(r=>{r in e?i.isObject(e[r])&&i.isObject(t[r])?h(e[r],t[r],n):n&&(e[r]=t[r]):e[r]=t[r]})}function p(e){return e.substring(1,e.length-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.IConfigurationService=s.createDecorator("configurationService"),t.isConfigurationOverrides=function(e){
return e&&"object"==typeof e&&(!e.overrideIdentifier||"string"==typeof e.overrideIdentifier)&&(!e.resource||e.resource instanceof r.URI)};!function(e){e[e.USER=1]="USER",e[e.WORKSPACE=2]="WORKSPACE",e[e.WORKSPACE_FOLDER=3]="WORKSPACE_FOLDER",e[e.DEFAULT=4]="DEFAULT",e[e.MEMORY=5]="MEMORY"}(t.ConfigurationTarget||(t.ConfigurationTarget={})),t.ConfigurationTargetToString=function(e){switch(e){case 1:return"USER";case 2:return"WORKSPACE";case 3:return"WORKSPACE_FOLDER";case 4:return"DEFAULT";case 5:return"MEMORY"}},t.compare=function(e,t){const i=t.keys.filter(t=>-1===e.keys.indexOf(t)),r=e.keys.filter(e=>-1===t.keys.indexOf(e)),o=[];for(const i of e.keys){const r=d(e.contents,i),s=d(t.contents,i);n.equals(r,s)||o.push(i)}return{added:i,removed:r,updated:o}},t.toOverrides=function(e,t){const n=[],i=o.Registry.as(a.Extensions.Configuration).getConfigurationProperties();for(const r of Object.keys(e))if(a.OVERRIDE_PROPERTY_PATTERN.test(r)){const o={};for(const t in e[r])i[t]&&i[t].overridable&&(o[t]=e[r][t])
;n.push({identifiers:[p(r).trim()],contents:c(o,t)})}return n},t.toValuesTree=c,t.addToValueTree=l,t.removeFromValueTree=function(e,t){u(e,t.split("."))},t.getConfigurationValue=d,t.merge=h,t.getConfigurationKeys=function(){const e=o.Registry.as(a.Extensions.Configuration).getConfigurationProperties();return Object.keys(e)},t.getDefaultValues=function(){const e=Object.create(null),t=o.Registry.as(a.Extensions.Configuration).getConfigurationProperties();for(let n in t)l(e,n,t[n].default,e=>console.error(`Conflict in default settings: ${e}`));return e},t.overrideIdentifierFromKey=p,t.keyFromOverrideIdentifier=function(e){return`[${e}]`},t.getMigratedSettingValue=function(e,t,n){const i=e.inspect(t),r=e.inspect(n);return void 0!==i.user||void 0!==i.workspace||void 0!==i.workspaceFolder?i.value:void 0!==r.user||void 0!==r.workspace||void 0!==r.workspaceFolder?r.value:i.default}}),define(t[68],n([1,0,36,26,21,18,15,40,14]),function(e,t,n,i,r,o,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0})
;class l{constructor(e={},t=[],n=[]){this._contents=e,this._keys=t,this._overrides=n,this.isFrozen=!1}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}getValue(e){return e?c.getConfigurationValue(this.contents,e):this.contents}override(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||"object"!=typeof t||!Object.keys(t).length)return this;let n={};for(const e of r.distinct([...Object.keys(this.contents),...Object.keys(t)])){let i=this.contents[e],r=t[e];r&&("object"==typeof i&&"object"==typeof r?(i=s.deepClone(i),this.mergeContents(i,r)):i=r),n[e]=i}return new l(n)}merge(...e){const t=s.deepClone(this.contents),n=s.deepClone(this.overrides),i=[...this.keys];for(const o of e){this.mergeContents(t,o.contents);for(const e of o.overrides){const[t]=n.filter(t=>r.equals(t.identifiers,e.identifiers));t?this.mergeContents(t.contents,e.contents):n.push(s.deepClone(e))}
for(const e of o.keys)-1===i.indexOf(e)&&i.push(e)}return new l(t,i,n)}freeze(){return this.isFrozen=!0,this}mergeContents(e,t){for(const n of Object.keys(t))n in e&&o.isObject(e[n])&&o.isObject(t[n])?this.mergeContents(e[n],t[n]):e[n]=s.deepClone(t[n])}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?s.deepFreeze(e):e}getContentsForOverrideIdentifer(e){for(const t of this.overrides)if(-1!==t.identifiers.indexOf(e))return t.contents;return null}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),c.addToValueTree(this.contents,e,t,e=>{throw new Error(e)})}removeValue(e){this.removeKey(e)&&c.removeFromValueTree(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)0===e.indexOf(this.keys[n])&&(t=n);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return-1!==t&&(this.keys.splice(t,1),!0)}}t.ConfigurationModel=l;class u extends l{constructor(){const e=c.getDefaultValues(),t=c.getConfigurationKeys(),n=[]
;for(const t of Object.keys(e))a.OVERRIDE_PROPERTY_PATTERN.test(t)&&n.push({identifiers:[c.overrideIdentifierFromKey(t).trim()],contents:c.toValuesTree(e[t],e=>console.error(`Conflict in default settings file: ${e}`))});super(e,t,n)}}t.DefaultConfigurationModel=u;class d{constructor(e){this._name=e,this._configurationModel=null,this._parseErrors=[]}get configurationModel(){return this._configurationModel||new l}get errors(){return this._parseErrors}parse(e){if(e){const t=this.parseContent(e),n=this.parseRaw(t);this._configurationModel=new l(n.contents,n.keys,n.overrides)}}parseContent(e){function t(e){Array.isArray(o)?o.push(e):r&&(o[r]=e)}let i={},r=null,o=[],s=[],a=[],c={onObjectBegin:()=>{let e={};t(e),s.push(o),o=e,r=null},onObjectProperty:e=>{r=e},onObjectEnd:()=>{o=s.pop()},onArrayBegin:()=>{let e=[];t(e),s.push(o),o=e,r=null},onArrayEnd:()=>{o=s.pop()},onLiteralValue:t,onError:(e,t,n)=>{a.push({error:e,offset:t,length:n})}};if(e)try{n.visit(e,c),i=o[0]||{}}catch(e){
console.error(`Error while parsing settings file ${this._name}: ${e}`),this._parseErrors=[e]}return i}parseRaw(e){return{contents:c.toValuesTree(e,e=>console.error(`Conflict in settings file ${this._name}: ${e}`)),keys:Object.keys(e),overrides:c.toOverrides(e,e=>console.error(`Conflict in settings file ${this._name}: ${e}`))}}}t.ConfigurationModelParser=d;class h{constructor(e,t,n=new l,r=new i.ResourceMap,o=new l,s=new i.ResourceMap,a=!0){this._defaultConfiguration=e,this._userConfiguration=t,this._workspaceConfiguration=n,this._folderConfigurations=r,this._memoryConfiguration=o,this._memoryConfigurationByResource=s,this._freeze=a,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new i.ResourceMap}getValue(e,t,n){return this.getConsolidateConfigurationModel(t,n).getValue(e)}updateValue(e,t,n={}){let i;n.resource?(i=this._memoryConfigurationByResource.get(n.resource))||(i=new l,this._memoryConfigurationByResource.set(n.resource,i)):i=this._memoryConfiguration,
void 0===t?i.removeValue(e):i.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,n){const i=this.getConsolidateConfigurationModel(t,n),r=this.getFolderConfigurationModelForResource(t.resource,n),o=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration;return{default:t.overrideIdentifier?this._defaultConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._defaultConfiguration.freeze().getValue(e),user:t.overrideIdentifier?this._userConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._userConfiguration.freeze().getValue(e),workspace:n?t.overrideIdentifier?this._workspaceConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._workspaceConfiguration.freeze().getValue(e):void 0,workspaceFolder:r?t.overrideIdentifier?r.freeze().override(t.overrideIdentifier).getValue(e):r.freeze().getValue(e):void 0,
memory:t.overrideIdentifier?o.override(t.overrideIdentifier).getValue(e):o.getValue(e),value:i.getValue(e)}}keys(e){const t=this.getFolderConfigurationModelForResource(void 0,e);return{default:this._defaultConfiguration.freeze().keys,user:this._userConfiguration.freeze().keys,workspace:this._workspaceConfiguration.freeze().keys,workspaceFolder:t?t.freeze().keys:[]}}updateDefaultConfiguration(e){this._defaultConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateUserConfiguration(e){this._userConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateWorkspaceConfiguration(e){this._workspaceConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateFolderConfiguration(e,t){this._folderConfigurations.set(e,t),this._foldersConsolidatedConfigurations.delete(e)}deleteFolderConfiguration(e){this.folders.delete(e),
this._foldersConsolidatedConfigurations.delete(e)}get defaults(){return this._defaultConfiguration}get user(){return this._userConfiguration}get workspace(){return this._workspaceConfiguration}get folders(){return this._folderConfigurations}getConsolidateConfigurationModel(e,t){let n=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?n.override(e.overrideIdentifier):n}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const i=t.getFolder(e);i&&(n=this.getFolderConsolidatedConfiguration(i.uri)||n);const r=this._memoryConfigurationByResource.get(e);r&&(n=n.merge(r))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this._userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),
this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),i=this._folderConfigurations.get(e);i?(t=n.merge(i),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const n=t.getFolder(e);if(n)return this._folderConfigurations.get(n.uri)||null}return null}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this._userConfiguration.contents,overrides:this._userConfiguration.overrides,keys:this._userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:this._folderConfigurations.keys().reduce((e,t)=>{
const{contents:n,overrides:i,keys:r}=this._folderConfigurations.get(t);return e[t.toString()]={contents:n,overrides:i,keys:r},e},Object.create({})),isComplete:!0}}allKeys(e){let t=this.keys(e),n=[...t.default];const i=e=>{for(const t of e)-1===n.indexOf(t)&&n.push(t)};i(t.user),i(t.workspace);for(const e of this.folders.keys())i(this.folders.get(e).keys);return n}}t.Configuration=h;class p{doesConfigurationContains(e,t){let n,i=e.contents,r=c.toValuesTree({[t]:!0},()=>{});for(;"object"==typeof r&&(n=Object.keys(r)[0]);){if(!(i=i[n]))return!1;r=r[n]}return!0}updateKeys(e,t,n){for(const n of t)e.setValue(n,{})}}t.AbstractConfigurationChangeEvent=p;class f extends p{constructor(e=new l,t=new i.ResourceMap){super(),this._changedConfiguration=e,this._changedConfigurationByResource=t}get changedConfiguration(){return this._changedConfiguration}get changedConfigurationByResource(){return this._changedConfigurationByResource}change(e,t){if(e instanceof f){
this._changedConfiguration=this._changedConfiguration.merge(e._changedConfiguration);for(const t of e._changedConfigurationByResource.keys()){let n=this.getOrSetChangedConfigurationForResource(t);n=n.merge(e._changedConfigurationByResource.get(t)),this._changedConfigurationByResource.set(t,n)}}else this.changeWithKeys(e,t);return this}telemetryData(e,t){return this._source=e,this._sourceConfig=t,this}get affectedKeys(){const e=[...this._changedConfiguration.keys];return this._changedConfigurationByResource.forEach(t=>e.push(...t.keys)),r.distinct(e)}get source(){return this._source}get sourceConfig(){return this._sourceConfig}affectsConfiguration(e,t){let n=[this._changedConfiguration];if(t){let e=this._changedConfigurationByResource.get(t);e&&n.push(e)}else n.push(...this._changedConfigurationByResource.values());for(const t of n)if(this.doesConfigurationContains(t,e))return!0;return!1}changeWithKeys(e,t){let n=t?this.getOrSetChangedConfigurationForResource(t):this._changedConfiguration;this.updateKeys(n,e)}
getOrSetChangedConfigurationForResource(e){let t=this._changedConfigurationByResource.get(e);return t||(t=new l,this._changedConfigurationByResource.set(e,t)),t}}t.ConfigurationChangeEvent=f}),define(t[129],n([1,0,6,19,68,112,2]),function(e,t,n,i,r,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class a extends n.Disposable{constructor(e){super(),this.settingsPath=e,this._onDidChangeConfiguration=this._register(new s.Emitter),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event}initialize(){return this.initializePromise||(this.initializePromise=new Promise((e,t)=>{this.userConfigModelWatcher=new o.ConfigWatcher(this.settingsPath,{changeBufferDelay:300,onError:e=>i.onUnexpectedError(e),defaultConfig:new r.ConfigurationModelParser(this.settingsPath),parse:(e,t)=>{const n=new r.ConfigurationModelParser(this.settingsPath);return n.parse(e),[...n.errors],n},initCallback:()=>e(void 0)}),this._register(this.userConfigModelWatcher),
this._register(this.userConfigModelWatcher.onDidUpdateConfiguration(()=>this._onDidChangeConfiguration.fire(this.userConfigModelWatcher.getConfig().configurationModel)))})),this.initializePromise.then(()=>this.userConfigModelWatcher.getConfig().configurationModel)}initializeSync(){return this.initialize(),this.userConfigModelWatcher.getConfig().configurationModel}reload(){return this.initialize().then(()=>new Promise(e=>this.userConfigModelWatcher.reload(t=>e(t.configurationModel))))}}t.UserConfiguration=a});var s=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define(t[130],n([1,0,38,40,6,14,68,2,9,129]),function(e,t,n,i,r,a,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let h=class extends r.Disposable{constructor(e){super(),this._onDidChangeConfiguration=this._register(new l.Emitter),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this.userConfiguration=this._register(new d.UserConfiguration(e.appSettingsPath))
;const t=new c.DefaultConfigurationModel,r=this.userConfiguration.initializeSync();this._configuration=new c.Configuration(t,r),this._register(this.userConfiguration.onDidChangeConfiguration(e=>this.onDidChangeUserConfiguration(e))),this._register(n.Registry.as(i.Extensions.Configuration).onDidUpdateConfiguration(e=>this.onDidDefaultConfigurationChange(e)))}get configuration(){return this._configuration}getConfigurationData(){return this.configuration.toData()}getValue(e,t){const n="string"==typeof e?e:void 0,i=a.isConfigurationOverrides(e)?e:a.isConfigurationOverrides(t)?t:{};return this.configuration.getValue(n,i,void 0)}updateValue(e,t,n,i){return Promise.reject(new Error("not supported"))}inspect(e){return this.configuration.inspect(e,{},void 0)}keys(){return this.configuration.keys(void 0)}reloadConfiguration(e){return e?Promise.resolve(void 0):this.userConfiguration.reload().then(e=>this.onDidChangeUserConfiguration(e))}onDidChangeUserConfiguration(e){
const{added:t,updated:n,removed:i}=a.compare(this._configuration.user,e),r=[...t,...n,...i];r.length&&(this._configuration.updateUserConfiguration(e),this.trigger(r,1))}onDidDefaultConfigurationChange(e){this._configuration.updateDefaultConfiguration(new c.DefaultConfigurationModel),this.trigger(e,4)}trigger(e,t){this._onDidChangeConfiguration.fire((new c.ConfigurationChangeEvent).change(e).telemetryData(t,this.getTargetConfiguration(t)))}getTargetConfiguration(e){switch(e){case 4:return this._configuration.defaults.contents;case 1:return this._configuration.user.contents}return{}}};h=o([s(0,u.IEnvironmentService)],h),t.ConfigurationService=h}),define(t[72],n([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REMOTE_HOST_SCHEME="vscode-remote",t.getRemoteAuthority=function(e){return e.scheme===t.REMOTE_HOST_SCHEME?e.authority:void 0}}),define(t[132],n([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),
t.connectRemoteAgentManagement=function(e,t,n,i,r){throw new Error("Not implemented")},t.connectRemoteAgentExtensionHost=function(e,t,n,i){throw new Error("Not implemented")}}),define(t[133],n([1,0,2,6,8,29]),function(e,t,n,i,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REMOTE_FILE_SYSTEM_CHANNEL_NAME="remotefilesystem";class s extends i.Disposable{constructor(e){super(),this._onDidChange=this._register(new n.Emitter),this.onDidChangeFile=this._onDidChange.event,this._onDidChangeCapabilities=this._register(new n.Emitter),this.onDidChangeCapabilities=this._onDidChangeCapabilities.event,this._session=o.generateUuid(),this._channel=e,this.setCaseSensitive(!0),this._channel.listen("filechange",[this._session])(e=>{this._onDidChange.fire(e.map(s._createFileChange))})}dispose(){super.dispose()}setCaseSensitive(e){let t=10;e&&(t|=1024),this.capabilities=t,this._onDidChangeCapabilities.fire(void 0)}watch(e,t){const n=Math.random();return this._channel.call("watch",[this._session,n,e,t]),
i.toDisposable(()=>{this._channel.call("unwatch",[this._session,n])})}static _createFileChange(e){return{resource:r.URI.revive(e.resource),type:e.type}}static _asBuffer(e){return Buffer.isBuffer(e)?e:Buffer.from(e.buffer,e.byteOffset,e.byteLength)}stat(e){return this._channel.call("stat",[e])}readFile(e){return this._channel.call("readFile",[e])}writeFile(e,t,n){const i=s._asBuffer(t);return this._channel.call("writeFile",[e,i,n])}delete(e,t){return this._channel.call("delete",[e,t])}mkdir(e){return this._channel.call("mkdir",[e])}readdir(e){return this._channel.call("readdir",[e])}rename(e,t,n){return this._channel.call("rename",[e,t,n])}copy(e,t,n){return this._channel.call("copy",[e,t,n])}}t.RemoteExtensionsFileSystemProvider=s}),define(t[43],n([1,0,86,5,40,38]),function(e,t,n,i,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IRequestService=i.createDecorator("requestService2"),o.Registry.as(r.Extensions.Configuration).registerConfiguration({id:"http",order:15,title:n.localize(0,null),
type:"object",properties:{"http.proxy":{type:"string",pattern:"^https?://([^:]*(:[^@]*)?@)?([^:]+)(:\\d+)?/?$|^$",description:n.localize(1,null)},"http.proxyStrictSSL":{type:"boolean",default:!0,description:n.localize(2,null)},"http.proxyAuthorization":{type:["null","string"],default:null,description:n.localize(3,null)},"http.proxySupport":{type:"string",enum:["off","on","override"],enumDescriptions:[n.localize(4,null),n.localize(5,null),n.localize(6,null)],default:"override",description:n.localize(7,null)}}})}),define(t[30],n([1,0,5]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IStateService=n.createDecorator("stateService")}),define(t[25],n([1,0,10,7,30,2,5,111,3,6]),function(e,t,n,i,r,a,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ILifecycleService=c.createDecorator("lifecycleService");!function(e){e[e.CLOSE=1]="CLOSE",e[e.QUIT=2]="QUIT",e[e.RELOAD=3]="RELOAD",e[e.LOAD=4]="LOAD"}(t.UnloadReason||(t.UnloadReason={}))
;let h=class e extends d.Disposable{constructor(e,t){super(),this.logService=e,this.stateService=t,this.windowToCloseRequest=Object.create(null),this.oneTimeListenerTokenGenerator=0,this.windowCounter=0,this._quitRequested=!1,this._wasRestarted=!1,this._onBeforeShutdown=this._register(new a.Emitter),this.onBeforeShutdown=this._onBeforeShutdown.event,this._onWillShutdown=this._register(new a.Emitter),this.onWillShutdown=this._onWillShutdown.event,this._onBeforeWindowClose=this._register(new a.Emitter),this.onBeforeWindowClose=this._onBeforeWindowClose.event,this._onBeforeWindowUnload=this._register(new a.Emitter),this.onBeforeWindowUnload=this._onBeforeWindowUnload.event,this.handleRestarted()}get quitRequested(){return this._quitRequested}get wasRestarted(){return this._wasRestarted}handleRestarted(){this._wasRestarted=!!this.stateService.getItem(e.QUIT_FROM_RESTART_MARKER),this._wasRestarted&&this.stateService.removeItem(e.QUIT_FROM_RESTART_MARKER)}ready(){this.registerListeners()}registerListeners(){
const e=()=>{this._quitRequested||(this.logService.trace("Lifecycle#app.on(before-quit)"),this._quitRequested=!0,this.logService.trace("Lifecycle#onBeforeShutdown.fire()"),this._onBeforeShutdown.fire(),u.isMacintosh&&0===this.windowCounter&&this.beginOnWillShutdown())};n.app.addListener("before-quit",e);const t=()=>{this.logService.trace("Lifecycle#app.on(window-all-closed)"),!this._quitRequested&&u.isMacintosh||n.app.quit()};n.app.addListener("window-all-closed",t),n.app.once("will-quit",i=>{this.logService.trace("Lifecycle#app.on(will-quit)"),i.preventDefault();this.beginOnWillShutdown().finally(()=>{this.resolvePendingQuitPromise(!1),n.app.removeListener("before-quit",e),n.app.removeListener("window-all-closed",t),n.app.quit()})})}beginOnWillShutdown(){if(this.pendingWillShutdownPromise)return this.pendingWillShutdownPromise;this.logService.trace("Lifecycle#onWillShutdown.fire()");const e=[];return this._onWillShutdown.fire({join(t){t&&e.push(t)}}),
this.pendingWillShutdownPromise=Promise.all(e).then(()=>void 0,e=>this.logService.error(e)),this.pendingWillShutdownPromise}registerWindow(e){this.windowCounter++,e.win.on("close",t=>{const n=e.id;this.windowToCloseRequest[n]?delete this.windowToCloseRequest[n]:(this.logService.trace(`Lifecycle#window.on('close') - window ID ${e.id}`),t.preventDefault(),this.unload(e,1).then(t=>{t?delete this.windowToCloseRequest[n]:(this.windowToCloseRequest[n]=!0,this.logService.trace(`Lifecycle#onBeforeWindowClose.fire() - window ID ${n}`),this._onBeforeWindowClose.fire(e),e.close())}))}),e.win.on("closed",t=>{this.logService.trace(`Lifecycle#window.on('closed') - window ID ${e.id}`),this.windowCounter--,0!==this.windowCounter||u.isMacintosh&&!this._quitRequested||this.beginOnWillShutdown()})}unload(e,t){if(!e.isReady)return Promise.resolve(!1);this.logService.trace(`Lifecycle#unload() - window ID ${e.id}`);const n=this._quitRequested?2:t
;return this.onBeforeUnloadWindowInRenderer(e,n).then(t=>t?(this.logService.trace(`Lifecycle#unload() - veto in renderer (window ID ${e.id})`),this.handleWindowUnloadVeto(t)):this.onBeforeUnloadWindowInMain(e,n).then(t=>t?(this.logService.trace(`Lifecycle#unload() - veto in main (window ID ${e.id})`),this.handleWindowUnloadVeto(t)):(this.logService.trace(`Lifecycle#unload() - no veto (window ID ${e.id})`),this.onWillUnloadWindowInRenderer(e,n).then(()=>!1))))}handleWindowUnloadVeto(e){return!!e&&(this.resolvePendingQuitPromise(!0),this._quitRequested=!1,!0)}resolvePendingQuitPromise(e){this.pendingQuitPromiseResolve&&(this.pendingQuitPromiseResolve(e),this.pendingQuitPromiseResolve=null,this.pendingQuitPromise=null)}onBeforeUnloadWindowInRenderer(e,t){return new Promise(i=>{const r=this.oneTimeListenerTokenGenerator++,o=`vscode:ok${r}`,s=`vscode:cancel${r}`;n.ipcMain.once(o,()=>{i(!1)}),n.ipcMain.once(s,()=>{i(!0)}),e.send("vscode:onBeforeUnload",{okChannel:o,cancelChannel:s,reason:t})})}
onBeforeUnloadWindowInMain(e,t){const n=[];return this._onBeforeWindowUnload.fire({reason:t,window:e,veto(e){n.push(e)}}),l.handleVetos(n,e=>this.logService.error(e))}onWillUnloadWindowInRenderer(e,t){return new Promise(i=>{const r=`vscode:reply${this.oneTimeListenerTokenGenerator++}`;n.ipcMain.once(r,()=>i()),e.send("vscode:onWillUnload",{replyChannel:r,reason:t})})}quit(t){return this.pendingQuitPromise?this.pendingQuitPromise:(this.logService.trace(`Lifecycle#quit() - from update: ${t}`),t&&this.stateService.setItem(e.QUIT_FROM_RESTART_MARKER,!0),this.pendingQuitPromise=new Promise(e=>{this.pendingQuitPromiseResolve=e,this.logService.trace("Lifecycle#quit() - calling app.quit()"),n.app.quit()}),this.pendingQuitPromise)}relaunch(t){this.logService.trace("Lifecycle#relaunch()");const i=process.argv.slice(1);if(t&&t.addArgs&&i.push(...t.addArgs),t&&t.removeArgs)for(const e of t.removeArgs){const t=i.indexOf(e);t>=0&&i.splice(t,1)}let r=!1;n.app.once("quit",()=>{if(!r){
this.stateService.setItem(e.QUIT_FROM_RESTART_MARKER,!0);try{if(u.isWindows){const e=process.env.VSCODE_CWD;e&&process.chdir(e)}}catch(e){this.logService.error(e)}this.logService.trace("Lifecycle#relaunch() - calling app.relaunch()"),n.app.relaunch({args:i})}}),this.quit().then(e=>r=e)}kill(e){this.logService.trace("Lifecycle#kill()"),n.app.exit(e)}};h.QUIT_FROM_RESTART_MARKER="quit.from.restart",h=o([s(0,i.ILogService),s(1,r.IStateService)],h),t.LifecycleService=h}),define(t[137],n([1,0,15,49,9,10,12,7,25,30,56,6]),function(e,t,n,r,a,c,l,u,d,h,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let g=class{constructor(e,t,n,i,r,o){this.machineId=e,this.userEnv=t,this.environmentService=n,this.lifecycleService=i,this.stateService=r,this.logService=o,this.barrier=new l.Barrier}get _whenReady(){this.window=new c.BrowserWindow({show:!1,backgroundColor:p.getBackgroundColor(this.stateService),webPreferences:{images:!1,webaudio:!1,webgl:!1,disableBlinkFeatures:"Auxclick"}});const t=n.assign({
appRoot:this.environmentService.appRoot,machineId:this.machineId,nodeCachedDataDir:this.environmentService.nodeCachedDataDir,userEnv:this.userEnv}),i=`${e.toUrl("vs/code/electron-browser/sharedProcess/sharedProcess.html")}?config=${encodeURIComponent(JSON.stringify(t))}`;this.window.loadURL(i);const r=e=>{this.logService.trace("SharedProcess#close prevented"),e.preventDefault(),this.window&&this.window.isVisible()&&this.window.hide()};this.window.on("close",r);const o=[];return this.lifecycleService.onWillShutdown(()=>{f.dispose(o),this.window&&this.window.removeListener("close",r),setTimeout(()=>{try{this.window&&this.window.close()}catch(e){}this.window=null},0)}),new Promise(e=>{c.ipcMain.once("handshake:hello",({sender:t})=>{t.send("handshake:hey there",{sharedIPCHandle:this.environmentService.sharedIPCHandle,args:this.environmentService.args,logLevel:this.logService.getLevel()}),o.push(f.toDisposable(()=>t.send("handshake:goodbye"))),c.ipcMain.once("handshake:im ready",()=>e(void 0))})})}spawn(e){
this.userEnv=Object.assign({},this.userEnv,e),this.barrier.open()}whenReady(){return i(this,void 0,void 0,function*(){yield this.barrier.wait(),yield this._whenReady})}toggle(){!this.window||this.window.isVisible()?this.hide():this.show()}show(){this.window&&(this.window.show(),this.window.webContents.openDevTools())}hide(){this.window&&(this.window.webContents.closeDevTools(),this.window.hide())}};o([r.memoize],g.prototype,"_whenReady",null),g=o([s(2,a.IEnvironmentService),s(3,d.ILifecycleService),s(4,h.IStateService),s(5,u.ILogService)],g),t.SharedProcess=g}),define(t[138],n([1,0,4,16,9,34,18,7,24]),function(e,t,n,i,r,a,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class d{constructor(e,t){this.dbPath=e,this.onError=t,this._database=null,this.lastFlushedSerializedDatabase=null}get database(){return this._database||(this._database=this.loadSync()),this._database}init(){return u.readFile(this.dbPath).then(e=>{try{this.lastFlushedSerializedDatabase=e.toString(),
this._database=JSON.parse(this.lastFlushedSerializedDatabase)}catch(e){this._database={}}},e=>{"ENOENT"!==e.code&&this.onError(e),this._database={}})}loadSync(){try{return this.lastFlushedSerializedDatabase=i.readFileSync(this.dbPath).toString(),JSON.parse(this.lastFlushedSerializedDatabase)}catch(e){return"ENOENT"!==e.code&&this.onError(e),{}}}getItem(e,t){const n=this.database[e];return c.isUndefinedOrNull(n)?t:n}setItem(e,t){if(c.isUndefinedOrNull(t))return this.removeItem(e);("string"!=typeof t&&"number"!=typeof t&&"boolean"!=typeof t||this.database[e]!==t)&&(this.database[e]=t,this.saveSync())}removeItem(e){c.isUndefined(this.database[e])||(this.database[e]=void 0,this.saveSync())}saveSync(){const e=JSON.stringify(this.database,null,4);if(e!==this.lastFlushedSerializedDatabase)try{a.writeFileAndFlushSync(this.dbPath,e),this.lastFlushedSerializedDatabase=e}catch(e){this.onError(e)}}}t.FileStorage=d;let h=class e{constructor(t,i){this.fileStorage=new d(n.join(t.userDataPath,e.STATE_FILE),e=>i.error(e))}
init(){return this.fileStorage.init()}getItem(e,t){return this.fileStorage.getItem(e,t)}setItem(e,t){this.fileStorage.setItem(e,t)}removeItem(e){this.fileStorage.removeItem(e)}};h.STATE_FILE="storage.json",h=o([s(0,r.IEnvironmentService),s(1,l.ILogService)],h),t.StateService=h}),define(t[139],n([1,0,5,2,6,7,9,118,4,24,17]),function(e,t,n,i,r,a,c,l,u,d,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IStorageMainService=n.createDecorator("storageMainService");let p=class t extends r.Disposable{constructor(e,t){super(),this.logService=e,this.environmentService=t,this._onDidChangeStorage=this._register(new i.Emitter),this._onWillSaveState=this._register(new i.Emitter),this.storage=new l.Storage(new l.InMemoryStorageDatabase)}get onDidChangeStorage(){return this._onDidChangeStorage.event}get onWillSaveState(){return this._onWillSaveState.event}get items(){return this.storage.items}get storagePath(){
return this.environmentService.extensionTestsLocationURI?l.SQLiteStorageDatabase.IN_MEMORY_PATH:u.join(this.environmentService.globalStorageHome,t.STORAGE_NAME)}createLogginOptions(){return{logTrace:this.logService.getLevel()===a.LogLevel.Trace?e=>this.logService.trace(e):void 0,logError:e=>this.logService.error(e)}}initialize(){return this.initializePromise||(this.initializePromise=this.doInitialize()),this.initializePromise}doInitialize(){const e=this.storagePath===l.SQLiteStorageDatabase.IN_MEMORY_PATH;let t;return(t=e?Promise.resolve(!0):d.exists(this.storagePath)).then(t=>(this.storage.dispose(),this.storage=new l.Storage(new l.SQLiteStorageDatabase(this.storagePath,{logging:this.createLogginOptions()})),this._register(this.storage.onDidChangeStorage(e=>this._onDidChangeStorage.fire({key:e}))),this.storage.init().then(()=>{let n
;return n=e||t?Promise.resolve():this.migrateGlobalStorage().then(()=>this.logService.info("[storage] migrated global storage"),e=>this.logService.error(`[storage] migration error ${e}`))})))}migrateGlobalStorage(){this.logService.info("[storage] migrating global storage from localStorage into SQLite");const t=u.join(this.environmentService.userDataPath,"Local Storage","file__0.vscmig");return d.exists(t).then(n=>n?d.readdir(this.environmentService.extensionsPath).then(n=>{const i=new Map
;["editorFontInfo","peekViewLayout","expandSuggestionDocs","extensionsIdentifiers/disabled","integrityService","telemetry.lastSessionDate","telemetry.instanceId","telemetry.firstSessionDate","workbench.sidebar.width","workbench.panel.width","workbench.panel.height","workbench.panel.sizeBeforeMaximized","workbench.activity.placeholderViewlets","colorThemeData","iconThemeData","workbench.telemetryOptOutShown","workbench.hide.welcome","releaseNotes/lastVersion","debug.actionswidgetposition","debug.actionswidgety","editor.neverPromptForLargeFiles","menubar/electronFixRecommended","learnMoreDirtyWriteError","extensions.ignoredAutoUpdateExtension","askToInstallRemoteServerExtension","hasNotifiedOfSettingsAutosave","commandPalette.mru.cache","commandPalette.mru.counter","parts-splash-data","terminal.integrated.neverMeasureRenderTime","terminal.integrated.neverSuggestSelectWindowsShell","memento/workbench.parts.editor","memento/workbench.view.search","langugage.update.donotask","extensionsAssistant/languagePackSuggestionIgnore","workbench.panel.pinnedPanels","workbench.activity.pinnedViewlets","extensionsAssistant/ignored_recommendations","extensionsAssistant/recommendations","extensionsAssistant/importantRecommendationsIgnore","extensionsAssistant/fileExtensionsSuggestionIgnore","nps/skipVersion","nps/lastSessionDate","nps/sessionCount","nps/isCandidate","allExperiments","currentOrPreviouslyRunExperiments","update/win32-64bits","update/win32-fast-updates","update/lastKnownVersion","update/updateNotificationTime"].forEach(e=>i.set(e.toLowerCase(),e))
;const r=["Microsoft","GitHub"],o=["ms-vscode.Go","WallabyJs.quokka-vscode","Telerik.nativescript","Shan.code-settings-sync","ritwickdey.LiveServer","PKief.material-icon-theme","PeterJausovec.vscode-docker","ms-vscode.PowerShell","LaurentTreguier.vscode-simple-icons","KnisterPeter.vscode-github","DotJoshJohnson.xml","Dart-Code.dart-code","alefragnani.Bookmarks"];return n.forEach(e=>{let t;if(t=e.indexOf("-")>=0?e.substring(0,e.lastIndexOf("-")):e){for(let e=0;e<r.length;e++){const n=r[e];if(h.startsWith(t,`${n.toLowerCase()}.`)){t=`${n}${t.substr(n.length)}`;break}}for(let e=0;e<o.length;e++){const n=o[e];if(t===n.toLowerCase()){t=n;break}}i.set(t.toLowerCase(),t)}}),new Promise((t,n)=>{e(["vscode-sqlite3"],t,n)}).then(e=>new Promise((n,r)=>{const o=(e,t,n)=>{if(h.endsWith(t,n.toLowerCase())){const i=e.value.toString("utf16le"),r=t.substring(0,t.length-n.length)+n;return this.store(r,i),!0}return!1},s=new e.Database(t,e=>{if(e)return s&&s.close(),r(e);s.all("SELECT key, value FROM ItemTable",(e,t)=>{
if(e)return s.close(),r(e);try{t.forEach(e=>{let t=e.key;if(0!==t.indexOf("storage://global/"))return;t=t.substr("storage://global/".length);const n=i.get(t);if(n){const t=e.value.toString("utf16le");this.store(n,t)}else if(h.endsWith(t,".hidden")||h.startsWith(t,"experiments.")){const n=e.value.toString("utf16le");this.store(t,n)}else o(e,t,".sessionCount")||o(e,t,".lastSessionDate")||o(e,t,".skipVersion")||o(e,t,".isCandidate")||o(e,t,".editedCount")||o(e,t,".editedDate")}),s.close()}catch(e){return s.close(),r(e)}n()})})}))}):Promise.resolve())}get(e,t){return this.storage.get(e,t)}getBoolean(e,t){return this.storage.getBoolean(e,t)}getInteger(e,t){return this.storage.getInteger(e,t)}store(e,t){return this.storage.set(e,t)}remove(e){return this.storage.delete(e)}close(){return this._onWillSaveState.fire(),this.storage.close()}checkIntegrity(e){return this.storage.checkIntegrity(e)}};p.STORAGE_NAME="state.vscdb",p=o([s(0,a.ILogService),s(1,c.IEnvironmentService)],p),t.StorageMainService=p}),
define(t[32],n([1,0,5]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITelemetryService=n.createDecorator("telemetryService")}),define(t[141],n([1,0,87,17,5,14,40,6,15,38]),function(e,t,n,i,r,a,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let h=class{constructor(e,t){this._configurationService=t,this._disposables=[],this._cleanupPatterns=[],this._appender=e.appender,this._commonProperties=e.commonProperties||Promise.resolve({}),this._piiPaths=e.piiPaths||[],this._userOptIn=!0,this._cleanupPatterns=[/file:\/\/\/.*?\/resources\/app\//gi];for(let e of this._piiPaths)this._cleanupPatterns.push(new RegExp(i.escapeRegExpCharacters(e),"gi"));this._configurationService&&(this._updateUserOptIn(),this._configurationService.onDidChangeConfiguration(this._updateUserOptIn,this,this._disposables),this.publicLog("optInStatus",{optIn:this._userOptIn}),this._commonProperties.then(e=>{const t=/^[a-f0-9]+$/i.test(e["common.machineId"])
;this.publicLog("machineIdFallback",{usingFallbackGuid:!t})}))}_updateUserOptIn(){const e=this._configurationService.getValue(p);this._userOptIn=e?e.enableTelemetry:this._userOptIn}get isOptedIn(){return this._userOptIn}getTelemetryInfo(){return this._commonProperties.then(e=>{return{sessionId:e.sessionID,instanceId:e["common.instanceId"],machineId:e["common.machineId"]}})}dispose(){this._disposables=l.dispose(this._disposables)}publicLog(e,t,n){return this._userOptIn?this._commonProperties.then(i=>{t=u.mixin(t,i),t=u.cloneAndChange(t,e=>{if("string"==typeof e)return this._cleanupInfo(e,n)}),this._appender.log(e,t)},e=>{console.error(e)}):Promise.resolve(void 0)}_cleanupInfo(e,t){let n=e;if(t){const t=[];for(let n of this._cleanupPatterns)for(;;){const i=n.exec(e);if(!i)break;t.push([i.index,n.lastIndex])}const i=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,r=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(n="";;){const s=r.exec(e);if(!s)break
;!i.test(s[0])&&t.every(([e,t])=>s.index<e||s.index>=t)&&(n+=e.substring(o,s.index)+"<REDACTED: user-file-path>",o=r.lastIndex)}o<e.length&&(n+=e.substr(o))}for(let e of this._cleanupPatterns)n=n.replace(e,"");return n}};h.IDLE_START_EVENT_NAME="UserIdleStart",h.IDLE_STOP_EVENT_NAME="UserIdleStop",h=o([s(1,r.optional(a.IConfigurationService))],h),t.TelemetryService=h;const p="telemetry";d.Registry.as(c.Extensions.Configuration).registerConfiguration({id:p,order:110,type:"object",title:n.localize(0,null),properties:{"telemetry.enableTelemetry":{type:"boolean",description:n.localize(1,null),default:!0,tags:["usesOnlineServices"]}}})}),define(t[142],n([1,0,91,4,14,7]),function(e,t,n,i,r,a){"use strict";function c(e,t){return t.onDidChangeConfiguration(t=>{4!==t.source&&(e.publicLog("updateConfiguration",{configurationSource:r.ConfigurationTargetToString(t.source),configurationKeys:function(e){if(!e)return[];const t=[];return l(t,"",e),t}(t.sourceConfig)}),e.publicLog("updateConfigurationValues",{
configurationSource:r.ConfigurationTargetToString(t.source),configurationValues:function(e,t){if(!e)return[];return t.reduce((t,n)=>{const i=n.split(".").reduce((e,t)=>e&&"object"==typeof e?e[t]:void 0,e);return void 0!==i&&t.push({[n]:i}),t},[])}(t.sourceConfig,d)}))})}function l(e,t,n){n&&"object"==typeof n&&!Array.isArray(n)?Object.keys(n).forEach(i=>l(e,t?`${t}.${i}`:i,n[i])):e.push(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NullTelemetryService=new class{publicLog(e,t){return Promise.resolve(void 0)}getTelemetryInfo(){return Promise.resolve({instanceId:"someValue.instanceId",sessionId:"someValue.sessionId",machineId:"someValue.machineId"})}},t.combinedAppender=function(...e){return{log:(t,n)=>e.forEach(e=>e.log(t,n)),dispose:()=>Promise.all(e.map(e=>e.dispose()))}},t.NullAppender={log:()=>null,dispose:()=>Promise.resolve(null)};let u=class{constructor(e){this._logService=e,this.commonPropertiesRegex=/^sessionID$|^version$|^timestamp$|^commitHash$|^common\./}dispose(){
return Promise.resolve(void 0)}log(e,t){const n={};Object.keys(t).forEach(e=>{this.commonPropertiesRegex.test(e)||(n[e]=t[e])}),this._logService.trace(`telemetry/${e}`,n)}};u=o([s(0,a.ILogService)],u),t.LogAppender=u,t.telemetryURIDescriptor=function(e,t){const r=e&&e.fsPath;return r?{mimeType:n.guessMimeTypes(r).join(", "),scheme:e.scheme,ext:i.extname(r),path:t(r)}:{}}
;const d=["editor.fontFamily","editor.fontWeight","editor.fontSize","editor.lineHeight","editor.letterSpacing","editor.lineNumbers","editor.rulers","editor.wordSeparators","editor.tabSize","editor.indentSize","editor.insertSpaces","editor.detectIndentation","editor.roundedSelection","editor.scrollBeyondLastLine","editor.minimap.enabled","editor.minimap.side","editor.minimap.renderCharacters","editor.minimap.maxColumn","editor.find.seedSearchStringFromSelection","editor.find.autoFindInSelection","editor.wordWrap","editor.wordWrapColumn","editor.wrappingIndent","editor.mouseWheelScrollSensitivity","editor.multiCursorModifier","editor.quickSuggestions","editor.quickSuggestionsDelay","editor.parameterHints.enabled","editor.parameterHints.cycle","editor.autoClosingBrackets","editor.autoClosingQuotes","editor.autoSurround","editor.autoIndent","editor.formatOnType","editor.formatOnPaste","editor.suggestOnTriggerCharacters","editor.acceptSuggestionOnEnter","editor.acceptSuggestionOnCommitCharacter","editor.snippetSuggestions","editor.emptySelectionClipboard","editor.wordBasedSuggestions","editor.suggestSelection","editor.suggestFontSize","editor.suggestLineHeight","editor.tabCompletion","editor.selectionHighlight","editor.occurrencesHighlight","editor.overviewRulerLanes","editor.overviewRulerBorder","editor.cursorBlinking","editor.cursorSmoothCaretAnimation","editor.cursorStyle","editor.mouseWheelZoom","editor.fontLigatures","editor.hideCursorInOverviewRuler","editor.renderWhitespace","editor.renderControlCharacters","editor.renderIndentGuides","editor.renderLineHighlight","editor.codeLens","editor.folding","editor.showFoldingControls","editor.matchBrackets","editor.glyphMargin","editor.useTabStops","editor.trimAutoWhitespace","editor.stablePeek","editor.dragAndDrop","editor.formatOnSave","editor.colorDecorators","breadcrumbs.enabled","breadcrumbs.filePath","breadcrumbs.symbolPath","breadcrumbs.symbolSortOrder","breadcrumbs.useQuickPick","explorer.openEditors.visible","extensions.autoUpdate","files.associations","files.autoGuessEncoding","files.autoSave","files.autoSaveDelay","files.encoding","files.eol","files.hotExit","files.trimTrailingWhitespace","git.confirmSync","git.enabled","http.proxyStrictSSL","javascript.validate.enable","php.builtInCompletions.enable","php.validate.enable","php.validate.run","terminal.integrated.fontFamily","window.openFilesInNewWindow","window.restoreWindows","window.zoomLevel","workbench.editor.enablePreview","workbench.editor.enablePreviewFromQuickOpen","workbench.editor.showTabs","workbench.editor.highlightModifiedTabs","workbench.editor.swipeToNavigate","workbench.sideBar.location","workbench.startupEditor","workbench.statusBar.visible","workbench.welcome.enabled"]
;t.configurationTelemetry=c,t.keybindingsTelemetry=function(e,t){return t.onDidUpdateKeybindings(t=>{2===t.source&&t.keybindings&&e.publicLog("updateKeybindings",{bindings:t.keybindings.map(e=>({key:e.key,command:e.command,when:e.when,args:!!e.args||void 0}))})})}}),define(t[66],n([1,0,3,23,29,24]),function(e,t,n,i,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveCommonProperties=function(e,t,s,a){const c=Object.create(null);c["common.machineId"]=s,c.sessionID=r.generateUuid()+Date.now(),c.commitHash=e,c.version=t,c["common.platformVersion"]=(i.release()||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),c["common.platform"]=n.PlatformToString(n.platform),c["common.nodePlatform"]=process.platform,c["common.nodeArch"]=process.arch;let l=0;const u=Date.now();return Object.defineProperties(c,{timestamp:{get:()=>new Date,enumerable:!0},"common.timesincesessionstart":{get:()=>Date.now()-u,enumerable:!0},"common.sequence":{get:()=>l++,enumerable:!0}}),
o.readFile(a,"utf8").then(e=>(c["common.source"]=e.slice(0,30),c),e=>c)}}),define(t[144],n([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.appender=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,{eventName:n,data:i}){return this.appender.log(n,i),Promise.resolve(null)}}t.TelemetryAppenderChannel=n;class i{constructor(e){this.channel=e}log(e,t){return this.channel.call("log",{eventName:e,data:t}).then(void 0,e=>`Failed to log telemetry: ${console.warn(e)}`),Promise.resolve(null)}dispose(){}}t.TelemetryAppenderClient=i}),define(t[145],n([1,0,66]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.instanceStorageKey="telemetry.instanceId",t.currentSessionDateStorageKey="telemetry.currentSessionDate",t.firstSessionDateStorageKey="telemetry.firstSessionDate",t.lastSessionDateStorageKey="telemetry.lastSessionDate",t.resolveWorkbenchCommonProperties=function(e,i,r,o,s){
return n.resolveCommonProperties(i,r,o,s).then(n=>{const i=e.get(t.instanceStorageKey,0),r=e.get(t.firstSessionDateStorageKey,0),o=e.get(t.lastSessionDateStorageKey,0);return n["common.version.shell"]=process.versions&&process.versions.electron,n["common.version.renderer"]=process.versions&&process.versions.chrome,n["common.firstSessionDate"]=r,n["common.lastSessionDate"]=o||"",n["common.isNewSession"]=o?"0":"1",n["common.instanceId"]=i,n})}}),define(t[146],n([1,0,2,26,6,19,29,145]),function(e,t,n,i,r,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class c extends r.Disposable{constructor(e,t){super(),this.logService=e,this.storageMainService=t,this._onDidChangeItems=this._register(new n.Emitter),this.whenReady=this.init()}get onDidChangeItems(){return this._onDidChangeItems.event}init(){return this.storageMainService.initialize().then(void 0,e=>{o.onUnexpectedError(e),this.logService.error(e)}).then(()=>{this.initTelemetry(),this.registerListeners()})}initTelemetry(){
void 0===this.storageMainService.get(a.instanceStorageKey,void 0)&&this.storageMainService.store(a.instanceStorageKey,s.generateUuid());void 0===this.storageMainService.get(a.firstSessionDateStorageKey,void 0)&&this.storageMainService.store(a.firstSessionDateStorageKey,(new Date).toUTCString());const e=this.storageMainService.get(a.currentSessionDateStorageKey,void 0),t=(new Date).toUTCString();this.storageMainService.store(a.lastSessionDateStorageKey,void 0===e?null:e),this.storageMainService.store(a.currentSessionDateStorageKey,t)}registerListeners(){this._register(n.Event.debounce(this.storageMainService.onDidChangeStorage,(e,t)=>(e?e.push(t):e=[t],e),c.STORAGE_CHANGE_DEBOUNCE_TIME)(e=>{e.length&&this._onDidChangeItems.fire(this.serializeEvents(e))}))}serializeEvents(e){const t=new Map;return e.forEach(e=>t.set(e.key,this.storageMainService.get(e.key))),{items:i.mapToSerializable(t)}}listen(e,t){switch(t){case"onDidChangeItems":return this.onDidChangeItems}throw new Error(`Event not found: ${t}`)}
call(e,t,n){switch(t){case"getItems":return this.whenReady.then(()=>i.mapToSerializable(this.storageMainService.items));case"updateItems":return this.whenReady.then(()=>{const e=n;if(e.insert)for(const[t,n]of e.insert)this.storageMainService.store(t,n);e.delete&&e.delete.forEach(e=>this.storageMainService.remove(e))});case"checkIntegrity":return this.whenReady.then(()=>this.storageMainService.checkIntegrity(n))}throw new Error(`Call not found: ${t}`)}}c.STORAGE_CHANGE_DEBOUNCE_TIME=100,t.GlobalStorageDatabaseChannel=c;class l extends r.Disposable{constructor(e){super(),this.channel=e,this._onDidChangeItemsExternal=this._register(new n.Emitter),this.registerListeners()}get onDidChangeItemsExternal(){return this._onDidChangeItemsExternal.event}registerListeners(){this.onDidChangeItemsOnMainListener=this.channel.listen("onDidChangeItems")(e=>this.onDidChangeItemsOnMain(e))}onDidChangeItemsOnMain(e){Array.isArray(e.items)&&this._onDidChangeItemsExternal.fire({items:i.serializableToMap(e.items)})}getItems(){
return this.channel.call("getItems").then(e=>i.serializableToMap(e))}updateItems(e){let t=0;const n=Object.create(null);return e.insert&&(n.insert=i.mapToSerializable(e.insert),t+=e.insert.size),e.delete&&(n.delete=i.values(e.delete),t+=e.delete.size),0===t?Promise.resolve():this.channel.call("updateItems",n)}checkIntegrity(e){return this.channel.call("checkIntegrity",e)}close(){return this.onDidChangeItemsOnMainListener=r.dispose(this.onDidChangeItemsOnMainListener),Promise.resolve()}dispose(){super.dispose(),this.onDidChangeItemsOnMainListener=r.dispose(this.onDidChangeItemsOnMainListener)}}t.GlobalStorageDatabaseChannelClient=l}),define(t[28],n([1,0,5]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.Uninitialized="uninitialized",e.Idle="idle",e.CheckingForUpdates="checking for updates",e.AvailableForDownload="available for download",e.Downloading="downloading",e.Downloaded="downloaded",e.Updating="updating",e.Ready="ready"}(t.StateType||(t.StateType={}))
;!function(e){e[e.Setup=0]="Setup",e[e.Archive=1]="Archive",e[e.Snap=2]="Snap"}(t.UpdateType||(t.UpdateType={})),t.State={Uninitialized:{type:"uninitialized"},Idle:(e,t)=>({type:"idle",updateType:e,error:t}),CheckingForUpdates:e=>({type:"checking for updates",context:e}),AvailableForDownload:e=>({type:"available for download",update:e}),Downloading:e=>({type:"downloading",update:e}),Downloaded:e=>({type:"downloaded",update:e}),Updating:e=>({type:"updating",update:e}),Ready:e=>({type:"ready",update:e})},t.IUpdateService=n.createDecorator("updateService")}),define(t[59],n([1,0,2,12,14,25,20,28,9,7,43,35]),function(e,t,n,r,a,c,l,u,d,h,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUpdateURL=function(e,t){return`${l.default.updateUrl}/api/update/${e}/${t}/${l.default.commit}`};let g=class{constructor(e,t,i,r,o){if(this.lifecycleService=e,this.configurationService=t,this.environmentService=i,this.requestService=r,this.logService=o,this._state=u.State.Uninitialized,
this._onStateChange=new n.Emitter,this.environmentService.disableUpdates)return void this.logService.info("update#ctor - updates are disabled by the environment");if(!l.default.updateUrl||!l.default.commit)return void this.logService.info("update#ctor - updates are disabled as there is no update URL");const s=a.getMigratedSettingValue(this.configurationService,"update.mode","update.channel"),c=this.getProductQuality(s);c?(this.url=this.buildUpdateFeedUrl(c),this.url?(this.setState(u.State.Idle(this.getUpdateType())),"manual"!==s?this.scheduleCheckForUpdates(3e4).then(void 0,e=>this.logService.error(e)):this.logService.info("update#ctor - manual checks only; automatic updates are disabled by user preference")):this.logService.info("update#ctor - updates are disabled as the update URL is badly formed")):this.logService.info("update#ctor - updates are disabled by user preference")}get onStateChange(){return this._onStateChange.event}get state(){return this._state}setState(e){
this.logService.info("update#setState",e.type),this._state=e,this._onStateChange.fire(e)}getProductQuality(e){return"none"===e?void 0:l.default.quality}scheduleCheckForUpdates(e=36e5){return r.timeout(e).then(()=>this.checkForUpdates(null)).then(()=>this.scheduleCheckForUpdates(36e5))}checkForUpdates(e){return i(this,void 0,void 0,function*(){this.logService.trace("update#checkForUpdates, state = ",this.state.type),"idle"===this.state.type&&this.doCheckForUpdates(e)})}downloadUpdate(){return i(this,void 0,void 0,function*(){this.logService.trace("update#downloadUpdate, state = ",this.state.type),"available for download"===this.state.type&&(yield this.doDownloadUpdate(this.state))})}doDownloadUpdate(e){return i(this,void 0,void 0,function*(){})}applyUpdate(){return i(this,void 0,void 0,function*(){this.logService.trace("update#applyUpdate, state = ",this.state.type),"downloaded"===this.state.type&&(yield this.doApplyUpdate())})}doApplyUpdate(){return i(this,void 0,void 0,function*(){})}quitAndInstall(){
return this.logService.trace("update#quitAndInstall, state = ",this.state.type),"ready"!==this.state.type?Promise.resolve(void 0):(this.logService.trace("update#quitAndInstall(): before lifecycle quit()"),this.lifecycleService.quit(!0).then(e=>{this.logService.trace(`update#quitAndInstall(): after lifecycle quit() with veto: ${e}`),e||(this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),this.doQuitAndInstall())}),Promise.resolve(void 0))}isLatestVersion(){return this.url?this.requestService.request({url:this.url},f.CancellationToken.None).then(e=>204===e.res.statusCode):Promise.resolve(void 0)}getUpdateType(){return 1}doQuitAndInstall(){}};g=o([s(0,c.ILifecycleService),s(1,a.IConfigurationService),s(2,d.IEnvironmentService),s(3,p.IRequestService),s(4,h.ILogService)],g),t.AbstractUpdateService=g}),define(t[149],n([1,0,10,6,2,49,14,25,28,32,9,7,59,43]),function(e,t,n,i,r,a,c,l,u,d,h,p,f,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0})
;let m=class extends f.AbstractUpdateService{constructor(e,t,n,i,r,o){super(e,t,i,r,o),this.telemetryService=n,this.disposables=[],this.onRawError(this.onError,this,this.disposables),this.onRawUpdateAvailable(this.onUpdateAvailable,this,this.disposables),this.onRawUpdateDownloaded(this.onUpdateDownloaded,this,this.disposables),this.onRawUpdateNotAvailable(this.onUpdateNotAvailable,this,this.disposables)}get onRawError(){return r.Event.fromNodeEventEmitter(n.autoUpdater,"error",(e,t)=>t)}get onRawUpdateNotAvailable(){return r.Event.fromNodeEventEmitter(n.autoUpdater,"update-not-available")}get onRawUpdateAvailable(){return r.Event.fromNodeEventEmitter(n.autoUpdater,"update-available",(e,t,n)=>({url:t,version:n,productVersion:n}))}get onRawUpdateDownloaded(){return r.Event.fromNodeEventEmitter(n.autoUpdater,"update-downloaded",(e,t,n,i)=>({releaseNotes:t,version:n,productVersion:n,date:i}))}onError(e){this.logService.error("UpdateService error:",e)
;const t="checking for updates"!==this.state.type||!!this.state.context?e:void 0;this.setState(u.State.Idle(1,t))}buildUpdateFeedUrl(e){const t=f.createUpdateURL("darwin",e);try{n.autoUpdater.setFeedURL({url:t})}catch(e){return void this.logService.error("Failed to set update feed URL",e)}return t}doCheckForUpdates(e){this.setState(u.State.CheckingForUpdates(e)),n.autoUpdater.checkForUpdates()}onUpdateAvailable(e){"checking for updates"===this.state.type&&this.setState(u.State.Downloading(e))}onUpdateDownloaded(e){"downloading"===this.state.type&&(this.telemetryService.publicLog("update:downloaded",{version:e.version}),this.setState(u.State.Ready(e)))}onUpdateNotAvailable(){"checking for updates"===this.state.type&&(this.telemetryService.publicLog("update:notAvailable",{explicit:!!this.state.context}),this.setState(u.State.Idle(1)))}doQuitAndInstall(){this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),n.autoUpdater.quitAndInstall()}dispose(){
this.disposables=i.dispose(this.disposables)}};o([a.memoize],m.prototype,"onRawError",null),o([a.memoize],m.prototype,"onRawUpdateNotAvailable",null),o([a.memoize],m.prototype,"onRawUpdateAvailable",null),o([a.memoize],m.prototype,"onRawUpdateDownloaded",null),m=o([s(0,l.ILifecycleService),s(1,c.IConfigurationService),s(2,d.ITelemetryService),s(3,h.IEnvironmentService),s(4,g.IRequestService),s(5,p.ILogService)],m),t.DarwinUpdateService=m}),define(t[150],n([1,0,2,12,25,28,9,7,4,16,41,32]),function(e,t,n,r,a,c,l,u,d,h,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let g=class{constructor(e,t,i){this.lifecycleService=e,this.logService=i,this._state=c.State.Uninitialized,this._onStateChange=new n.Emitter,t.disableUpdates?this.logService.info("update#ctor - updates are disabled"):(this.setState(c.State.Idle(this.getUpdateType())),this.scheduleCheckForUpdates(3e4).then(void 0,e=>this.logService.error(e)))}get onStateChange(){return this._onStateChange.event}get state(){return this._state}
setState(e){this.logService.info("update#setState",e.type),this._state=e,this._onStateChange.fire(e)}scheduleCheckForUpdates(e=36e5){return r.timeout(e).then(()=>this.checkForUpdates(null)).then(()=>this.scheduleCheckForUpdates(36e5))}checkForUpdates(e){return i(this,void 0,void 0,function*(){this.logService.trace("update#checkForUpdates, state = ",this.state.type),"idle"===this.state.type&&this.doCheckForUpdates(e)})}downloadUpdate(){return i(this,void 0,void 0,function*(){this.logService.trace("update#downloadUpdate, state = ",this.state.type),"available for download"===this.state.type&&(yield this.doDownloadUpdate(this.state))})}doDownloadUpdate(e){return Promise.resolve(void 0)}applyUpdate(){return i(this,void 0,void 0,function*(){this.logService.trace("update#applyUpdate, state = ",this.state.type),"downloaded"===this.state.type&&(yield this.doApplyUpdate())})}doApplyUpdate(){return Promise.resolve(void 0)}quitAndInstall(){return this.logService.trace("update#quitAndInstall, state = ",this.state.type),
"ready"!==this.state.type?Promise.resolve(void 0):(this.logService.trace("update#quitAndInstall(): before lifecycle quit()"),this.lifecycleService.quit(!0).then(e=>{this.logService.trace(`update#quitAndInstall(): after lifecycle quit() with veto: ${e}`),e||(this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),this.doQuitAndInstall())}),Promise.resolve(void 0))}getUpdateType(){return 2}doQuitAndInstall(){}};g=o([s(0,a.ILifecycleService),s(1,l.IEnvironmentService),s(2,u.ILogService)],g);let m=class extends g{constructor(e,t,i,r,o,s){super(i,r,o),this.snap=e,this.snapRevision=t,this.telemetryService=s;const a=h.watch(d.dirname(this.snap)),c=n.Event.fromNodeEventEmitter(a,"change",(e,t)=>t),l=n.Event.filter(c,e=>"current"===e),u=n.Event.debounce(l,(e,t)=>t,2e3)(this.checkForUpdates,this);i.onWillShutdown(()=>{u.dispose(),a.close()})}doCheckForUpdates(e){this.setState(c.State.CheckingForUpdates(e)),this.isUpdateAvailable().then(t=>{t?this.setState(c.State.Ready({version:"something",
productVersion:"something"})):(this.telemetryService.publicLog("update:notAvailable",{explicit:!!e}),this.setState(c.State.Idle(2)))},t=>{this.logService.error(t),this.telemetryService.publicLog("update:notAvailable",{explicit:!!e}),this.setState(c.State.Idle(2,t.message||t))})}doQuitAndInstall(){this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),p.spawn("sleep 3 && $SNAP_NAME",{shell:!0,detached:!0,stdio:"ignore"})}isUpdateAvailable(){return i(this,void 0,void 0,function*(){const e=yield new Promise((e,t)=>h.realpath(`${d.dirname(this.snap)}/current`,(n,i)=>n?t(n):e(i))),t=d.basename(e);return this.snapRevision!==t})}isLatestVersion(){return this.isUpdateAvailable().then(void 0,e=>{this.logService.error("update#checkForSnapUpdate(): Could not get realpath of application.")})}};m=o([s(2,a.ILifecycleService),s(3,l.IEnvironmentService),s(4,u.ILogService),s(5,f.ITelemetryService)],m),t.SnapUpdateService=m}),define(t[151],n([1,0,38,40,88]),function(e,t,n,i,r){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0});n.Registry.as(i.Extensions.Configuration).registerConfiguration({id:"update",order:15,title:r.localize(0,null),type:"object",properties:{"update.mode":{type:"string",enum:["none","manual","default"],default:"default",scope:1,description:r.localize(1,null),tags:["usesOnlineServices"],enumDescriptions:[r.localize(2,null),r.localize(3,null),r.localize(4,null)]},"update.channel":{type:"string",default:"default",scope:1,description:r.localize(5,null),deprecationMessage:r.localize(6,null,"update.mode")},"update.enableWindowsBackgroundUpdates":{type:"boolean",default:!0,scope:1,description:r.localize(7,null),tags:["usesOnlineServices"]},"update.showReleaseNotes":{type:"boolean",default:!0,description:r.localize(8,null),tags:["usesOnlineServices"]}}})}),define(t[152],n([1,0,151]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define(t[153],n([1,0,2,28]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})
;class r{constructor(e){this.service=e}listen(e,t){switch(t){case"onStateChange":return this.service.onStateChange}throw new Error(`Event not found: ${t}`)}call(e,t,n){switch(t){case"checkForUpdates":return this.service.checkForUpdates(n);case"downloadUpdate":return this.service.downloadUpdate();case"applyUpdate":return this.service.applyUpdate();case"quitAndInstall":return this.service.quitAndInstall();case"_getInitialState":return Promise.resolve(this.service.state);case"isLatestVersion":return this.service.isLatestVersion()}throw new Error(`Call not found: ${t}`)}}t.UpdateChannel=r;class o{constructor(e){this.channel=e,this._onStateChange=new n.Emitter,this._state=i.State.Uninitialized,this.onStateChange(e=>this._state=e),e.call("_getInitialState").then(e=>{this._onStateChange.fire(e),this.channel.listen("onStateChange")(e=>this._onStateChange.fire(e))})}get onStateChange(){return this._onStateChange.event}get state(){return this._state}checkForUpdates(e){return this.channel.call("checkForUpdates",e)}
downloadUpdate(){return this.channel.call("downloadUpdate")}applyUpdate(){return this.channel.call("applyUpdate")}quitAndInstall(){return this.channel.call("quitAndInstall")}isLatestVersion(){return this.channel.call("isLatestVersion")}}t.UpdateChannelClient=o}),define(t[47],n([1,0,5]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IURLService=n.createDecorator("urlService")}),define(t[155],n([1,0,6,12,26]),function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o{constructor(){this.handlers=new Set}open(e){const t=r.values(this.handlers);return i.first(t.map(t=>()=>t.handleURL(e)),void 0,!1).then(e=>e||!1)}registerHandler(e){return this.handlers.add(e),n.toDisposable(()=>this.handlers.delete(e))}}t.URLService=o;class s extends o{constructor(e){super(),this.urlService=e}open(e){return this.urlService.open(e)}handleURL(e){return super.open(e)}}t.RelayURLService=s}),define(t[156],n([1,0,8]),function(e,t,n){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.service=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"open":return this.service.open(n.URI.revive(i))}throw new Error(`Call not found: ${t}`)}}t.URLServiceChannel=i;class r{constructor(e){this.channel=e}open(e){return this.channel.call("open",e.toJSON())}registerHandler(e){throw new Error("Not implemented.")}}t.URLServiceChannelClient=r;class o{constructor(e){this.handler=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"handleURL":return this.handler.handleURL(n.URI.revive(i))}throw new Error(`Call not found: ${t}`)}}t.URLHandlerChannel=o;class s{constructor(e){this.channel=e}handleURL(e){return this.channel.call("handleURL",e.toJSON())}}t.URLHandlerChannelClient=s}),define(t[52],n([1,0,5,2,3,6]),function(e,t,n,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWindowsService=n.createDecorator("windowsService"),
t.IWindowService=n.createDecorator("windowService"),t.getTitleBarStyle=function(e,t,n=t.isExtensionDevelopment){const i=e.getValue("window"),o=!t.isBuilt||n;if(r.isMacintosh&&o)return"native";if(i){if(r.isMacintosh&&!0===i.nativeTabs)return"native";if(r.isMacintosh&&!1===i.nativeFullScreen)return"native";const e=i.titleBarStyle;if("native"===e||"custom"===e)return e}return r.isLinux?"native":"custom"};!function(e){e[e.CLI=0]="CLI",e[e.DOCK=1]="DOCK",e[e.MENU=2]="MENU",e[e.DIALOG=3]="DIALOG",e[e.DESKTOP=4]="DESKTOP",e[e.API=5]="API"}(t.OpenContext||(t.OpenContext={}));!function(e){e[e.NONE=0]="NONE",e[e.LOADING=1]="LOADING",e[e.NAVIGATING=2]="NAVIGATING",e[e.READY=3]="READY"}(t.ReadyState||(t.ReadyState={}));let c=class{constructor(e){this.disposables=[];i.Event.latch(i.Event.any(e.onWindowOpen,e.onWindowFocus))(this.setActiveWindow,this,this.disposables),this.firstActiveWindowIdPromise=e.getActiveWindowId().then(e=>void 0===this._activeWindowId&&this.setActiveWindow(e))}setActiveWindow(e){
this.firstActiveWindowIdPromise&&(this.firstActiveWindowIdPromise=null),this._activeWindowId=e}getActiveClientId(){return this.firstActiveWindowIdPromise?this.firstActiveWindowIdPromise:Promise.resolve(`window:${this._activeWindowId}`)}dispose(){this.disposables=a.dispose(this.disposables)}};c=o([s(0,t.IWindowsService)],c),t.ActiveWindowManager=c}),define(t[37],n([1,0,5]),function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Maximized=0]="Maximized",e[e.Normal=1]="Normal",e[e.Minimized=2]="Minimized",e[e.Fullscreen=3]="Fullscreen"}(t.WindowMode||(t.WindowMode={})),t.IWindowsMainService=n.createDecorator("windowsMainService")}),define(t[159],n([1,0,171,6,37,2,10]),function(e,t,n,i,r,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let l=class{constructor(e){this.windowsMainService=e,this.retryCount=0,this.disposables=[];a.Event.fromNodeEventEmitter(c.app,"login",(e,t,n,i,r)=>({event:e,webContents:t,req:n,authInfo:i,cb:r
}))(this.onLogin,this,this.disposables)}onLogin({event:t,authInfo:i,cb:r}){if(!i.isProxy)return;if(this.retryCount++>1)return;t.preventDefault();const o={alwaysOnTop:!0,skipTaskbar:!0,resizable:!1,width:450,height:220,show:!0,title:"VS Code"},s=this.windowsMainService.getFocusedWindow();s&&(o.parent=s.win,o.modal=!0);const a=new c.BrowserWindow(o),l=`${e.toUrl("vs/code/electron-browser/proxy/auth.html")}?config=${encodeURIComponent(JSON.stringify({}))}`,u=`${i.host}:${i.port}`,d={title:n.localize(0,null),message:n.localize(1,null,u)},h="promptForCredentials("+JSON.stringify(d)+")",p=()=>r("","");a.on("close",p),a.setMenu(null),a.loadURL(l),a.webContents.executeJavaScript(h,!0).then(({username:e,password:t})=>{r(e,t),a.removeListener("close",p),a.close()})}dispose(){this.disposables=i.dispose(this.disposables)}};l=o([s(0,r.IWindowsMainService)],l),t.ProxyAuthHandler=l}),define(t[160],n([1,0,98,37,51,6,48,53,110,3,2,70,131,12]),function(e,t,n,r,a,c,l,u,d,h,p,f,g,m){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0});let v=class{constructor(e,t,n){this.windowServer=e,this.options=t,this.windowsService=n,this.registeredWindowIds=new Set,this.reloadingWindowIds=new Set,this.onDidReloadingChange=new p.Emitter}registerWindowDriver(e){return i(this,void 0,void 0,function*(){return this.registeredWindowIds.add(e),this.reloadingWindowIds.delete(e),this.onDidReloadingChange.fire(),this.options})}reloadWindowDriver(e){return i(this,void 0,void 0,function*(){this.reloadingWindowIds.add(e)})}getWindowIds(){return i(this,void 0,void 0,function*(){return this.windowsService.getWindows().map(e=>e.id).filter(e=>this.registeredWindowIds.has(e)&&!this.reloadingWindowIds.has(e))})}capturePage(e){return i(this,void 0,void 0,function*(){yield this.whenUnfrozen(e);const t=this.windowsService.getWindowById(e);if(!t)throw new Error("Invalid window");const n=t.win.webContents;return(yield new Promise(e=>n.capturePage(e))).toPNG().toString("base64")})}reloadWindow(e){
return i(this,void 0,void 0,function*(){yield this.whenUnfrozen(e);const t=this.windowsService.getWindowById(e);if(!t)throw new Error("Invalid window");this.reloadingWindowIds.add(e),this.windowsService.reload(t)})}exitApplication(){return i(this,void 0,void 0,function*(){return this.windowsService.quit()})}dispatchKeybinding(e,t){return i(this,void 0,void 0,function*(){yield this.whenUnfrozen(e);const n=g.KeybindingParser.parseUserBinding(t);for(let t of n)yield this._dispatchKeybinding(e,t)})}_dispatchKeybinding(e,t){return i(this,void 0,void 0,function*(){if(t instanceof f.ScanCodeBinding)throw new Error("ScanCodeBindings not supported");const n=this.windowsService.getWindowById(e);if(!n)throw new Error("Invalid window");const i=n.win.webContents,r=new u.SimpleKeybinding(!1,!1,!1,!1,t.keyCode),o=new d.USLayoutResolvedKeybinding(r.toChord(),h.OS).getElectronAccelerator(),s=[];t.ctrlKey&&s.push("ctrl"),t.metaKey&&s.push("meta"),t.shiftKey&&s.push("shift"),t.altKey&&s.push("alt"),i.sendInputEvent({
type:"keyDown",keyCode:o,modifiers:s}),function(e){return e<21}(t.keyCode)||i.sendInputEvent({type:"char",keyCode:o,modifiers:s}),i.sendInputEvent({type:"keyUp",keyCode:o,modifiers:s}),yield m.timeout(100)})}click(e,t,n,r){return i(this,void 0,void 0,function*(){yield(yield this.getWindowDriver(e)).click(t,n,r)})}doubleClick(e,t){return i(this,void 0,void 0,function*(){yield(yield this.getWindowDriver(e)).doubleClick(t)})}setValue(e,t,n){return i(this,void 0,void 0,function*(){yield(yield this.getWindowDriver(e)).setValue(t,n)})}getTitle(e){return i(this,void 0,void 0,function*(){return yield(yield this.getWindowDriver(e)).getTitle()})}isActiveElement(e,t){return i(this,void 0,void 0,function*(){return yield(yield this.getWindowDriver(e)).isActiveElement(t)})}getElements(e,t,n){return i(this,void 0,void 0,function*(){return yield(yield this.getWindowDriver(e)).getElements(t,n)})}typeInEditor(e,t,n){return i(this,void 0,void 0,function*(){yield(yield this.getWindowDriver(e)).typeInEditor(t,n)})}
getTerminalBuffer(e,t){return i(this,void 0,void 0,function*(){return yield(yield this.getWindowDriver(e)).getTerminalBuffer(t)})}writeInTerminal(e,t,n){return i(this,void 0,void 0,function*(){yield(yield this.getWindowDriver(e)).writeInTerminal(t,n)})}getWindowDriver(e){return i(this,void 0,void 0,function*(){yield this.whenUnfrozen(e);const t=`window:${e}`,i=new l.StaticRouter(e=>e===t),r=this.windowServer.getChannel("windowDriver",i);return new n.WindowDriverChannelClient(r)})}whenUnfrozen(e){return i(this,void 0,void 0,function*(){for(;this.reloadingWindowIds.has(e);)yield p.Event.toPromise(this.onDidReloadingChange.event)})}};v=o([s(2,r.IWindowsMainService)],v),t.Driver=v,t.serve=function(e,t,r,o){return i(this,void 0,void 0,function*(){const i=r.driverVerbose,s=o.createInstance(v,e,{verbose:i}),l=new n.WindowDriverRegistryChannel(s);e.registerChannel("windowDriverRegistry",l);const u=yield a.serve(t),d=new n.DriverChannel(s);return u.registerChannel("driver",d),c.combinedDisposable([u,e])})}}),
define(t[161],n([1,0,85,3,9,10,52,14,32,28,20,12,5,42,37,50,64,8,30,25]),function(e,t,n,i,r,a,c,l,u,d,h,p,f,g,m,v,w,y,S,b){"use strict";function _(){return new a.MenuItem({type:"separator"})}Object.defineProperty(t,"__esModule",{value:!0});let C=class e{constructor(e,t,n,r,o,s,a,l,u){this.updateService=e,this.configurationService=n,this.windowsMainService=r,this.environmentService=o,this.telemetryService=s,this.historyMainService=a,this.stateService=l,this.lifecycleService=u,this.fallbackMenuHandlers={},this.menuUpdater=new p.RunOnceScheduler(()=>this.doUpdateMenu(),0),this.menuGC=new p.RunOnceScheduler(()=>{this.oldMenus=[]},1e4),this.menubarMenus=Object.create(null),this.keybindings=Object.create(null),(i.isMacintosh||"native"===c.getTitleBarStyle(this.configurationService,this.environmentService))&&this.restoreCachedMenubarData(),this.addFallbackHandlers(),this.closedLastWindow=!1,this.oldMenus=[],this.install(),this.registerListeners()}restoreCachedMenubarData(){
const t=this.stateService.getItem(e.lastKnownMenubarStorageKey);t&&(t.menus&&(this.menubarMenus=t.menus),t.keybindings&&(this.keybindings=t.keybindings))}addFallbackHandlers(){this.fallbackMenuHandlers["workbench.action.files.newUntitledFile"]=(()=>this.windowsMainService.openNewWindow(2)),this.fallbackMenuHandlers["workbench.action.newWindow"]=(()=>this.windowsMainService.openNewWindow(2)),this.fallbackMenuHandlers["workbench.action.files.openFileFolder"]=((e,t,n)=>this.windowsMainService.pickFileFolderAndOpen({forceNewWindow:this.isOptionClick(n),telemetryExtraData:{from:"menu"}})),this.fallbackMenuHandlers["workbench.action.openWorkspace"]=((e,t,n)=>this.windowsMainService.pickWorkspaceAndOpen({forceNewWindow:this.isOptionClick(n),telemetryExtraData:{from:"menu"}})),this.fallbackMenuHandlers["workbench.action.clearRecentFiles"]=(()=>this.historyMainService.clearRecentlyOpened()),
h.default.twitterUrl&&(this.fallbackMenuHandlers["workbench.action.openTwitterUrl"]=(()=>this.openUrl(h.default.twitterUrl,"openTwitterUrl"))),h.default.requestFeatureUrl&&(this.fallbackMenuHandlers["workbench.action.openRequestFeatureUrl"]=(()=>this.openUrl(h.default.requestFeatureUrl,"openUserVoiceUrl"))),h.default.reportIssueUrl&&(this.fallbackMenuHandlers["workbench.action.openIssueReporter"]=(()=>this.openUrl(h.default.reportIssueUrl,"openReportIssues"))),h.default.licenseUrl&&(this.fallbackMenuHandlers["workbench.action.openLicenseUrl"]=(()=>{if(i.language){const e=h.default.licenseUrl.indexOf("?")>0?"&":"?";this.openUrl(`${h.default.licenseUrl}${e}lang=${i.language}`,"openLicenseUrl")}else this.openUrl(h.default.licenseUrl,"openLicenseUrl")})),h.default.privacyStatementUrl&&(this.fallbackMenuHandlers["workbench.action.openPrivacyStatementUrl"]=(()=>{if(i.language){const e=h.default.licenseUrl.indexOf("?")>0?"&":"?"
;this.openUrl(`${h.default.privacyStatementUrl}${e}lang=${i.language}`,"openPrivacyStatement")}else this.openUrl(h.default.privacyStatementUrl,"openPrivacyStatement")}))}registerListeners(){this.lifecycleService.onWillShutdown(()=>this.willShutdown=!0),this.windowsMainService.onWindowsCountChanged(e=>this.onWindowsCountChanged(e))}get currentEnableMenuBarMnemonics(){let e=this.configurationService.getValue("window.enableMenuBarMnemonics");return"boolean"!=typeof e&&(e=!0),e}get currentEnableNativeTabs(){if(!i.isMacintosh)return!1;let e=this.configurationService.getValue("window.nativeTabs");return"boolean"!=typeof e&&(e=!1),e}updateMenu(t,n){this.menubarMenus=t.menus,this.keybindings=t.keybindings,this.stateService.setItem(e.lastKnownMenubarStorageKey,t),this.scheduleUpdateMenu()}scheduleUpdateMenu(){this.menuUpdater.schedule()}doUpdateMenu(){this.willShutdown||setTimeout(()=>{this.willShutdown||this.install()},10)}onWindowsCountChanged(e){
i.isMacintosh&&(0===e.oldCount&&e.newCount>0||e.oldCount>0&&0===e.newCount)&&(this.closedLastWindow=0===e.newCount,this.scheduleUpdateMenu())}install(){const e=a.Menu.getApplicationMenu();if(e&&this.oldMenus.push(e),0===Object.keys(this.menubarMenus).length)return void a.Menu.setApplicationMenu(i.isMacintosh?new a.Menu:null);const t=new a.Menu;let r;if(i.isMacintosh){const e=new a.Menu;r=new a.MenuItem({label:h.default.nameShort,submenu:e}),this.setMacApplicationMenu(e),t.append(r)}if(i.isMacintosh&&!this.appMenuInstalled){this.appMenuInstalled=!0;const e=new a.Menu;e.append(new a.MenuItem({label:this.mnemonicLabel(n.localize(0,null)),click:()=>this.windowsMainService.openNewWindow(1)})),a.app.dock.setMenu(e)}const o=new a.Menu,s=new a.MenuItem({label:this.mnemonicLabel(n.localize(1,null)),submenu:o});this.setMenuById(o,"File"),t.append(s);const c=new a.Menu,l=new a.MenuItem({label:this.mnemonicLabel(n.localize(2,null)),submenu:c});this.setMenuById(c,"Edit"),t.append(l);const u=new a.Menu,d=new a.MenuItem({
label:this.mnemonicLabel(n.localize(3,null)),submenu:u});this.setMenuById(u,"Selection"),t.append(d);const p=new a.Menu,f=new a.MenuItem({label:this.mnemonicLabel(n.localize(4,null)),submenu:p});this.setMenuById(p,"View"),t.append(f);const g=new a.Menu,m=new a.MenuItem({label:this.mnemonicLabel(n.localize(5,null)),submenu:g});this.setMenuById(g,"Go"),t.append(m);const v=new a.Menu,w=new a.MenuItem({label:this.mnemonicLabel(n.localize(6,null)),submenu:v});this.setMenuById(v,"Debug"),t.append(w);const y=new a.Menu,S=new a.MenuItem({label:this.mnemonicLabel(n.localize(7,null)),submenu:y});this.setMenuById(y,"Terminal"),t.append(S);let b;if(this.shouldDrawMenu("Window")){const e=new a.Menu;b=new a.MenuItem({label:this.mnemonicLabel(n.localize(8,null)),submenu:e,role:"window"}),this.setMacWindowMenu(e)}b&&t.append(b);const _=new a.Menu,C=new a.MenuItem({label:this.mnemonicLabel(n.localize(9,null)),submenu:_,role:"help"});this.setMenuById(_,"Help"),t.append(C),
t.items&&t.items.length>0?a.Menu.setApplicationMenu(t):a.Menu.setApplicationMenu(null),this.menuGC.schedule()}setMacApplicationMenu(e){const t=new a.MenuItem({label:n.localize(10,null,h.default.nameLong),role:"about"}),i=this.getUpdateMenuItems();let r;if(this.shouldDrawMenu("Preferences")){const e=new a.Menu;this.setMenuById(e,"Preferences"),r=new a.MenuItem({label:this.mnemonicLabel(n.localize(11,null)),submenu:e})}const o=new a.Menu,s=new a.MenuItem({label:n.localize(12,null),role:"services",submenu:o}),c=new a.MenuItem({label:n.localize(13,null,h.default.nameLong),role:"hide",accelerator:"Command+H"}),l=new a.MenuItem({label:n.localize(14,null),role:"hideothers",accelerator:"Command+Alt+H"}),u=new a.MenuItem({label:n.localize(15,null),role:"unhide"}),d=new a.MenuItem(this.likeAction("workbench.action.quit",{label:n.localize(16,null,h.default.nameLong),click:()=>{
(0===this.windowsMainService.getWindowCount()||this.windowsMainService.getFocusedWindow()||this.windowsMainService.getLastActiveWindow().isMinimized())&&this.windowsMainService.quit()}})),p=[t];p.push(...i),r&&p.push(...[_(),r]),p.push(...[_(),s,_(),c,l,u,_(),d]),p.forEach(t=>e.append(t))}shouldDrawMenu(e){if(!i.isMacintosh&&"custom"===c.getTitleBarStyle(this.configurationService,this.environmentService))return!1;switch(e){case"File":case"Help":if(i.isMacintosh)return 0===this.windowsMainService.getWindowCount()&&this.closedLastWindow||!!this.menubarMenus&&!!this.menubarMenus[e];case"Window":if(i.isMacintosh)return 0===this.windowsMainService.getWindowCount()&&this.closedLastWindow||!!this.menubarMenus;default:return this.windowsMainService.getWindowCount()>0&&!!this.menubarMenus&&!!this.menubarMenus[e]}}setMenu(e,t){t.forEach(t=>{if(w.isMenubarMenuItemSeparator(t))e.append(_());else if(w.isMenubarMenuItemSubmenu(t)){const n=new a.Menu,i=new a.MenuItem({label:this.mnemonicLabel(t.label),submenu:n})
;this.setMenu(n,t.submenu.items),e.append(i)}else w.isMenubarMenuItemUriAction(t)?e.append(this.createOpenRecentMenuItem(t.uri,t.label,t.id)):w.isMenubarMenuItemAction(t)&&("workbench.action.showAboutDialog"===t.id&&this.insertCheckForUpdatesItems(e),i.isMacintosh&&0===this.windowsMainService.getWindowCount()&&this.closedLastWindow?this.fallbackMenuHandlers[t.id]?e.append(new a.MenuItem(this.likeAction(t.id,{label:this.mnemonicLabel(t.label),click:this.fallbackMenuHandlers[t.id]}))):e.append(this.createMenuItem(t.label,t.id,!1,t.checked)):e.append(this.createMenuItem(t.label,t.id,!1!==t.enabled,!!t.checked)))})}setMenuById(e,t){this.menubarMenus&&this.menubarMenus[t]&&this.setMenu(e,this.menubarMenus[t].items)}insertCheckForUpdatesItems(e){const t=this.getUpdateMenuItems();t.length&&(t.forEach(t=>e.append(t)),e.append(_()))}createOpenRecentMenuItem(e,t,n){const i=y.URI.revive(e),r="openRecentFile"===n||"openRecentWorkspace"===n?"file":"folder";return new a.MenuItem(this.likeAction(n,{label:t,click:(e,t,o)=>{
const s=this.isOptionClick(o);this.windowsMainService.open({context:2,cli:this.environmentService.args,urisToOpen:[{uri:i,typeHint:r}],forceNewWindow:s,forceOpenWorkspaceAsFile:"openRecentFile"===n}).length>0||this.historyMainService.removeFromRecentlyOpened([i])}},!1))}isOptionClick(e){return!(!e||!(!i.isMacintosh&&(e.ctrlKey||e.shiftKey)||i.isMacintosh&&(e.metaKey||e.altKey)))}createRoleMenuItem(e,t,n){const i={label:this.mnemonicLabel(e),role:n,enabled:!0};return new a.MenuItem(this.withKeybinding(t,i))}setMacWindowMenu(e){const t=new a.MenuItem({label:n.localize(17,null),role:"minimize",accelerator:"Command+M",enabled:this.windowsMainService.getWindowCount()>0}),i=new a.MenuItem({label:n.localize(18,null),role:"zoom",enabled:this.windowsMainService.getWindowCount()>0}),r=new a.MenuItem({label:n.localize(19,null),role:"front",enabled:this.windowsMainService.getWindowCount()>0}),o=this.createMenuItem(n.localize(20,null),"workbench.action.switchWindow"),s=[];this.currentEnableNativeTabs&&(s.push(_()),
s.push(this.createMenuItem(n.localize(21,null),"workbench.action.newWindowTab")),s.push(this.createRoleMenuItem(n.localize(22,null),"workbench.action.showPreviousWindowTab","selectPreviousTab")),s.push(this.createRoleMenuItem(n.localize(23,null),"workbench.action.showNextWindowTab","selectNextTab")),s.push(this.createRoleMenuItem(n.localize(24,null),"workbench.action.moveWindowTabToNewWindow","moveTabToNewWindow")),s.push(this.createRoleMenuItem(n.localize(25,null),"workbench.action.mergeAllWindowTabs","mergeAllWindows"))),[t,i,o,...s,_(),r].forEach(t=>e.append(t))}getUpdateMenuItems(){switch(this.updateService.state.type){case"uninitialized":return[];case"idle":return[new a.MenuItem({label:this.mnemonicLabel(n.localize(26,null)),click:()=>setTimeout(()=>{this.reportMenuActionTelemetry("CheckForUpdate");const e=this.windowsMainService.getFocusedWindow(),t=e?{windowId:e.id}:null;this.updateService.checkForUpdates(t)},0)})];case"checking for updates":return[new a.MenuItem({label:n.localize(27,null),enabled:!1
})];case"available for download":return[new a.MenuItem({label:this.mnemonicLabel(n.localize(28,null)),click:()=>{this.updateService.downloadUpdate()}})];case"downloading":return[new a.MenuItem({label:n.localize(29,null),enabled:!1})];case"downloaded":return[new a.MenuItem({label:this.mnemonicLabel(n.localize(30,null)),click:()=>{this.reportMenuActionTelemetry("InstallUpdate"),this.updateService.applyUpdate()}})];case"updating":return[new a.MenuItem({label:n.localize(31,null),enabled:!1})];case"ready":return[new a.MenuItem({label:this.mnemonicLabel(n.localize(32,null)),click:()=>{this.reportMenuActionTelemetry("RestartToUpdate"),this.updateService.quitAndInstall()}})]}}static _menuItemIsTriggeredViaKeybinding(e,t){if(!t)return!1;let n=/ctrl/.test(t),i=/shift/.test(t),r=/alt/.test(t),o=/cmd/.test(t)||/super/.test(t);return!!(n||i||r||o)&&(n===e.ctrlKey&&i===e.shiftKey&&r===e.altKey&&o===e.metaKey)}createMenuItem(t,n,r,o){const s=this.mnemonicLabel(t),c="function"==typeof n?n:(t,i,r)=>{
const o=t?t.userSettingsLabel:null;let s=n;Array.isArray(n)&&(s=this.isOptionClick(r)?n[1]:n[0]),o&&e._menuItemIsTriggeredViaKeybinding(r,o)?this.runActionInRenderer({type:"keybinding",userSettingsLabel:o}):this.runActionInRenderer({type:"commandId",commandId:s})},l="boolean"==typeof r?r:this.windowsMainService.getWindowCount()>0,u="boolean"==typeof o&&o,d={label:s,click:c,enabled:l};u&&(d.type="checkbox",d.checked=u);let h;return"string"==typeof n?h=n:Array.isArray(n)&&(h=n[0]),i.isMacintosh&&("editor.action.clipboardCutAction"===h?d.role="cut":"editor.action.clipboardCopyAction"===h?d.role="copy":"editor.action.clipboardPasteAction"===h&&(d.role="paste"),"undo"===h?d.click=this.makeContextAwareClickHandler(c,{inDevTools:e=>e.undo(),inNoWindow:()=>a.Menu.sendActionToFirstResponder("undo:")}):"redo"===h?d.click=this.makeContextAwareClickHandler(c,{inDevTools:e=>e.redo(),inNoWindow:()=>a.Menu.sendActionToFirstResponder("redo:")}):"editor.action.selectAll"===h&&(d.click=this.makeContextAwareClickHandler(c,{
inDevTools:e=>e.selectAll(),inNoWindow:()=>a.Menu.sendActionToFirstResponder("selectAll:")}))),new a.MenuItem(this.withKeybinding(h,d))}makeContextAwareClickHandler(e,t){return()=>{const n=this.windowsMainService.getFocusedWindow();return n?n.win.webContents.isDevToolsFocused()?t.inDevTools(n.win.webContents.devToolsWebContents):void e():t.inNoWindow()}}runActionInRenderer(e){let t=this.windowsMainService.getFocusedWindow();if(!t){const e=this.windowsMainService.getLastActiveWindow();e&&e.isMinimized()&&(t=e)}if(t){if(i.isMacintosh&&!this.environmentService.isBuilt&&!t.isReady&&("commandId"===e.type&&"workbench.action.toggleDevTools"===e.commandId||"commandId"!==e.type&&"alt+cmd+i"===e.userSettingsLabel))return;"commandId"===e.type?this.windowsMainService.sendToFocused("vscode:runAction",{id:e.commandId,from:"menu"}):this.windowsMainService.sendToFocused("vscode:runKeybinding",{userSettingsLabel:e.userSettingsLabel})}}withKeybinding(e,t){const n="string"==typeof e?this.keybindings[e]:void 0;if(n&&n.label){
if(!1!==n.isNative)t.accelerator=n.label,t.userSettingsLabel=n.userSettingsLabel;else if("string"==typeof t.label){const e=t.label.indexOf("[");t.label=e>=0?`${t.label.substr(0,e)} [${n.label}]`:`${t.label} [${n.label}]`}}else t.accelerator=void 0;return t}likeAction(e,t,n=!t.accelerator){n&&(t=this.withKeybinding(e,t));const i=t.click;return t.click=((t,n,r)=>{this.reportMenuActionTelemetry(e),i&&i(t,n,r)}),t}openUrl(e,t){a.shell.openExternal(e),this.reportMenuActionTelemetry(t)}reportMenuActionTelemetry(e){this.telemetryService.publicLog("workbenchActionExecuted",{id:e,from:"menu"})}mnemonicLabel(e){return g.mnemonicMenuLabel(e,!this.currentEnableMenuBarMnemonics)}};C.lastKnownMenubarStorageKey="lastKnownMenubarData",C=o([s(0,d.IUpdateService),s(1,f.IInstantiationService),s(2,l.IConfigurationService),s(3,m.IWindowsMainService),s(4,r.IEnvironmentService),s(5,u.ITelemetryService),s(6,v.IHistoryMainService),s(7,S.IStateService),s(8,b.ILifecycleService)],C),t.Menubar=C}),
define(t[162],n([1,0,161,7,5]),function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let a=class{constructor(e,t){this.instantiationService=e,this.logService=t,this._menubar=this.instantiationService.createInstance(n.Menubar)}updateMenubar(e,t){return this.logService.trace("menubarService#updateMenubar",e),this._menubar&&this._menubar.updateMenu(t,e),Promise.resolve(void 0)}};a=o([s(0,r.IInstantiationService),s(1,i.ILogService)],a),t.MenubarService=a}),define(t[163],n([1,0,2,47,20,10,8,6,37,3,21]),function(e,t,n,i,r,a,c,l,u,d,h){"use strict";function p(e){try{return c.URI.parse(e)}catch(e){return null}}Object.defineProperty(t,"__esModule",{value:!0});let f=class{constructor(e,t,i){this.urlService=t,this.disposables=[];const o=global.getOpenUrls()||[],s=[..."string"==typeof e?[e]:e,...o],c=h.coalesce(s.map(p)),l=()=>c.forEach(e=>{e&&t.open(e)});d.isWindows&&a.app.setAsDefaultProtocolClient(r.default.urlProtocol,process.execPath,["--open-url","--"])
;const u=n.Event.map(n.Event.fromNodeEventEmitter(a.app,"open-url",(e,t)=>({event:e,url:t})),({event:e,url:t})=>(e.preventDefault(),t));n.Event.filter(n.Event.map(u,p),e=>!!e)(this.urlService.open,this.urlService,this.disposables);i.getWindows().filter(e=>e.isReady).length>0?l():n.Event.once(i.onWindowReady)(l)}dispose(){this.disposables=l.dispose(this.disposables)}};f=o([s(1,i.IURLService),s(2,u.IWindowsMainService)],f),t.ElectronURLListener=f}),define(t[164],n([1,0,89,23,6,15,8,20,9,10,2,47,25,37,50,31,42,3,7]),function(e,t,n,r,a,c,l,u,d,h,p,f,g,m,v,w,y,S,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let _=class{constructor(e,t,n,i,r,o,s){this.sharedProcess=e,this.windowsMainService=t,this.environmentService=n,this.lifecycleService=r,this.historyService=o,this.logService=s,this.disposables=[],this.onWindowOpen=p.Event.filter(p.Event.fromNodeEventEmitter(h.app,"browser-window-created",(e,t)=>t.id),e=>!!this.windowsMainService.getWindowById(e)),
this.onWindowBlur=p.Event.filter(p.Event.fromNodeEventEmitter(h.app,"browser-window-blur",(e,t)=>t.id),e=>!!this.windowsMainService.getWindowById(e)),this.onWindowMaximize=p.Event.filter(p.Event.fromNodeEventEmitter(h.app,"browser-window-maximize",(e,t)=>t.id),e=>!!this.windowsMainService.getWindowById(e)),this.onWindowUnmaximize=p.Event.filter(p.Event.fromNodeEventEmitter(h.app,"browser-window-unmaximize",(e,t)=>t.id),e=>!!this.windowsMainService.getWindowById(e)),this.onWindowFocus=p.Event.any(p.Event.map(p.Event.filter(p.Event.map(this.windowsMainService.onWindowsCountChanged,()=>this.windowsMainService.getLastActiveWindow()),e=>!!e),e=>e.id),p.Event.filter(p.Event.fromNodeEventEmitter(h.app,"browser-window-focus",(e,t)=>t.id),e=>!!this.windowsMainService.getWindowById(e))),this.onRecentlyOpenedChange=this.historyService.onRecentlyOpenedChange,i.registerHandler(this),p.Event.latch(p.Event.any(this.onWindowOpen,this.onWindowFocus))(e=>this._activeWindowId=e,null,this.disposables)}pickFileFolderAndOpen(e){
return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#pickFileFolderAndOpen"),this.windowsMainService.pickFileFolderAndOpen(e)})}pickFileAndOpen(e){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#pickFileAndOpen"),this.windowsMainService.pickFileAndOpen(e)})}pickFolderAndOpen(e){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#pickFolderAndOpen"),this.windowsMainService.pickFolderAndOpen(e)})}pickWorkspaceAndOpen(e){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#pickWorkspaceAndOpen"),this.windowsMainService.pickWorkspaceAndOpen(e)})}showMessageBox(e,t){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#showMessageBox",e),this.withWindow(e,e=>this.windowsMainService.showMessageBox(t,e),()=>this.windowsMainService.showMessageBox(t))})}showSaveDialog(e,t){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#showSaveDialog",e),
this.withWindow(e,e=>this.windowsMainService.showSaveDialog(t,e),()=>this.windowsMainService.showSaveDialog(t))})}showOpenDialog(e,t){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#showOpenDialog",e),this.withWindow(e,e=>this.windowsMainService.showOpenDialog(t,e),()=>this.windowsMainService.showOpenDialog(t))})}reloadWindow(e,t){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#reloadWindow",e),this.withWindow(e,e=>this.windowsMainService.reload(e,t))})}openDevTools(e,t){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#openDevTools",e),this.withWindow(e,e=>e.win.webContents.openDevTools(t))})}toggleDevTools(e){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#toggleDevTools",e),this.withWindow(e,e=>{const t=e.win.webContents;S.isMacintosh&&e.hasHiddenTitleBarStyle()&&!e.isFullScreen()&&!t.isDevToolsOpened()?t.openDevTools({mode:"undocked"}):t.toggleDevTools()})})}
updateTouchBar(e,t){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#updateTouchBar",e),this.withWindow(e,e=>e.updateTouchBar(t))})}closeWorkspace(e){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#closeWorkspace",e),this.withWindow(e,e=>this.windowsMainService.closeWorkspace(e))})}enterWorkspace(e,t){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#enterWorkspace",e),this.withWindow(e,e=>this.windowsMainService.enterWorkspace(e,t))})}toggleFullScreen(e){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#toggleFullScreen",e),this.withWindow(e,e=>e.toggleFullScreen())})}setRepresentedFilename(e,t){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#setRepresentedFilename",e),this.withWindow(e,e=>e.setRepresentedFilename(t))})}addRecentlyOpened(e){return i(this,void 0,void 0,function*(){
this.logService.trace("windowsService#addRecentlyOpened"),this.historyService.addRecentlyOpened(void 0,e)})}removeFromRecentlyOpened(e){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#removeFromRecentlyOpened"),this.historyService.removeFromRecentlyOpened(e)})}clearRecentlyOpened(){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#clearRecentlyOpened"),this.historyService.clearRecentlyOpened()})}getRecentlyOpened(e){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#getRecentlyOpened",e),this.withWindow(e,e=>this.historyService.getRecentlyOpened(e.config.workspace||e.config.folderUri,e.config.filesToOpen),()=>this.historyService.getRecentlyOpened())})}newWindowTab(){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#newWindowTab"),this.windowsMainService.openNewTabbedWindow(5)})}showPreviousWindowTab(){return i(this,void 0,void 0,function*(){
this.logService.trace("windowsService#showPreviousWindowTab"),h.Menu.sendActionToFirstResponder("selectPreviousTab:")})}showNextWindowTab(){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#showNextWindowTab"),h.Menu.sendActionToFirstResponder("selectNextTab:")})}moveWindowTabToNewWindow(){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#moveWindowTabToNewWindow"),h.Menu.sendActionToFirstResponder("moveTabToNewWindow:")})}mergeAllWindowTabs(){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#mergeAllWindowTabs"),h.Menu.sendActionToFirstResponder("mergeAllWindows:")})}toggleWindowTabsBar(){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#toggleWindowTabsBar"),h.Menu.sendActionToFirstResponder("toggleTabBar:")})}focusWindow(e){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#focusWindow",e),this.withWindow(e,e=>e.win.focus())})}closeWindow(e){
return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#closeWindow",e),this.withWindow(e,e=>e.win.close())})}isFocused(e){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#isFocused",e),this.withWindow(e,e=>e.win.isFocused(),()=>!1)})}isMaximized(e){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#isMaximized",e),this.withWindow(e,e=>e.win.isMaximized(),()=>!1)})}maximizeWindow(e){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#maximizeWindow",e),this.withWindow(e,e=>e.win.maximize())})}unmaximizeWindow(e){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#unmaximizeWindow",e),this.withWindow(e,e=>e.win.unmaximize())})}minimizeWindow(e){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#minimizeWindow",e),this.withWindow(e,e=>e.win.minimize())})}onWindowTitleDoubleClick(e){
return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#onWindowTitleDoubleClick",e),this.withWindow(e,e=>e.onWindowTitleDoubleClick())})}setDocumentEdited(e,t){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#setDocumentEdited",e),this.withWindow(e,e=>{e.win.isDocumentEdited()!==t&&e.win.setDocumentEdited(t)})})}openWindow(e,t,n){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#openWindow"),t&&t.length&&this.windowsMainService.open({context:5,contextWindowId:e,urisToOpen:t,cli:n&&n.args?Object.assign({},this.environmentService.args,n.args):this.environmentService.args,forceNewWindow:n&&n.forceNewWindow,forceReuseWindow:n&&n.forceReuseWindow,forceOpenWorkspaceAsFile:n&&n.forceOpenWorkspaceAsFile,diffMode:n&&n.diffMode,addMode:n&&n.addMode})})}openNewWindow(e){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#openNewWindow "+JSON.stringify(e)),this.windowsMainService.openNewWindow(5,e)})}
showWindow(e){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#showWindow",e),this.withWindow(e,e=>e.win.show())})}getWindows(){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#getWindows");return this.windowsMainService.getWindows().map(e=>({id:e.id,workspace:e.openedWorkspace,folderUri:e.openedFolderUri,title:e.win.getTitle(),filename:e.getRepresentedFilename()}))})}getWindowCount(){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#getWindowCount"),this.windowsMainService.getWindows().length})}log(e,...t){return i(this,void 0,void 0,function*(){console[e].apply(console,...t)})}showItemInFolder(e){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#showItemInFolder"),h.shell.showItemInFolder(e)})}getActiveWindowId(){return i(this,void 0,void 0,function*(){return this._activeWindowId})}openExternal(e){return i(this,void 0,void 0,function*(){
return this.logService.trace("windowsService#openExternal"),h.shell.openExternal(e)})}startCrashReporter(e){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#startCrashReporter"),h.crashReporter.start(e)})}quit(){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#quit"),this.windowsMainService.quit()})}relaunch(e){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#relaunch"),this.lifecycleService.relaunch(e)})}whenSharedProcessReady(){return i(this,void 0,void 0,function*(){return this.logService.trace("windowsService#whenSharedProcessReady"),this.sharedProcess.whenReady()})}toggleSharedProcess(){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#toggleSharedProcess"),this.sharedProcess.toggle()})}openAboutDialog(){return i(this,void 0,void 0,function*(){this.logService.trace("windowsService#openAboutDialog");let e=h.app.getVersion();u.default.target&&(e=`${e} (${u.default.target} setup)`)
;const t=n.localize(0,null,e,u.default.commit||"Unknown",u.default.date||"Unknown",process.versions.electron,process.versions.chrome,process.versions.node,process.versions.v8,`${r.type()} ${r.arch()} ${r.release()}`),i=n.localize(1,null),o=y.mnemonicButtonLabel(n.localize(2,null));let s;s=S.isLinux?[o,i]:[i,o],this.windowsMainService.showMessageBox({title:u.default.nameLong,type:"info",message:u.default.nameLong,detail:`\n${t}`,buttons:s,noLink:!0,defaultId:s.indexOf(i)},this.windowsMainService.getFocusedWindow()||this.windowsMainService.getLastActiveWindow()).then(e=>{s[e.button]===o&&h.clipboard.writeText(t)})})}handleURL(e){return i(this,void 0,void 0,function*(){return!(e.authority!==w.Schemas.file||!e.path)&&(this.openFileForURI({uri:l.URI.file(e.fsPath)}),!0)})}openFileForURI(e){const t=c.assign(Object.create(null),this.environmentService.args,{goto:!0}),n=[e];this.windowsMainService.open({context:5,cli:t,urisToOpen:n})}resolveProxy(e,t){return i(this,void 0,void 0,function*(){return new Promise(n=>{
const i=this.windowsMainService.getWindowById(e);i?i.win.webContents.session.resolveProxy(t,e=>{n(e)}):n()})})}withWindow(e,t,n){const i=this.windowsMainService.getWindowById(e);return i?t(i):n?n():void 0}dispose(){this.disposables=a.dispose(this.disposables)}};_=o([s(1,m.IWindowsMainService),s(2,d.IEnvironmentService),s(3,f.IURLService),s(4,g.ILifecycleService),s(5,v.IHistoryMainService),s(6,b.ILogService)],_),t.WindowsService=_}),define(t[22],n([1,0,5,90,8,3,4,27,124,36,31,42,33]),function(e,t,n,i,r,o,s,a,c,l,u,d,h){"use strict";function p(e){return f(e)||g(e)}function f(e){return e&&"object"==typeof e&&"string"==typeof e.path&&(!e.name||"string"==typeof e.name)}function g(e){return e&&"object"==typeof e&&"string"==typeof e.uri&&(!e.name||"string"==typeof e.name)}function m(e){return e instanceof r.URI}function v(e,t,n,i=!o.isWindows){if(e.scheme!==n.scheme||!a.isEqualAuthority(e.authority,n.authority))return{name:t,uri:e.toString(!0)};let r;return a.isEqualOrParent(e,n)?(r=a.relativePath(n,e)||".",
o.isWindows&&e.scheme===u.Schemas.file&&!i&&(r=r.replace(/\//g,"\\"))):e.scheme===u.Schemas.file?(r=e.fsPath,o.isWindows&&(r=d.normalizeDriveLetter(r),i&&(r=h.toSlashes(r)))):r=e.path,{name:t,path:r}}function w(e,t,n){let i=function(e,t){let n=l.parse(t);Array.isArray(n.folders)&&(n.folders=n.folders.filter(e=>p(e)));if(!Array.isArray(n.folders))throw new Error(`${e} looks like an invalid workspace file.`);return n}(t,e);const s=a.dirname(t),u=a.dirname(n),d=[],h=y(i.folders);for(const e of i.folders){let t=f(e)?a.resolvePath(s,e.path):r.URI.parse(e.uri);d.push(v(t,e.name,u,h))}let g=e;return c.setProperty(e,["folders"],d,{insertSpaces:!1,tabSize:4,eol:o.isLinux||o.isMacintosh?"\n":"\r\n"}).forEach(t=>{g=c.applyEdit(e,t)}),g}function y(e){if(o.isWindows){for(const t of e)if(f(t)&&t.path.indexOf(b)>=0)return!0;return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.IWorkspacesMainService=n.createDecorator("workspacesMainService"),t.IWorkspacesService=n.createDecorator("workspacesService"),
t.WORKSPACE_EXTENSION="code-workspace",t.WORKSPACE_FILTER=[{name:i.localize(0,null),extensions:[t.WORKSPACE_EXTENSION]}],t.UNTITLED_WORKSPACE_NAME="workspace.json",t.reviveWorkspaceIdentifier=function(e){return{id:e.id,configPath:r.URI.revive(e.configPath)}},t.isStoredWorkspaceFolder=p,t.isRawFileWorkspaceFolder=f,t.isRawUriWorkspaceFolder=g,t.isSingleFolderWorkspaceIdentifier=m,t.isWorkspaceIdentifier=function(e){const t=e;return t&&"string"==typeof t.id&&t.configPath instanceof r.URI},t.toWorkspaceIdentifier=function(e){return e.configuration?{configPath:e.configuration,id:e.id}:1===e.folders.length?e.folders[0].uri:void 0},t.isSingleFolderWorkspaceInitializationPayload=function(e){return m(e.folder)};const S="."+t.WORKSPACE_EXTENSION;t.hasWorkspaceFileExtension=function(e){return s.extname(e)===S};const b="/";t.getStoredWorkspaceFolder=v,t.rewriteWorkspaceFileForNewLocation=w,t.useSlashForPath=y}),define(t[166],n([1,0,3,33,22,27]),function(e,t,n,i,r,o){"use strict"
;function s({windows:e,newWindow:t,context:n,fileUri:i,localWorkspaceResolver:r}){if(!t&&i&&(4===n||0===n||1===n)){const t=function(e,t,n){for(const i of e){const e=i.openedWorkspace;if(e){const r=n(e);if(r){if(r.folders.some(e=>o.isEqualOrParent(t,e.uri)))return i}else if(o.isEqualOrParent(t,e.configPath))return i}}const i=e.filter(e=>e.openedFolderUri&&o.isEqualOrParent(t,e.openedFolderUri));if(i.length)return i.sort((e,t)=>-(e.openedFolderUri.path.length-t.openedFolderUri.path.length))[0];return null}(e,i,r);if(t)return t}return t?void 0:a(e)}function a(e){const t=Math.max.apply(Math,e.map(e=>e.lastFocusTime));return e.filter(e=>e.lastFocusTime===t)[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.findBestWindowOrFolderForFile=s,t.getLastActiveWindow=a,t.findWindowOnWorkspace=function(e,t){if(r.isSingleFolderWorkspaceIdentifier(t)){for(const n of e)if(r.isSingleFolderWorkspaceIdentifier(t)&&n.openedFolderUri&&o.isEqual(n.openedFolderUri,t))return n
}else if(r.isWorkspaceIdentifier(t))for(const n of e)if(n.openedWorkspace&&n.openedWorkspace.id===t.id)return n;return null},t.findWindowOnExtensionDevelopmentPath=function(e,t){for(const r of e)if(r.extensionDevelopmentPath&&i.isEqual(r.extensionDevelopmentPath,t,!n.isLinux))return r;return null},t.findWindowOnWorkspaceOrFolderUri=function(e,t){if(!t)return null;for(const n of e){if(n.openedWorkspace&&o.isEqual(n.openedWorkspace.configPath,t))return n;if(n.openedFolderUri&&o.isEqual(n.openedFolderUri,t))return n}return null}}),define(t[167],n([1,0,16,58,4,3,34,21,9,14,63,7,22,8,27,33,31,24]),function(e,t,n,r,a,c,l,u,d,h,p,f,g,m,v,w,y,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let b=class{constructor(e,t,n){this.configurationService=t,this.logService=n,this.backupHome=e.backupHome,this.workspacesJsonPath=e.backupWorkspacesPath}initialize(){return i(this,void 0,void 0,function*(){let e;try{e=JSON.parse(yield S.readFile(this.workspacesJsonPath,"utf8"))}catch(t){e=Object.create(null)}
e.emptyWorkspaceInfos?this.emptyWorkspaces=yield this.validateEmptyWorkspaces(e.emptyWorkspaceInfos):Array.isArray(e.emptyWorkspaces)?this.emptyWorkspaces=yield this.validateEmptyWorkspaces(e.emptyWorkspaces.map(e=>({backupFolder:e}))):this.emptyWorkspaces=[];let t=[];try{Array.isArray(e.rootURIWorkspaces)?t=e.rootURIWorkspaces.map(e=>({workspace:{id:e.id,configPath:m.URI.parse(e.configURIPath)},remoteAuthority:e.remoteAuthority})):Array.isArray(e.rootWorkspaces)&&(t=e.rootWorkspaces.map(e=>({workspace:{id:e.id,configPath:m.URI.file(e.configPath)}})))}catch(e){}this.rootWorkspaces=yield this.validateWorkspaces(t);let n=[];try{if(Array.isArray(e.folderURIWorkspaces))n=e.folderURIWorkspaces.map(e=>m.URI.parse(e));else if(Array.isArray(e.folderWorkspaces)){n=[];for(const t of e.folderWorkspaces){const e=this.getLegacyFolderHash(t),i=m.URI.file(t),r=this.getFolderHash(i);r!==e&&(yield this.moveBackupFolder(this.getBackupPath(r),this.getBackupPath(e))),n.push(i)}}}catch(e){}
this.folderWorkspaces=yield this.validateFolders(n),yield this.save()})}getWorkspaceBackups(){return this.isHotExitOnExitAndWindowClose()?[]:this.rootWorkspaces.slice(0)}getFolderBackupPaths(){return this.isHotExitOnExitAndWindowClose()?[]:this.folderWorkspaces.slice(0)}isHotExitEnabled(){return this.getHotExitConfig()!==p.HotExitConfiguration.OFF}isHotExitOnExitAndWindowClose(){return this.getHotExitConfig()===p.HotExitConfiguration.ON_EXIT_AND_WINDOW_CLOSE}getHotExitConfig(){const e=this.configurationService.getValue();return e&&e.files&&e.files.hotExit||p.HotExitConfiguration.ON_EXIT}getEmptyWindowBackupPaths(){return this.emptyWorkspaces.slice(0)}registerWorkspaceBackupSync(e,t){this.rootWorkspaces.some(t=>e.workspace.id===t.workspace.id)||(this.rootWorkspaces.push(e),this.saveSync());const n=this.getBackupPath(e.workspace.id);return t&&this.moveBackupFolderSync(n,t),n}moveBackupFolderSync(e,t){if(n.existsSync(e)&&this.convertToEmptyWindowBackupSync(e),n.existsSync(t))try{n.renameSync(t,e)}catch(e){
this.logService.error(`Backup: Could not move backup folder to new location: ${e.toString()}`)}}moveBackupFolder(e,t){return i(this,void 0,void 0,function*(){if((yield S.exists(e))&&(yield this.convertToEmptyWindowBackup(e)),yield S.exists(t))try{yield S.rename(t,e)}catch(e){this.logService.error(`Backup: Could not move backup folder to new location: ${e.toString()}`)}})}unregisterWorkspaceBackupSync(e){const t=e.id;let n=u.firstIndex(this.rootWorkspaces,e=>e.workspace.id===t);-1!==n&&(this.rootWorkspaces.splice(n,1),this.saveSync())}registerFolderBackupSync(e){return this.folderWorkspaces.some(t=>v.isEqual(e,t))||(this.folderWorkspaces.push(e),this.saveSync()),this.getBackupPath(this.getFolderHash(e))}unregisterFolderBackupSync(e){let t=u.firstIndex(this.folderWorkspaces,t=>v.isEqual(e,t));-1!==t&&(this.folderWorkspaces.splice(t,1),this.saveSync())}registerEmptyWindowBackupSync(e){let t=e.backupFolder,n=e.remoteAuthority;return t||(t=this.getRandomEmptyWindowId()),
this.emptyWorkspaces.some(e=>!!e.backupFolder&&w.isEqual(e.backupFolder,t,!c.isLinux))||(this.emptyWorkspaces.push({backupFolder:t,remoteAuthority:n}),this.saveSync()),this.getBackupPath(t)}unregisterEmptyWindowBackupSync(e){let t=u.firstIndex(this.emptyWorkspaces,t=>!!t.backupFolder&&w.isEqual(t.backupFolder,e,!c.isLinux));-1!==t&&(this.emptyWorkspaces.splice(t,1),this.saveSync())}getBackupPath(e){return a.join(this.backupHome,e)}validateWorkspaces(e){return i(this,void 0,void 0,function*(){if(!Array.isArray(e))return[];const t=Object.create(null),n=[];for(let i of e){const e=i.workspace;if(!g.isWorkspaceIdentifier(e))return[];if(!t[e.id]){t[e.id]=!0;const r=this.getBackupPath(e.id);(yield this.hasBackups(r))?e.configPath.scheme!==y.Schemas.file||(yield S.exists(e.configPath.fsPath))?n.push(i):yield this.convertToEmptyWindowBackup(r):yield this.deleteStaleBackup(r)}}return n})}validateFolders(e){return i(this,void 0,void 0,function*(){if(!Array.isArray(e))return[];const t=[],n=Object.create(null)
;for(let i of e){const e=v.getComparisonKey(i);if(!n[e]){n[e]=!0;const r=this.getBackupPath(this.getFolderHash(i));(yield this.hasBackups(r))?i.scheme!==y.Schemas.file||(yield S.exists(i.fsPath))?t.push(i):yield this.convertToEmptyWindowBackup(r):yield this.deleteStaleBackup(r)}}return t})}validateEmptyWorkspaces(e){return i(this,void 0,void 0,function*(){if(!Array.isArray(e))return[];const t=[],n=Object.create(null);for(let i of e){const e=i.backupFolder;if("string"!=typeof e)return[];if(!n[e]){n[e]=!0;const r=this.getBackupPath(e);(yield this.hasBackups(r))?t.push(i):yield this.deleteStaleBackup(r)}}return t})}deleteStaleBackup(e){return i(this,void 0,void 0,function*(){try{(yield S.exists(e))&&(yield S.del(e))}catch(e){this.logService.error(`Backup: Could not delete stale backup: ${e.toString()}`)}})}convertToEmptyWindowBackup(e){return i(this,void 0,void 0,function*(){let t=this.getRandomEmptyWindowId()
;for(;this.emptyWorkspaces.some(e=>!!e.backupFolder&&w.isEqual(e.backupFolder,t,c.isLinux));)t=this.getRandomEmptyWindowId();const n=this.getBackupPath(t);try{yield S.rename(e,n)}catch(e){return this.logService.error(`Backup: Could not rename backup folder: ${e.toString()}`),!1}return this.emptyWorkspaces.push({backupFolder:t}),!0})}convertToEmptyWindowBackupSync(e){let t=this.getRandomEmptyWindowId();for(;this.emptyWorkspaces.some(e=>!!e.backupFolder&&w.isEqual(e.backupFolder,t,c.isLinux));)t=this.getRandomEmptyWindowId();const i=this.getBackupPath(t);try{n.renameSync(e,i)}catch(e){return this.logService.error(`Backup: Could not rename backup folder: ${e.toString()}`),!1}return this.emptyWorkspaces.push({backupFolder:t}),!0}hasBackups(e){return i(this,void 0,void 0,function*(){try{const t=yield S.readdir(e);for(const n of t)try{if((yield S.readdir(a.join(e,n))).length>0)return!0}catch(e){}}catch(e){}return!1})}saveSync(){try{
l.writeFileAndFlushSync(this.workspacesJsonPath,JSON.stringify(this.serializeBackups()))}catch(e){this.logService.error(`Backup: Could not save workspaces.json: ${e.toString()}`)}}save(){return i(this,void 0,void 0,function*(){try{yield S.writeFile(this.workspacesJsonPath,JSON.stringify(this.serializeBackups()))}catch(e){this.logService.error(`Backup: Could not save workspaces.json: ${e.toString()}`)}})}serializeBackups(){return{rootURIWorkspaces:this.rootWorkspaces.map(e=>({id:e.workspace.id,configURIPath:e.workspace.configPath.toString(),remoteAuthority:e.remoteAuthority})),folderURIWorkspaces:this.folderWorkspaces.map(e=>e.toString()),emptyWorkspaceInfos:this.emptyWorkspaces,emptyWorkspaces:this.emptyWorkspaces.map(e=>e.backupFolder)}}getRandomEmptyWindowId(){return(Date.now()+Math.round(1e3*Math.random())).toString()}getFolderHash(e){let t;return t=e.scheme===y.Schemas.file?c.isLinux?e.fsPath:e.fsPath.toLowerCase():v.hasToIgnoreCase(e)?e.toString().toLowerCase():e.toString(),
r.createHash("md5").update(t).digest("hex")}getLegacyFolderHash(e){return r.createHash("md5").update(c.isLinux?e:e.toLowerCase()).digest("hex")}};b=o([s(0,d.IEnvironmentService),s(1,h.IConfigurationService),s(2,f.ILogService)],b),t.BackupMainService=b}),define(t[168],n([1,0,8,22]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restoreRecentlyOpened=function(e){const t={workspaces:[],files:[]};if(e){const i=e;if(Array.isArray(i.workspaces3))for(const e of i.workspaces3)"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.configURIPath?t.workspaces.push({id:e.id,configPath:n.URI.parse(e.configURIPath)}):"string"==typeof e&&t.workspaces.push(n.URI.parse(e));else if(Array.isArray(i.workspaces2))for(const e of i.workspaces2)"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.configPath?t.workspaces.push({id:e.id,configPath:n.URI.file(e.configPath)
}):"string"==typeof e&&t.workspaces.push(n.URI.parse(e));else if(Array.isArray(i.workspaces))for(const e of i.workspaces)"string"==typeof e?t.workspaces.push(n.URI.file(e)):"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.configPath?t.workspaces.push({id:e.id,configPath:n.URI.file(e.configPath)}):e&&"string"==typeof e.path&&"string"==typeof e.scheme&&t.workspaces.push(n.URI.revive(e));if(Array.isArray(i.files2))for(const e of i.files2)"string"==typeof e&&t.files.push(n.URI.parse(e));else if(Array.isArray(i.files))for(const e of i.files)"string"==typeof e&&t.files.push(n.URI.file(e))}return t},t.toStoreData=function(e){const t={workspaces3:[],files2:[]};for(const n of e.workspaces)i.isSingleFolderWorkspaceIdentifier(n)?t.workspaces3.push(n.toString()):t.workspaces3.push({id:n.id,configURIPath:n.configPath.toString()});for(const n of e.files)t.files2.push(n.toString());return t}}),define(t[169],n([1,0,5,22,84,27]),function(e,t,n,i,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})
;t.getSimpleWorkspaceLabel=function(e,t){if(i.isSingleFolderWorkspaceIdentifier(e))return o.basename(e);if(o.isEqualOrParent(e.configPath,t))return r.localize(0,null);const n=o.basename(e.configPath),s=n.substr(0,n.length-i.WORKSPACE_EXTENSION.length-1);return r.localize(1,null,s)},t.ILabelService=n.createDecorator("label")}),define(t[170],n([1,0,82,21,30,10,7,42,2,3,22,33,12,27,8,31,9,169,168]),function(e,t,n,i,r,a,c,l,u,d,h,p,f,g,m,v,w,y,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let b=class e{constructor(e,t,n,i){this.stateService=e,this.logService=t,this.workspacesMainService=n,this.environmentService=i,this._onRecentlyOpenedChange=new u.Emitter,this.onRecentlyOpenedChange=this._onRecentlyOpenedChange.event,this.macOSRecentDocumentsUpdater=new f.RunOnceScheduler(()=>this.updateMacOSRecentDocuments(),800)}addRecentlyOpened(t,n){if(t&&t.length>0||n&&n.length>0){const r=this.getRecentlyOpened();Array.isArray(t)&&t.forEach(e=>{
!h.isSingleFolderWorkspaceIdentifier(e)&&this.workspacesMainService.isUntitledWorkspace(e)||(r.workspaces.unshift(e),r.workspaces=i.distinct(r.workspaces,e=>this.distinctFn(e)))}),Array.isArray(n)&&n.forEach(e=>{r.files.unshift(e),r.files=i.distinct(r.files,e=>this.distinctFn(e)),d.isWindows&&e.scheme===v.Schemas.file&&a.app.addRecentDocument(e.fsPath)}),r.workspaces=r.workspaces.slice(0,e.MAX_TOTAL_RECENT_ENTRIES),r.files=r.files.slice(0,e.MAX_TOTAL_RECENT_ENTRIES),this.saveRecentlyOpened(r),this._onRecentlyOpenedChange.fire(),d.isMacintosh&&this.macOSRecentDocumentsUpdater.schedule()}}removeFromRecentlyOpened(e){const t=this.getRecentlyOpened();let n=!1;e.forEach(e=>{let r=i.firstIndex(t.workspaces,t=>{if(h.isWorkspaceIdentifier(e))return h.isWorkspaceIdentifier(t)&&g.isEqual(e.configPath,t.configPath,!d.isLinux);if(h.isSingleFolderWorkspaceIdentifier(e))return h.isSingleFolderWorkspaceIdentifier(t)&&g.isEqual(e,t);if("string"==typeof e){
if(h.isSingleFolderWorkspaceIdentifier(t))return t.scheme===v.Schemas.file&&p.isEqual(e,t.fsPath,!d.isLinux);if(h.isWorkspaceIdentifier(t))return t.configPath.scheme===v.Schemas.file&&p.isEqual(e,t.configPath.fsPath,!d.isLinux)}return!1});r>=0&&(t.workspaces.splice(r,1),n=!0),(r=i.firstIndex(t.files,t=>e instanceof m.URI?g.isEqual(t,e):"string"==typeof e&&p.isEqual(t.fsPath,e,!d.isLinux)))>=0&&(t.files.splice(r,1),n=!0)}),n&&(this.saveRecentlyOpened(t),this._onRecentlyOpenedChange.fire(),d.isMacintosh&&this.macOSRecentDocumentsUpdater.schedule())}updateMacOSRecentDocuments(){if(!d.isMacintosh)return;a.app.clearRecentDocuments();const t=this.getRecentlyOpened();let n=0;for(let i=0;i<t.workspaces.length&&n<e.MAX_MACOS_DOCK_RECENT_FOLDERS;i++){const e=t.workspaces[i];h.isSingleFolderWorkspaceIdentifier(e)?e.scheme===v.Schemas.file&&(a.app.addRecentDocument(g.originalFSPath(e)),n++):e.configPath.scheme===v.Schemas.file&&(a.app.addRecentDocument(g.originalFSPath(e.configPath)),n++)}n=0
;for(let i=0;i<t.files.length&&n<e.MAX_MACOS_DOCK_RECENT_FILES;i++){const e=t.files[i];e.scheme===v.Schemas.file&&(a.app.addRecentDocument(g.originalFSPath(e)),n++)}}clearRecentlyOpened(){this.saveRecentlyOpened({workspaces:[],files:[]}),a.app.clearRecentDocuments(),this._onRecentlyOpenedChange.fire()}getRecentlyOpened(e,t){let{workspaces:n,files:r}=this.getRecentlyOpenedFromStorage();return e&&n.unshift(e),t&&r.unshift(...i.coalesce(t.map(e=>e.fileUri))),n=i.distinct(n,e=>this.distinctFn(e)),r=i.distinct(r,e=>this.distinctFn(e)),n=n.filter(e=>h.isSingleFolderWorkspaceIdentifier(e)||!this.workspacesMainService.isUntitledWorkspace(e)),{workspaces:n,files:r}}distinctFn(e){return e instanceof m.URI?g.getComparisonKey(e):e.id}getRecentlyOpenedFromStorage(){const t=this.stateService.getItem(e.recentlyOpenedStorageKey);return S.restoreRecentlyOpened(t)}saveRecentlyOpened(t){const n=S.toStoreData(t);this.stateService.setItem(e.recentlyOpenedStorageKey,n)}updateWindowsJumpList(){if(!d.isWindows)return;const e=[]
;if(e.push({type:"tasks",items:[{type:"task",title:n.localize(0,null),description:n.localize(1,null),program:process.execPath,args:"-n",iconPath:process.execPath,iconIndex:0}]}),this.getRecentlyOpened().workspaces.length>0){let t=[];for(let e of a.app.getJumpListSettings().removedItems){const n=e.args;if(n){const e=/^--(folder|file)-uri\s+"([^"]+)"$/.exec(n);e&&t.push(m.URI.parse(e[2]))}}this.removeFromRecentlyOpened(t),e.push({type:"custom",name:n.localize(2,null),items:i.coalesce(this.getRecentlyOpened().workspaces.slice(0,7).map(e=>{const t=y.getSimpleWorkspaceLabel(e,this.environmentService.untitledWorkspacesHome);let i,r;if(h.isSingleFolderWorkspaceIdentifier(e)){const t=g.dirname(e);i=n.localize(3,null,l.getBaseLabel(e),l.getPathLabel(t,this.environmentService)),r=`--folder-uri "${e.toString()}"`}else i=n.localize(4,null),r=`--file-uri "${e.configPath.toString()}"`;return{type:"task",title:t,description:i,program:process.execPath,args:r,iconPath:"explorer.exe",iconIndex:0}}))})}e.push({type:"recent"})
;try{a.app.setJumpList(e)}catch(e){this.logService.warn("#setJumpList",e)}}};b.MAX_TOTAL_RECENT_ENTRIES=100,b.MAX_MACOS_DOCK_RECENT_FOLDERS=10,b.MAX_MACOS_DOCK_RECENT_FILES=5,b.recentlyOpenedStorageKey="openedPathsList",b=o([s(0,r.IStateService),s(1,c.ILogService),s(2,h.IWorkspacesMainService),s(3,w.IEnvironmentService)],b),t.HistoryMainService=b}),define(t[61],n([1,0,7,47,3,9,5,37,24,22,14,8,10,39,21]),function(e,t,n,i,r,a,c,l,u,d,h,p,f,g,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ID="launchService",t.ILaunchService=c.createDecorator(t.ID);class v{constructor(e){this.service=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,n){switch(t){case"start":const{args:e,userEnv:i}=n;return this.service.start(e,i);case"get-main-process-id":return this.service.getMainProcessId();case"get-main-process-info":return this.service.getMainProcessInfo();case"get-logs-path":return this.service.getLogsPath()}throw new Error(`Call not found: ${t}`)}}t.LaunchChannel=v;class w{constructor(e){
this.channel=e}start(e,t){return this.channel.call("start",{args:e,userEnv:t})}getMainProcessId(){return this.channel.call("get-main-process-id",null)}getMainProcessInfo(){return this.channel.call("get-main-process-info",null)}getLogsPath(){return this.channel.call("get-logs-path",null)}}t.LaunchChannelClient=w;let y=class{constructor(e,t,n,i,r,o){this.logService=e,this.windowsMainService=t,this.urlService=n,this.workspacesMainService=i,this.environmentService=r,this.configurationService=o}start(e,t){this.logService.trace("Received data from other instance: ",e,t);const n=function(e){return e["open-url"]&&e._urls&&e._urls.length>0?m.coalesce(e._urls.map(e=>{try{return p.URI.parse(e)}catch(e){return null}})):[]}(e);if(n.length){let e=Promise.resolve(null);if(0===this.windowsMainService.getWindowCount()){e=this.windowsMainService.openNewWindow(4)[0].ready()}return e.then(()=>{for(const e of n)this.urlService.open(e)}),Promise.resolve(void 0)}return this.startOpenWindow(e,t)}startOpenWindow(e,t){
const n=t.VSCODE_CLI?0:4;let i=[];if(e.extensionDevelopmentPath)this.windowsMainService.openExtensionDevelopmentHostWindow(e.extensionDevelopmentPath,{context:n,cli:e,userEnv:t});else if(g.hasArgs(e._)||g.hasArgs(e["folder-uri"])||g.hasArgs(e["file-uri"]))i=this.windowsMainService.open({context:n,cli:e,userEnv:t,forceNewWindow:e["new-window"],preferNewWindow:!e["reuse-window"]&&!e.wait,forceReuseWindow:e["reuse-window"],diffMode:e.diff,addMode:e.add});else{let o=!1;if(e["new-window"]||e["unity-launch"])o=!0;else if(e["reuse-window"])o=!1;else{const e=this.configurationService.getValue("window");switch(e&&e.openWithoutArgumentsInNewWindow||"default"){case"on":o=!0;break;case"off":o=!1;break;default:o=!r.isMacintosh}}i=o?this.windowsMainService.open({context:n,cli:e,userEnv:t,forceNewWindow:!0,forceEmpty:!0}):[this.windowsMainService.focusLastActive(e,n)]}
return e.wait&&e.waitMarkerFilePath&&1===i.length&&i[0]?Promise.race([this.windowsMainService.waitForWindowCloseOrLoad(i[0].id),u.whenDeleted(e.waitMarkerFilePath)]).then(()=>void 0,()=>void 0):Promise.resolve(void 0)}getMainProcessId(){return this.logService.trace("Received request for process ID from other instance."),Promise.resolve(process.pid)}getMainProcessInfo(){this.logService.trace("Received request for main process info from other instance.");const e=[];return f.BrowserWindow.getAllWindows().forEach(t=>{const n=this.windowsMainService.getWindowById(t.id);n?e.push(this.codeWindowToInfo(n)):e.push(this.browserWindowToInfo(t))}),Promise.resolve({mainPID:process.pid,mainArguments:process.argv.slice(1),windows:e})}getLogsPath(){return this.logService.trace("Received request for logs path from other instance."),Promise.resolve(this.environmentService.logsPath)}codeWindowToInfo(e){const t=[];if(e.openedFolderUri)t.push(e.openedFolderUri);else if(e.openedWorkspace){
const n=e.openedWorkspace.configPath,i=this.workspacesMainService.resolveLocalWorkspaceSync(n);if(i){i.folders.forEach(e=>{t.push(e.uri)})}}return this.browserWindowToInfo(e.win,t)}browserWindowToInfo(e,t=[]){return{pid:e.webContents.getOSProcessId(),title:e.getTitle(),folderURIs:t}}};y=o([s(0,n.ILogService),s(1,l.IWindowsMainService),s(2,i.IURLService),s(3,d.IWorkspacesMainService),s(4,a.IEnvironmentService),s(5,h.IConfigurationService)],y),t.LaunchService=y}),define(t[172],n([1,0,83,15,39,10,61,65,9,3,7,52]),function(e,t,n,i,r,a,c,l,u,d,h,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let f=class{constructor(e,t,n,i,r,o,s){this.machineId=e,this.userEnv=t,this.environmentService=n,this.launchService=i,this.logService=r,this.diagnosticsService=o,this.windowsService=s,this.registerListeners()}registerListeners(){a.ipcMain.on("vscode:issueSystemInfoRequest",e=>{this.getSystemInformation().then(t=>{e.sender.send("vscode:issueSystemInfoResponse",t)})}),
a.ipcMain.on("vscode:issuePerformanceInfoRequest",e=>{this.getPerformanceInfo().then(t=>{e.sender.send("vscode:issuePerformanceInfoResponse",t)})}),a.ipcMain.on("vscode:issueReporterConfirmClose",e=>{const t={message:n.localize(0,null),type:"warning",buttons:[n.localize(1,null),n.localize(2,null)]};this._issueWindow&&a.dialog.showMessageBox(this._issueWindow,t,e=>{0===e&&this._issueWindow&&(this._issueWindow.destroy(),this._issueWindow=null)})}),a.ipcMain.on("vscode:workbenchCommand",(e,t)=>{const{id:n,from:i,args:r}=t;let o;switch(i){case"issueReporter":o=this._issueParentWindow;break;case"processExplorer":o=this._processExplorerParentWindow;break;default:throw new Error(`Unexpected command source: ${i}`)}o&&o.webContents.send("vscode:runAction",{id:n,from:i,args:r})}),a.ipcMain.on("vscode:openExternal",(e,t)=>{this.windowsService.openExternal(t)}),a.ipcMain.on("vscode:closeIssueReporter",e=>{this._issueWindow&&this._issueWindow.close()}),a.ipcMain.on("windowsInfoRequest",e=>{
this.launchService.getMainProcessInfo().then(t=>{e.sender.send("vscode:windowsInfoResponse",t.windows)})})}openReporter(e){return new Promise(t=>{if(!this._issueWindow&&(this._issueParentWindow=a.BrowserWindow.getFocusedWindow(),this._issueParentWindow)){const t=this.getWindowPosition(this._issueParentWindow,700,800);this._issueWindow=new a.BrowserWindow({fullscreen:!1,width:t.width,height:t.height,minWidth:300,minHeight:200,x:t.x,y:t.y,title:n.localize(3,null),backgroundColor:e.styles.backgroundColor||"#1E1E1E"}),this._issueWindow.setMenuBarVisibility(!1);this.logService.trace("issueService#openReporter: opening issue reporter"),this._issueWindow.loadURL(this.getIssueReporterPath(e,{})),this._issueWindow.on("close",()=>this._issueWindow=null),this._issueParentWindow.on("closed",()=>{this._issueWindow&&(this._issueWindow.close(),this._issueWindow=null)})}this._issueWindow&&this._issueWindow.focus()})}openProcessExplorer(t){return new Promise(o=>{
if(!this._processExplorerWindow&&(this._processExplorerParentWindow=a.BrowserWindow.getFocusedWindow(),this._processExplorerParentWindow)){const o=this.getWindowPosition(this._processExplorerParentWindow,800,300);this._processExplorerWindow=new a.BrowserWindow({skipTaskbar:!0,resizable:!0,fullscreen:!1,width:o.width,height:o.height,minWidth:300,minHeight:200,x:o.x,y:o.y,backgroundColor:t.styles.backgroundColor,title:n.localize(4,null)}),this._processExplorerWindow.setMenuBarVisibility(!1);const s={appRoot:this.environmentService.appRoot,nodeCachedDataDir:this.environmentService.nodeCachedDataDir,windowId:this._processExplorerWindow.id,userEnv:this.userEnv,machineId:this.machineId,data:t},c=r.parseArgs(process.argv),l=i.assign(c,s);for(let e in l)void 0!==l[e]&&null!==l[e]&&""!==l[e]||delete l[e];this._processExplorerWindow.loadURL(`${e.toUrl("vs/code/electron-browser/processExplorer/processExplorer.html")}?config=${encodeURIComponent(JSON.stringify(l))}`),
this._processExplorerWindow.on("close",()=>this._processExplorerWindow=null),this._processExplorerParentWindow.on("close",()=>{this._processExplorerWindow&&(this._processExplorerWindow.close(),this._processExplorerWindow=null)})}this._processExplorerWindow&&this._processExplorerWindow.focus()})}getWindowPosition(e,t,n){let i;const r=a.screen.getAllDisplays();if(1===r.length)i=r[0];else{if(d.isMacintosh){const e=a.screen.getCursorScreenPoint();i=a.screen.getDisplayNearestPoint(e)}!i&&e&&(i=a.screen.getDisplayMatching(e.getBounds())),i||(i=a.screen.getPrimaryDisplay()||r[0])}const o={width:t,height:n},s=i.bounds;return o.x=s.x+s.width/2-o.width/2,o.y=s.y+s.height/2-o.height/2,s.width>0&&s.height>0&&(o.x<s.x&&(o.x=s.x),o.y<s.y&&(o.y=s.y),o.x>s.x+s.width&&(o.x=s.x),o.y>s.y+s.height&&(o.y=s.y),o.width>s.width&&(o.width=s.width),o.height>s.height&&(o.height=s.height)),o}getSystemInformation(){return new Promise((e,t)=>{this.launchService.getMainProcessInfo().then(t=>{e(this.diagnosticsService.getSystemInfo(t))})})}
getPerformanceInfo(){return new Promise((e,t)=>{this.launchService.getMainProcessInfo().then(n=>{this.diagnosticsService.getPerformanceInfo(n).then(t=>{e(t)}).catch(e=>{this.logService.warn("issueService#getPerformanceInfo ",e.message),t(e)})})})}getIssueReporterPath(t,n){if(!this._issueWindow)throw new Error("Issue window has been disposed");const o={appRoot:this.environmentService.appRoot,nodeCachedDataDir:this.environmentService.nodeCachedDataDir,windowId:this._issueWindow.id,machineId:this.machineId,userEnv:this.userEnv,data:t,features:n},s=r.parseArgs(process.argv),a=i.assign(s,o);for(let e in a)void 0!==a[e]&&null!==a[e]&&""!==a[e]||delete a[e];return`${e.toUrl("vs/code/electron-browser/issue/issueReporter.html")}?config=${encodeURIComponent(JSON.stringify(a))}`}};f=o([s(2,u.IEnvironmentService),s(3,c.ILaunchService),s(4,h.ILogService),s(5,l.IDiagnosticsService),s(6,p.IWindowsService)],f),t.IssueService=f}),define(t[173],n([1,0,2,22,8]),function(e,t,n,i,r){"use strict";function o(e){
return e&&e.configPath}Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(e){this.service=e,this.onWindowOpen=n.Event.buffer(e.onWindowOpen,!0),this.onWindowFocus=n.Event.buffer(e.onWindowFocus,!0),this.onWindowBlur=n.Event.buffer(e.onWindowBlur,!0),this.onWindowMaximize=n.Event.buffer(e.onWindowMaximize,!0),this.onWindowUnmaximize=n.Event.buffer(e.onWindowUnmaximize,!0),this.onRecentlyOpenedChange=n.Event.buffer(e.onRecentlyOpenedChange,!0)}listen(e,t){switch(t){case"onWindowOpen":return this.onWindowOpen;case"onWindowFocus":return this.onWindowFocus;case"onWindowBlur":return this.onWindowBlur;case"onWindowMaximize":return this.onWindowMaximize;case"onWindowUnmaximize":return this.onWindowUnmaximize;case"onRecentlyOpenedChange":return this.onRecentlyOpenedChange}throw new Error(`Event not found: ${t}`)}call(e,t,n){switch(t){case"pickFileFolderAndOpen":return this.service.pickFileFolderAndOpen(n);case"pickFileAndOpen":return this.service.pickFileAndOpen(n);case"pickFolderAndOpen":
return this.service.pickFolderAndOpen(n);case"pickWorkspaceAndOpen":return this.service.pickWorkspaceAndOpen(n);case"showMessageBox":return this.service.showMessageBox(n[0],n[1]);case"showSaveDialog":return this.service.showSaveDialog(n[0],n[1]);case"showOpenDialog":return this.service.showOpenDialog(n[0],n[1]);case"reloadWindow":return this.service.reloadWindow(n[0],n[1]);case"openDevTools":return this.service.openDevTools(n[0],n[1]);case"toggleDevTools":return this.service.toggleDevTools(n);case"closeWorkspace":return this.service.closeWorkspace(n);case"enterWorkspace":return this.service.enterWorkspace(n[0],r.URI.revive(n[1]));case"toggleFullScreen":return this.service.toggleFullScreen(n);case"setRepresentedFilename":return this.service.setRepresentedFilename(n[0],n[1]);case"addRecentlyOpened":return this.service.addRecentlyOpened(n.map(r.URI.revive));case"removeFromRecentlyOpened":{let e=n;return Array.isArray(e)&&(e=e.map(e=>o(e)?i.reviveWorkspaceIdentifier(e):"string"==typeof e?e:r.URI.revive(e))),
this.service.removeFromRecentlyOpened(e)}case"clearRecentlyOpened":return this.service.clearRecentlyOpened();case"newWindowTab":return this.service.newWindowTab();case"showPreviousWindowTab":return this.service.showPreviousWindowTab();case"showNextWindowTab":return this.service.showNextWindowTab();case"moveWindowTabToNewWindow":return this.service.moveWindowTabToNewWindow();case"mergeAllWindowTabs":return this.service.mergeAllWindowTabs();case"toggleWindowTabsBar":return this.service.toggleWindowTabsBar();case"updateTouchBar":return this.service.updateTouchBar(n[0],n[1]);case"getRecentlyOpened":return this.service.getRecentlyOpened(n);case"focusWindow":return this.service.focusWindow(n);case"closeWindow":return this.service.closeWindow(n);case"isFocused":return this.service.isFocused(n);case"isMaximized":return this.service.isMaximized(n);case"maximizeWindow":return this.service.maximizeWindow(n);case"unmaximizeWindow":return this.service.unmaximizeWindow(n);case"minimizeWindow":
return this.service.minimizeWindow(n);case"onWindowTitleDoubleClick":return this.service.onWindowTitleDoubleClick(n);case"setDocumentEdited":return this.service.setDocumentEdited(n[0],n[1]);case"openWindow":return this.service.openWindow(n[0],n[1]?n[1].map(e=>({uri:r.URI.revive(e.uri),typeHint:e.typeHint})):n[1],n[2]);case"openNewWindow":return this.service.openNewWindow(n);case"showWindow":return this.service.showWindow(n);case"getWindows":return this.service.getWindows();case"getWindowCount":return this.service.getWindowCount();case"relaunch":return this.service.relaunch(n[0]);case"whenSharedProcessReady":return this.service.whenSharedProcessReady();case"toggleSharedProcess":return this.service.toggleSharedProcess();case"quit":return this.service.quit();case"log":return this.service.log(n[0],n[1]);case"showItemInFolder":return this.service.showItemInFolder(n);case"getActiveWindowId":return this.service.getActiveWindowId();case"openExternal":return this.service.openExternal(n);case"startCrashReporter":
return this.service.startCrashReporter(n);case"openAboutDialog":return this.service.openAboutDialog();case"resolveProxy":return this.service.resolveProxy(n[0],n[1])}throw new Error(`Call not found: ${t}`)}}t.WindowsChannel=s;class a{constructor(e){this.channel=e}get onWindowOpen(){return this.channel.listen("onWindowOpen")}get onWindowFocus(){return this.channel.listen("onWindowFocus")}get onWindowBlur(){return this.channel.listen("onWindowBlur")}get onWindowMaximize(){return this.channel.listen("onWindowMaximize")}get onWindowUnmaximize(){return this.channel.listen("onWindowUnmaximize")}get onRecentlyOpenedChange(){return this.channel.listen("onRecentlyOpenedChange")}pickFileFolderAndOpen(e){return this.channel.call("pickFileFolderAndOpen",e)}pickFileAndOpen(e){return this.channel.call("pickFileAndOpen",e)}pickFolderAndOpen(e){return this.channel.call("pickFolderAndOpen",e)}pickWorkspaceAndOpen(e){return this.channel.call("pickWorkspaceAndOpen",e)}showMessageBox(e,t){
return this.channel.call("showMessageBox",[e,t])}showSaveDialog(e,t){return this.channel.call("showSaveDialog",[e,t])}showOpenDialog(e,t){return this.channel.call("showOpenDialog",[e,t])}reloadWindow(e,t){return this.channel.call("reloadWindow",[e,t])}openDevTools(e,t){return this.channel.call("openDevTools",[e,t])}toggleDevTools(e){return this.channel.call("toggleDevTools",e)}closeWorkspace(e){return this.channel.call("closeWorkspace",e)}enterWorkspace(e,t){return this.channel.call("enterWorkspace",[e,t]).then(e=>({backupPath:e.backupPath,workspace:i.reviveWorkspaceIdentifier(e.workspace)}))}toggleFullScreen(e){return this.channel.call("toggleFullScreen",e)}setRepresentedFilename(e,t){return this.channel.call("setRepresentedFilename",[e,t])}addRecentlyOpened(e){return this.channel.call("addRecentlyOpened",e)}removeFromRecentlyOpened(e){return this.channel.call("removeFromRecentlyOpened",e)}clearRecentlyOpened(){return this.channel.call("clearRecentlyOpened")}getRecentlyOpened(e){
return this.channel.call("getRecentlyOpened",e).then(e=>(e.workspaces=e.workspaces.map(e=>o(e)?i.reviveWorkspaceIdentifier(e):r.URI.revive(e)),e.files=e.files.map(r.URI.revive),e))}newWindowTab(){return this.channel.call("newWindowTab")}showPreviousWindowTab(){return this.channel.call("showPreviousWindowTab")}showNextWindowTab(){return this.channel.call("showNextWindowTab")}moveWindowTabToNewWindow(){return this.channel.call("moveWindowTabToNewWindow")}mergeAllWindowTabs(){return this.channel.call("mergeAllWindowTabs")}toggleWindowTabsBar(){return this.channel.call("toggleWindowTabsBar")}focusWindow(e){return this.channel.call("focusWindow",e)}closeWindow(e){return this.channel.call("closeWindow",e)}isFocused(e){return this.channel.call("isFocused",e)}isMaximized(e){return this.channel.call("isMaximized",e)}maximizeWindow(e){return this.channel.call("maximizeWindow",e)}unmaximizeWindow(e){return this.channel.call("unmaximizeWindow",e)}minimizeWindow(e){return this.channel.call("minimizeWindow",e)}
onWindowTitleDoubleClick(e){return this.channel.call("onWindowTitleDoubleClick",e)}setDocumentEdited(e,t){return this.channel.call("setDocumentEdited",[e,t])}quit(){return this.channel.call("quit")}relaunch(e){return this.channel.call("relaunch",[e])}whenSharedProcessReady(){return this.channel.call("whenSharedProcessReady")}toggleSharedProcess(){return this.channel.call("toggleSharedProcess")}openWindow(e,t,n){return this.channel.call("openWindow",[e,t,n])}openNewWindow(e){return this.channel.call("openNewWindow",e)}showWindow(e){return this.channel.call("showWindow",e)}getWindows(){return this.channel.call("getWindows").then(e=>{for(const t of e)t.folderUri&&(t.folderUri=r.URI.revive(t.folderUri)),t.workspace&&(t.workspace=i.reviveWorkspaceIdentifier(t.workspace));return e})}getWindowCount(){return this.channel.call("getWindowCount")}log(e,...t){return this.channel.call("log",[e,t])}showItemInFolder(e){return this.channel.call("showItemInFolder",e)}getActiveWindowId(){
return this.channel.call("getActiveWindowId")}openExternal(e){return this.channel.call("openExternal",e)}startCrashReporter(e){return this.channel.call("startCrashReporter",e)}updateTouchBar(e,t){return this.channel.call("updateTouchBar",[e,t])}openAboutDialog(){return this.channel.call("openAboutDialog")}resolveProxy(e,t){return Promise.resolve(this.channel.call("resolveProxy",[e,t]))}}t.WindowsChannelClient=a}),define(t[174],n([1,0,8,4,27,5,26,22,21,3]),function(e,t,n,i,r,o,s,a,c,l){"use strict";function u(e,t){let o=function(e,t){return e.map((e,o)=>{let s=null;if(a.isRawFileWorkspaceFolder(e))s=function(e,t){if(e){if(i.isAbsolute(e))return n.URI.file(e);if(t)return r.joinPath(t,e)}return null}(e.path,t);else if(a.isRawUriWorkspaceFolder(e))try{"/"!==(s=n.URI.parse(e.uri)).path[0]&&(s=s.with({path:"/"+s.path}))}catch(e){console.warn(e)}if(s)return new h({uri:s,name:e.name,index:o},e)})}(e,t);return function(e){return c.distinct(e,e=>l.isLinux?e.uri.toString():e.uri.toString().toLowerCase())
}(c.coalesce(o)).map(({uri:e,raw:t,name:n},i)=>new h({uri:e,name:n||r.basenameOrAuthority(e),index:i},t))}Object.defineProperty(t,"__esModule",{value:!0}),t.IWorkspaceContextService=o.createDecorator("contextService");!function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"}(t.WorkbenchState||(t.WorkbenchState={}));!function(e){e.isIWorkspace=function(e){return e&&"object"==typeof e&&"string"==typeof e.id&&Array.isArray(e.folders)}}(t.IWorkspace||(t.IWorkspace={}));!function(e){e.isIWorkspaceFolder=function(e){return e&&"object"==typeof e&&n.URI.isUri(e.uri)&&"string"==typeof e.name&&"function"==typeof e.toResource}}(t.IWorkspaceFolder||(t.IWorkspaceFolder={}));class d{constructor(e,t=[],n=null){this._id=e,this._configuration=n,this._foldersMap=s.TernarySearchTree.forPaths(),this.folders=t}update(e){this._id=e.id,this._configuration=e.configuration,this.folders=e.folders}get folders(){return this._folders}set folders(e){this._folders=e,this.updateFoldersMap()}get id(){
return this._id}get configuration(){return this._configuration}set configuration(e){this._configuration=e}getFolder(e){return e?this._foldersMap.findSubstr(e.toString())||null:null}updateFoldersMap(){this._foldersMap=s.TernarySearchTree.forPaths();for(const e of this.folders)this._foldersMap.set(e.uri.toString(),e)}toJSON(){return{id:this.id,folders:this.folders,configuration:this.configuration}}}t.Workspace=d;class h{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return r.joinPath(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}t.WorkspaceFolder=h,t.toWorkspaceFolders=u}),define(t[175],n([1,0,22,9,4,24,16,3,34,2,7,33,58,36,174,8,31,6,27]),function(e,t,n,i,r,a,c,l,u,d,h,p,f,g,m,v,w,y,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let b=class extends y.Disposable{constructor(e,t){super(),this.environmentService=e,this.logService=t,this._onUntitledWorkspaceDeleted=this._register(new d.Emitter),
this.untitledWorkspacesHome=e.untitledWorkspacesHome}get onUntitledWorkspaceDeleted(){return this._onUntitledWorkspaceDeleted.event}resolveLocalWorkspaceSync(e){if(!this.isWorkspacePath(e))return null;if(e.scheme!==w.Schemas.file)return null;let t;try{t=c.readFileSync(e.fsPath,"utf8")}catch(e){return null}return this.doResolveWorkspace(e,t)}isWorkspacePath(e){return this.isInsideWorkspacesHome(e)||n.hasWorkspaceFileExtension(e.path)}doResolveWorkspace(e,t){try{const n=this.doParseStoredWorkspace(e,t),i=this.getWorkspaceIdentifier(e);return{id:i.id,configPath:i.configPath,folders:m.toWorkspaceFolders(n.folders,S.dirname(e)),remoteAuthority:n.remoteAuthority}}catch(e){this.logService.warn(e.toString())}return null}doParseStoredWorkspace(e,t){let i=g.parse(t);if(Array.isArray(i.folders)&&(i.folders=i.folders.filter(e=>n.isStoredWorkspaceFolder(e))),!Array.isArray(i.folders))throw new Error(`${e.toString()} looks like an invalid workspace file.`);return i}isInsideWorkspacesHome(e){
return S.isEqualOrParent(e,this.environmentService.untitledWorkspacesHome)}createUntitledWorkspace(e,t){const{workspace:n,storedWorkspace:i}=this.newUntitledWorkspace(e,t),o=n.configPath.fsPath;return a.mkdirp(r.dirname(o)).then(()=>a.writeFile(o,JSON.stringify(i,null,"\t")).then(()=>n))}createUntitledWorkspaceSync(e,t){const{workspace:n,storedWorkspace:i}=this.newUntitledWorkspace(e,t),o=n.configPath.fsPath,s=r.dirname(o);if(!c.existsSync(s)){const e=r.dirname(s);c.existsSync(e)||c.mkdirSync(e),c.mkdirSync(s)}return u.writeFileAndFlushSync(o,JSON.stringify(i,null,"\t")),n}newUntitledWorkspace(e=[],t){const i=(Date.now()+Math.round(1e3*Math.random())).toString(),r=S.joinPath(this.untitledWorkspacesHome,i),o=S.joinPath(r,n.UNTITLED_WORKSPACE_NAME),s=[];for(const t of e)s.push(n.getStoredWorkspaceFolder(t.uri,t.name,r));return{workspace:this.getWorkspaceIdentifier(o),storedWorkspace:{folders:s,remoteAuthority:t}}}getWorkspaceId(e){let t=e.scheme===w.Schemas.file?S.originalFSPath(e):e.toString()
;return l.isLinux||(t=t.toLowerCase()),f.createHash("md5").update(t).digest("hex")}getWorkspaceIdentifier(e){return{configPath:e,id:this.getWorkspaceId(e)}}isUntitledWorkspace(e){return this.isInsideWorkspacesHome(e.configPath)}saveWorkspaceAs(e,t){if(e.configPath.scheme!==w.Schemas.file)throw new Error("Only local workspaces can be saved with this API. Use WorkspaceEditingService.saveWorkspaceAs on the renderer instead.");const i=S.originalFSPath(e.configPath);return p.isEqual(i,t,!l.isLinux)?Promise.resolve(e):a.readFile(i).then(i=>{const r=v.URI.file(t),o=n.rewriteWorkspaceFileForNewLocation(i.toString(),e.configPath,r);return a.writeFile(t,o).then(()=>this.getWorkspaceIdentifier(r))})}deleteUntitledWorkspaceSync(e){this.isUntitledWorkspace(e)&&(this.doDeleteUntitledWorkspaceSync(e),this._onUntitledWorkspaceDeleted.fire(e))}doDeleteUntitledWorkspaceSync(e){const t=S.originalFSPath(e.configPath);try{u.delSync(r.dirname(t));const n=r.join(this.environmentService.workspaceStorageHome,e.id)
;c.existsSync(n)&&c.writeFileSync(r.join(n,"obsolete"),"")}catch(e){this.logService.warn(`Unable to delete untitled workspace ${t} (${e}).`)}}getUntitledWorkspacesSync(){let e=[];try{const t=u.readdirSync(this.untitledWorkspacesHome.fsPath).map(e=>S.joinPath(this.untitledWorkspacesHome,e,n.UNTITLED_WORKSPACE_NAME));for(const n of t){const t=this.getWorkspaceIdentifier(n),i=this.resolveLocalWorkspaceSync(n);i?e.push({workspace:t,remoteAuthority:i.remoteAuthority}):this.doDeleteUntitledWorkspaceSync(t)}}catch(e){e&&"ENOENT"!==e.code&&this.logService.warn(`Unable to read folders in ${this.untitledWorkspacesHome} (${e}).`)}return e}};b=o([s(0,i.IEnvironmentService),s(1,h.ILogService)],b),t.WorkspacesMainService=b}),define(t[176],n([1,0,22,8]),function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.service=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,n){switch(t){case"createUntitledWorkspace":{const e=n[0],t=n[1];let r=void 0
;return Array.isArray(e)&&(r=e.map(e=>({uri:i.URI.revive(e.uri),name:e.name}))),this.service.createUntitledWorkspace(r,t)}}throw new Error(`Call not found: ${t}`)}}t.WorkspacesChannel=r;class o{constructor(e){this.channel=e}createUntitledWorkspace(e,t){return this.channel.call("createUntitledWorkspace",[e,t]).then(n.reviveWorkspaceIdentifier)}}t.WorkspacesChannelClient=o}),define(t[45],n([1,0,18,94,16,15,190,19]),function(e,t,n,r,o,s,a,c){"use strict";function l(t,o){let u;return(t.getRawRequest?Promise.resolve(t.getRawRequest(t)):Promise.resolve(function(t){return i(this,void 0,void 0,function*(){return("https:"===r.parse(t.url).protocol?yield new Promise((t,n)=>{e(["https"],t,n)}):yield new Promise((t,n)=>{e(["http"],t,n)})).request})}(t))).then(e=>new Promise((i,d)=>{const h=r.parse(t.url),p={hostname:h.hostname,port:h.port?parseInt(h.port):"https:"===h.protocol?443:80,protocol:h.protocol,path:h.path,method:t.type||"GET",headers:t.headers,agent:t.agent,
rejectUnauthorized:!n.isBoolean(t.strictSSL)||t.strictSSL};if(t.user&&t.password&&(p.auth=t.user+":"+t.password),(u=e(p,e=>{const r=n.isNumber(t.followRedirects)?t.followRedirects:3;if(e.statusCode&&e.statusCode>=300&&e.statusCode<400&&r>0&&e.headers.location)l(s.assign({},t,{url:e.headers.location,followRedirects:r-1}),o).then(i,d);else{let t=e;"gzip"===e.headers["content-encoding"]&&(t=t.pipe(a.createGunzip())),i({res:e,stream:t})}})).on("error",d),t.timeout&&u.setTimeout(t.timeout),t.data){if("string"!=typeof t.data)return void t.data.pipe(u);u.write(t.data)}u.end(),o.onCancellationRequested(()=>{u.abort(),d(c.canceled())})}))}function u(e){return e.res.statusCode&&e.res.statusCode>=200&&e.res.statusCode<300||1223===e.res.statusCode}function d(e){return 204===e.res.statusCode}Object.defineProperty(t,"__esModule",{value:!0}),t.request=l,t.download=function(e,t){return new Promise((n,i)=>{const r=o.createWriteStream(e);r.once("finish",()=>n(void 0)),t.stream.once("error",i),t.stream.pipe(r)})},
t.asText=function(e){return new Promise((t,n)=>{if(!u(e))return n("Server returned "+e.res.statusCode);if(d(e))return t(null);let i=[];e.stream.on("data",e=>i.push(e)),e.stream.on("end",()=>t(i.join(""))),e.stream.on("error",n)})},t.asJson=function(e){return new Promise((t,n)=>{if(!u(e))return n("Server returned "+e.res.statusCode);if(d(e))return t(null);const i=[];e.stream.on("data",e=>i.push(e)),e.stream.on("end",()=>{try{t(JSON.parse(i.join("")))}catch(e){n(e)}}),e.stream.on("error",n)})}}),define(t[178],n([1,0,23,4,21,19,100,74,15,43,32,45,46,20,119,9,24,34,29,26,35,7]),function(e,t,n,i,r,a,c,l,u,d,h,p,f,g,m,v,w,y,S,b,_,C){"use strict";function E(...e){return String(e.reduce((e,t)=>e|t,0))}function k(e,t){const n=(e||[]).filter(e=>e.statisticName===t)[0];return n?n.value:0}function I(e,t){return e.files.filter(e=>e.assetType===t)[0]?{uri:`${e.assetUri}/${t}`,fallbackUri:`${e.fallbackAssetUri}/${t}`}:null}function P(e,t){const n=e.properties?e.properties.filter(e=>e.key===t):[],i=n.length>0&&n[0].value
;return i?i.split(",").map(e=>l.adoptToGalleryExtensionId(e)):[]}function M(e){const t=e.properties?e.properties.filter(e=>e.key===L.Engine):[];return t.length>0&&t[0].value||""}function O(t,n,i,r,o){const s={manifest:I(n,x.Manifest),readme:I(n,x.Details),changelog:I(n,x.Changelog),license:I(n,x.License),repository:function(e){if(e.properties){const t=e.properties.filter(e=>e.key===x.Repository),n=new RegExp("((git|ssh|http(s)?)|(git@[w.]+))(:(//)?)([w.@:/-~]+)(.git)(/)?"),i=t.filter(e=>n.test(e.value))[0];return i?{uri:i.value,fallbackUri:i.value}:null}return I(e,x.Repository)}(n),download:function(e){return{uri:`${e.fallbackAssetUri}/${x.VSIX}?redirect=true`,fallbackUri:`${e.fallbackAssetUri}/${x.VSIX}`}}(n),icon:function(t){const n=I(t,x.Icon);if(n)return n;const i=e.toUrl("./media/defaultIcon.png");return{uri:i,fallbackUri:i}}(n),coreTranslations:function(e){
return e.files.filter(e=>0===e.assetType.indexOf("Microsoft.VisualStudio.Code.Translation.")).reduce((t,n)=>(t[n.assetType.substring("Microsoft.VisualStudio.Code.Translation.".length)]=I(e,n.assetType),t),{})}(n)};return{identifier:{id:l.getGalleryExtensionId(t.publisher.publisherName,t.extensionName),uuid:t.extensionId},name:t.extensionName,version:n.version,date:n.lastUpdated,displayName:t.displayName,publisherId:t.publisher.publisherId,publisher:t.publisher.publisherName,publisherDisplayName:t.publisher.displayName,description:t.shortDescription||"",installCount:k(t.statistics,"install")+k(t.statistics,"updateCount"),rating:k(t.statistics,"averagerating"),ratingCount:k(t.statistics,"ratingcount"),assets:s,properties:{dependencies:P(n,L.Dependency),extensionPack:P(n,L.ExtensionPack),engine:M(n),localizedLanguages:function(e){const t=e.properties?e.properties.filter(e=>e.key===L.LocalizedLanguages):[],n=t.length>0&&t[0].value||"";return n?n.split(","):[]}(n)},telemetryData:{
index:(r.pageNumber-1)*r.pageSize+i,searchText:r.searchText,querySource:o},preview:function(e){return-1!==e.indexOf("preview")}(t.flags)}}function A(e){const t=i.join(e.userDataPath,"machineid");return w.readFile(t,"utf8").then(e=>S.isUUID(e)?e:null,()=>null).then(e=>{if(!e){e=S.generateUuid();try{y.writeFileAndFlushSync(t,e)}catch(e){}}return{"X-Market-Client-Id":`VSCode ${f.default.version}`,"User-Agent":`VSCode ${f.default.version}`,"X-Market-User-Id":e}})}Object.defineProperty(t,"__esModule",{value:!0});var W;!function(e){e[e.None=0]="None",e[e.IncludeVersions=1]="IncludeVersions",e[e.IncludeFiles=2]="IncludeFiles",e[e.IncludeCategoryAndTags=4]="IncludeCategoryAndTags",e[e.IncludeSharedAccounts=8]="IncludeSharedAccounts",e[e.IncludeVersionProperties=16]="IncludeVersionProperties",e[e.ExcludeNonValidated=32]="ExcludeNonValidated",e[e.IncludeInstallationTargets=64]="IncludeInstallationTargets",e[e.IncludeAssetUri=128]="IncludeAssetUri",e[e.IncludeStatistics=256]="IncludeStatistics",
e[e.IncludeLatestVersionOnly=512]="IncludeLatestVersionOnly",e[e.Unpublished=4096]="Unpublished"}(W||(W={}));var D;!function(e){e[e.Tag=1]="Tag",e[e.ExtensionId=4]="ExtensionId",e[e.Category=5]="Category",e[e.ExtensionName=7]="ExtensionName",e[e.Target=8]="Target",e[e.Featured=9]="Featured",e[e.SearchText=10]="SearchText",e[e.ExcludeWithFlags=12]="ExcludeWithFlags"}(D||(D={}));const x={Icon:"Microsoft.VisualStudio.Services.Icons.Default",Details:"Microsoft.VisualStudio.Services.Content.Details",Changelog:"Microsoft.VisualStudio.Services.Content.Changelog",Manifest:"Microsoft.VisualStudio.Code.Manifest",VSIX:"Microsoft.VisualStudio.Services.VSIXPackage",License:"Microsoft.VisualStudio.Services.Content.License",Repository:"Microsoft.VisualStudio.Services.Links.Source"},L={Dependency:"Microsoft.VisualStudio.Code.ExtensionDependencies",ExtensionPack:"Microsoft.VisualStudio.Code.ExtensionPack",Engine:"Microsoft.VisualStudio.Code.Engine",LocalizedLanguages:"Microsoft.VisualStudio.Code.LocalizedLanguages"},T={
pageNumber:1,pageSize:10,sortBy:0,sortOrder:0,flags:W.None,criteria:[],assetTypes:[]};class F{constructor(e=T){this.state=e}get pageNumber(){return this.state.pageNumber}get pageSize(){return this.state.pageSize}get sortBy(){return this.state.sortBy}get sortOrder(){return this.state.sortOrder}get flags(){return this.state.flags}withPage(e,t=this.state.pageSize){return new F(u.assign({},this.state,{pageNumber:e,pageSize:t}))}withFilter(e,...t){const n=[...this.state.criteria,...t.map(t=>({filterType:e,value:t}))];return new F(u.assign({},this.state,{criteria:n}))}withSortBy(e){return new F(u.assign({},this.state,{sortBy:e}))}withSortOrder(e){return new F(u.assign({},this.state,{sortOrder:e}))}withFlags(...e){return new F(u.assign({},this.state,{flags:e.reduce((e,t)=>e|t,0)}))}withAssetTypes(...e){return new F(u.assign({},this.state,{assetTypes:e}))}get raw(){const{criteria:e,pageNumber:t,pageSize:n,sortBy:i,sortOrder:r,flags:o,assetTypes:s}=this.state;return{filters:[{criteria:e,pageNumber:t,pageSize:n,
sortBy:i,sortOrder:r}],assetTypes:s,flags:o}}get searchText(){const e=this.state.criteria.filter(e=>e.filterType===D.SearchText)[0];return e&&e.value?e.value:""}}let R=class e{constructor(e,t,n,i){this.requestService=e,this.logService=t,this.environmentService=n,this.telemetryService=i;const r=g.default.extensionsGallery;this.extensionsGalleryUrl=r&&r.serviceUrl,this.extensionsControlUrl=r&&r.controlUrl,this.commonHeadersPromise=A(this.environmentService)}api(e=""){return`${this.extensionsGalleryUrl}${e}`}isEnabled(){return!!this.extensionsGalleryUrl}getCompatibleExtension(e,t){const n=c.isIExtensionIdentifier(e)?null:e;if(n&&n.properties.engine&&m.isEngineValid(n.properties.engine))return Promise.resolve(n);const{id:i,uuid:r}=n?n.identifier:e;let o=(new F).withFlags(W.IncludeAssetUri,W.IncludeStatistics,W.IncludeFiles,W.IncludeVersionProperties,W.ExcludeNonValidated).withPage(1,1).withFilter(D.Target,"Microsoft.VisualStudio.Code").withFilter(D.ExcludeWithFlags,E(W.Unpublished))
;return o=r?o.withFilter(D.ExtensionId,r):o.withFilter(D.ExtensionName,i),this.queryGallery(o,_.CancellationToken.None).then(({galleryExtensions:e})=>{const[n]=e;if(!n||!n.versions.length)return null;if(t){const e=n.versions.filter(e=>e.version===t)[0];if(e){const t=O(n,e,0,o);if(t.properties.engine&&m.isEngineValid(t.properties.engine))return t}return null}return this.getLastValidExtensionVersion(n,n.versions).then(e=>e?O(n,e,0,o):null)})}query(e={}){if(!this.isEnabled())return Promise.reject(new Error("No extension gallery service configured."));const t=e.names?"ids":e.text?"text":"all";let n=e.text||"";const i=u.getOrDefault(e,e=>e.pageSize,50);this.telemetryService.publicLog("galleryService:query",{type:t,text:n});let r=(new F).withFlags(W.IncludeLatestVersionOnly,W.IncludeAssetUri,W.IncludeStatistics,W.IncludeFiles,W.IncludeVersionProperties).withPage(1,i).withFilter(D.Target,"Microsoft.VisualStudio.Code").withFilter(D.ExcludeWithFlags,E(W.Unpublished))
;return n?((n=(n=(n=n.replace(/\bcategory:("([^"]*)"|([^"]\S*))(\s+|\b|$)/g,(e,t,n)=>(r=r.withFilter(D.Category,n||t),""))).replace(/\btag:("([^"]*)"|([^"]\S*))(\s+|\b|$)/g,(e,t,n)=>(r=r.withFilter(D.Tag,n||t),""))).trim())&&(n=n.length<200?n:n.substring(0,200),r=r.withFilter(D.SearchText,n)),r=r.withSortBy(0)):r=e.ids?r.withFilter(D.ExtensionId,...e.ids):e.names?r.withFilter(D.ExtensionName,...e.names):r.withSortBy(4),"number"==typeof e.sortBy&&(r=r.withSortBy(e.sortBy)),"number"==typeof e.sortOrder&&(r=r.withSortOrder(e.sortOrder)),this.queryGallery(r,_.CancellationToken.None).then(({galleryExtensions:t,total:n})=>{return{firstPage:t.map((t,n)=>O(t,t.versions[0],n,r,e.source)),total:n,pageSize:r.pageSize,getPage:(t,n)=>{if(n.isCancellationRequested)return Promise.reject(a.canceled());const i=r.withPage(t+1);return this.queryGallery(i,n).then(({galleryExtensions:t})=>t.map((t,n)=>O(t,t.versions[0],n,i,e.source)))}}})}queryGallery(e,t){return this.isEnabled()?this.commonHeadersPromise.then(n=>{
const i=JSON.stringify(e.raw),r=u.assign({},n,{"Content-Type":"application/json",Accept:"application/json;api-version=3.0-preview.1","Accept-Encoding":"gzip","Content-Length":i.length});return this.requestService.request({type:"POST",url:this.api("/extensionquery"),data:i,headers:r},t).then(e=>e.res.statusCode&&e.res.statusCode>=400&&e.res.statusCode<500?{galleryExtensions:[],total:0}:p.asJson(e).then(e=>{if(e){const t=e.results[0],n=t.extensions,i=t.resultMetadata&&t.resultMetadata.filter(e=>"ResultCount"===e.metadataType)[0];return{galleryExtensions:n,total:i&&i.metadataItems.filter(e=>"TotalCount"===e.name)[0].count||0}}return{galleryExtensions:[],total:0}}))}):Promise.reject(new Error("No extension gallery service configured."))}reportStatistic(e,t,n,i){return this.isEnabled()?this.commonHeadersPromise.then(r=>{const o=Object.assign({},r,{Accept:"*/*;api-version=4.0-preview.1"});return this.requestService.request({type:"POST",url:this.api(`/publishers/${e}/extensions/${t}/${n}/stats?statType=${i}`),
headers:o},_.CancellationToken.None).then(void 0,()=>void 0)}):Promise.resolve(void 0)}download(e,t){this.logService.trace("ExtensionGalleryService#download",e.identifier.id);const r=i.join(n.tmpdir(),S.generateUuid()),o=l.getGalleryExtensionTelemetryData(e),s=(new Date).getTime(),a=1===t?"install":2===t?"update":"",c=a?{uri:`${e.assets.download.uri}&${a}=true`,fallbackUri:`${e.assets.download.fallbackUri}?${a}=true`}:e.assets.download;return this.getAsset(c).then(e=>p.download(r,e)).then(()=>(e=>this.telemetryService.publicLog("galleryService:downloadVSIX",u.assign(o,{duration:e})))((new Date).getTime()-s)).then(()=>r)}getReadme(e,t){return e.assets.readme?this.getAsset(e.assets.readme,{},t).then(e=>p.asText(e)).then(e=>e||""):Promise.resolve("")}getManifest(e,t){return e.assets.manifest?this.getAsset(e.assets.manifest,{},t).then(p.asText).then(JSON.parse):Promise.resolve(null)}getCoreTranslation(e,t){const n=e.assets.coreTranslations[t.toUpperCase()]
;return n?this.getAsset(n).then(p.asText).then(JSON.parse):Promise.resolve(null)}getChangelog(e,t){return e.assets.changelog?this.getAsset(e.assets.changelog,{},t).then(e=>p.asText(e)).then(e=>e||""):Promise.resolve("")}loadAllDependencies(e,t){return this.getDependenciesReccursively(e.map(e=>e.id),[],t)}getAllVersions(e,t){let n=(new F).withFlags(W.IncludeVersions,W.IncludeFiles,W.IncludeVersionProperties,W.ExcludeNonValidated).withPage(1,1).withFilter(D.Target,"Microsoft.VisualStudio.Code").withFilter(D.ExcludeWithFlags,E(W.Unpublished));return n=e.identifier.uuid?n.withFilter(D.ExtensionId,e.identifier.uuid):n.withFilter(D.ExtensionName,e.identifier.id),this.queryGallery(n,_.CancellationToken.None).then(({galleryExtensions:e})=>e.length?t?Promise.all(e[0].versions.map(e=>this.getEngine(e).then(t=>m.isEngineValid(t)?e:null))).then(e=>e.filter(e=>!!e).map(e=>({version:e.version,date:e.lastUpdated}))):e[0].versions.map(e=>({version:e.version,date:e.lastUpdated})):[])}loadDependencies(e,t){
if(!e||0===e.length)return Promise.resolve([]);let n=(new F).withFlags(W.IncludeLatestVersionOnly,W.IncludeAssetUri,W.IncludeStatistics,W.IncludeFiles,W.IncludeVersionProperties).withPage(1,e.length).withFilter(D.Target,"Microsoft.VisualStudio.Code").withFilter(D.ExcludeWithFlags,E(W.Unpublished)).withAssetTypes(x.Icon,x.License,x.Details,x.Manifest,x.VSIX).withFilter(D.ExtensionName,...e);return this.queryGallery(n,t).then(e=>{const t=[],i=[];for(let r=0;r<e.galleryExtensions.length;r++){const o=e.galleryExtensions[r];-1===i.indexOf(o.extensionId)&&(t.push(O(o,o.versions[0],r,n,"dependencies")),i.push(o.extensionId))}return t})}getDependenciesReccursively(t,n,i){return t&&t.length&&(t=n.length?t.filter(t=>!e.hasExtensionByName(n,t)):t).length?this.loadDependencies(t,i).then(t=>{const o=new Set;for(const e of t)e.properties.dependencies&&e.properties.dependencies.forEach(e=>o.add(e));n=r.distinct(n.concat(t),e=>e.identifier.uuid);const s=[];return o.forEach(t=>!e.hasExtensionByName(n,t)&&s.push(t)),
this.getDependenciesReccursively(s,n,i)}):Promise.resolve(n)}getAsset(e,t={},n=_.CancellationToken.None){return this.commonHeadersPromise.then(i=>{const r=u.assign({},i,t.headers||{});t=u.assign({},t,{type:"GET"},{headers:r});const o=e.uri,s=e.fallbackUri,c=u.assign({},t,{url:o});return this.requestService.request(c,n).then(e=>200===e.res.statusCode?Promise.resolve(e):p.asText(e).then(t=>Promise.reject(new Error(`Expected 200, got back ${e.res.statusCode} instead.\n\n${t}`)))).then(void 0,e=>{if(a.isPromiseCanceledError(e))return Promise.reject(e);const i=a.getErrorMessage(e);this.telemetryService.publicLog("galleryService:requestError",{url:o,cdn:!0,message:i}),this.telemetryService.publicLog("galleryService:cdnFallback",{url:o,message:i});const r=u.assign({},t,{url:s});return this.requestService.request(r,n).then(void 0,e=>{if(a.isPromiseCanceledError(e))return Promise.reject(e);const t=a.getErrorMessage(e);return this.telemetryService.publicLog("galleryService:requestError",{url:s,cdn:!1,message:t}),
Promise.reject(e)})})})}getLastValidExtensionVersion(e,t){const n=this.getLastValidExtensionVersionFromProperties(e,t);return n||this.getLastValidExtensionVersionReccursively(e,t)}getLastValidExtensionVersionFromProperties(e,t){for(const e of t){const t=M(e);if(!t)return null;if(m.isEngineValid(t))return Promise.resolve(e)}return null}getEngine(e){const t=M(e);if(t)return Promise.resolve(t);const n=I(e,x.Manifest);if(!n)return Promise.reject("Manifest was not found");return this.getAsset(n,{headers:{"Accept-Encoding":"gzip"}}).then(e=>p.asJson(e)).then(e=>e?e.engines.vscode:Promise.reject("Error while reading manifest"))}getLastValidExtensionVersionReccursively(e,t){if(!t.length)return Promise.resolve(null);const n=t[0];return this.getEngine(n).then(i=>m.isEngineValid(i)?(n.properties=n.properties||[],n.properties.push({key:L.Engine,value:i}),n):this.getLastValidExtensionVersionReccursively(e,t.slice(1)))}static hasExtensionByName(e,t){for(const n of e)if(`${n.publisher}.${n.name}`===t)return!0;return!1}
getExtensionsReport(){return this.isEnabled()?this.extensionsControlUrl?this.requestService.request({type:"GET",url:this.extensionsControlUrl},_.CancellationToken.None).then(e=>200!==e.res.statusCode?Promise.reject(new Error("Could not get extensions report.")):p.asJson(e).then(e=>{const t=new Map;if(e)for(const n of e.malicious){const e=t.get(n)||{id:{id:n},malicious:!0,slow:!1};e.malicious=!0,t.set(n,e)}return Promise.resolve(b.values(t))})):Promise.resolve([]):Promise.reject(new Error("No extension gallery service configured."))}};R=o([s(0,d.IRequestService),s(1,C.ILogService),s(2,v.IEnvironmentService),s(3,h.ITelemetryService)],R),t.ExtensionGalleryService=R,t.resolveMarketplaceHeaders=A}),define(t[179],n([1,0,4,15,75,8,30,10,9,7,14,39,20,52,6,3,22,54,186,178,56,12]),function(e,t,n,i,r,a,c,l,u,d,h,p,f,g,m,v,w,y,S,b,_,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultWindowState=function(e=1){return{width:1024,height:768,mode:e}};let E=class o extends m.Disposable{
constructor(e,t,n,i,r,o,s){super(),this.logService=t,this.environmentService=n,this.configurationService=i,this.stateService=r,this.workspacesMainService=o,this.backupMainService=s,this.touchBarGroups=[],this._lastFocusTime=-1,this._readyState=0,this.whenReadyCallbacks=[],this.createBrowserWindow(e),this.onConfigurationUpdated(),this.createTouchBar(),this.handleMarketplaceRequests(),this.registerListeners()}createBrowserWindow(e){this.windowState=this.restoreWindowState(e.state);const t=0===this.windowState.mode||3===this.windowState.mode,i={width:this.windowState.width,height:this.windowState.height,x:this.windowState.x,y:this.windowState.y,backgroundColor:_.getBackgroundColor(this.stateService),minWidth:o.MIN_WIDTH,minHeight:o.MIN_HEIGHT,show:!t,title:f.default.nameLong,webPreferences:{backgroundThrottling:!1}};v.isLinux&&(i.icon=n.join(this.environmentService.appRoot,"resources/linux/code.png"));const r=this.configurationService.getValue("window")
;v.isMacintosh&&!this.useNativeFullScreen()&&(i.fullscreenable=!1),v.isMacintosh&&(i.acceptFirstMouse=!0,r&&!1===r.clickThroughInactive&&(i.acceptFirstMouse=!1)),v.isMacintosh&&r&&!0===r.nativeTabs&&(i.tabbingIdentifier=f.default.nameShort);const s="custom"===g.getTitleBarStyle(this.configurationService,this.environmentService,!!e.extensionDevelopmentPath);s&&(i.titleBarStyle="hidden",this.hiddenTitleBarStyle=!0,v.isMacintosh||(i.frame=!1)),this._win=new l.BrowserWindow(i),this._id=this._win.id,v.isMacintosh&&s&&this._win.setSheetOffset(22),t&&(this._win.maximize(),3===this.windowState.mode&&this.setFullScreen(!0),this._win.isVisible()||this._win.show()),this._lastFocusTime=Date.now()}hasHiddenTitleBarStyle(){return this.hiddenTitleBarStyle}get isExtensionDevelopmentHost(){return!!this.config.extensionDevelopmentPath}get isExtensionTestHost(){return!!this.config.extensionTestsPath}get extensionDevelopmentPath(){return this.config.extensionDevelopmentPath}get config(){return this.currentConfig}get id(){
return this._id}get win(){return this._win}setRepresentedFilename(e){v.isMacintosh?this.win.setRepresentedFilename(e):this.representedFilename=e}getRepresentedFilename(){return v.isMacintosh?this.win.getRepresentedFilename():this.representedFilename}focus(){this._win&&(this._win.isMinimized()&&this._win.restore(),this._win.focus())}get lastFocusTime(){return this._lastFocusTime}get backupPath(){return this.currentConfig?this.currentConfig.backupPath:void 0}get openedWorkspace(){return this.currentConfig?this.currentConfig.workspace:void 0}get openedFolderUri(){return this.currentConfig?this.currentConfig.folderUri:void 0}get remoteAuthority(){return this.currentConfig?this.currentConfig.remoteAuthority:void 0}setReady(){for(this._readyState=3;this.whenReadyCallbacks.length;)this.whenReadyCallbacks.pop()(this)}ready(){return new Promise(e=>{if(this.isReady)return e(this);this.whenReadyCallbacks.push(e)})}get isReady(){return 3===this._readyState}handleMarketplaceRequests(){
this.marketplaceHeadersPromise=b.resolveMarketplaceHeaders(this.environmentService);this._win.webContents.session.webRequest.onBeforeSendHeaders({urls:["https://marketplace.visualstudio.com/*","https://*.vsassets.io/*"]},(e,t)=>{this.marketplaceHeadersPromise.then(n=>{t({cancel:!1,requestHeaders:i.assign(e.requestHeaders,n)})})})}registerListeners(){if(this._win.webContents.session.webRequest.onBeforeRequest(null,(e,t)=>{if(e.url.indexOf(".svg")>0){const n=a.URI.parse(e.url);if(n&&!n.scheme.match(/file/i)&&n.path.endsWith(".svg"))return t({cancel:!0})}return t({})}),this._win.webContents.session.webRequest.onHeadersReceived(null,(e,t)=>{const n=e.responseHeaders["content-type"]||e.responseHeaders["Content-Type"];return t(n&&Array.isArray(n)&&n.some(e=>e.toLowerCase().indexOf("image/svg")>=0)?{cancel:!0}:{cancel:!1,responseHeaders:e.responseHeaders})}),this._win.webContents.on("did-finish-load",()=>{this._readyState=1,this.pendingLoadConfig&&(this.currentConfig=this.pendingLoadConfig,
this.pendingLoadConfig=void 0),this._win&&!this._win.isVisible()&&(0===this.windowState.mode&&this._win.maximize(),this._win.isVisible()||this._win.show())}),this.registerNavigationListenerOn("app-command","browser-backward","browser-forward",!1),this._win.on("focus",()=>{this._lastFocusTime=Date.now()}),v.isMacintosh){const e=this._register(new C.RunOnceScheduler(()=>{this._win&&!this.useNativeFullScreen()&&this.isFullScreen()&&(this.setFullScreen(!1),this.setFullScreen(!0))},100)),t=()=>e.schedule();l.screen.on("display-metrics-changed",t),this._register(m.toDisposable(()=>l.screen.removeListener("display-metrics-changed",t))),l.screen.on("display-added",t),this._register(m.toDisposable(()=>l.screen.removeListener("display-added",t))),l.screen.on("display-removed",t),this._register(m.toDisposable(()=>l.screen.removeListener("display-removed",t)))}this._win.on("maximize",e=>{this.currentConfig&&(this.currentConfig.maximized=!0),l.app.emit("browser-window-maximize",e,this._win)}),
this._win.on("unmaximize",e=>{this.currentConfig&&(this.currentConfig.maximized=!1),l.app.emit("browser-window-unmaximize",e,this._win)}),this._win.on("enter-full-screen",()=>{this.sendWhenReady("vscode:enterFullScreen")}),this._win.on("leave-full-screen",()=>{this.sendWhenReady("vscode:leaveFullScreen")}),this._win.webContents.on("did-fail-load",(e,t,n,i,r)=>{this.logService.warn("[electron event]: fail to load, ",n)}),this._register(this.configurationService.onDidChangeConfiguration(e=>this.onConfigurationUpdated())),this._register(this.workspacesMainService.onUntitledWorkspaceDeleted(e=>this.onUntitledWorkspaceDeleted(e)))}onUntitledWorkspaceDeleted(e){this.openedWorkspace&&this.openedWorkspace.id===e.id&&(this.currentConfig.workspace=void 0)}onConfigurationUpdated(){const e=this.getMenuBarVisibility();if(e!==this.currentMenuBarVisibility&&(this.currentMenuBarVisibility=e,this.setMenuBarVisibility(e)),v.isMacintosh){const e=this.configurationService.getValue()
;e&&e.workbench&&e.workbench.editor&&e.workbench.editor.swipeToNavigate?this.registerNavigationListenerOn("swipe","left","right",!0):this._win.removeAllListeners("swipe")}}registerNavigationListenerOn(e,t,n,i){this._win.on(e,(e,r)=>{this.isReady&&(r===t?this.send("vscode:runAction",{id:i?"workbench.action.openPreviousRecentlyUsedEditor":"workbench.action.navigateBack",from:"mouse"}):r===n&&this.send("vscode:runAction",{id:i?"workbench.action.openNextRecentlyUsedEditor":"workbench.action.navigateForward",from:"mouse"}))})}addTabbedWindow(e){v.isMacintosh&&this._win.addTabbedWindow(e.win)}load(e,t,n){0===this._readyState?this.currentConfig=e:(this.pendingLoadConfig=e,this._readyState=2);const r=i.assign({},e);void 0!==n&&(r["disable-extensions"]=n),v.isMacintosh&&this._win.isDocumentEdited()&&(t&&this.backupMainService.isHotExitEnabled()||this._win.setDocumentEdited(!1)),t||(this.getRepresentedFilename()&&this.setRepresentedFilename(""),this._win.setTitle(f.default.nameLong)),S.mark("main:loadWindow"),
this._win.loadURL(this.getUrl(r)),this.environmentService.isBuilt||this.environmentService.extensionTestsLocationURI||(this.showTimeoutHandle=setTimeout(()=>{!this._win||this._win.isVisible()||this._win.isMinimized()||(this._win.show(),this._win.focus(),this._win.webContents.openDevTools())},1e4))}reload(e,t){const n=e||i.mixin({},this.currentConfig);delete n.filesToOpen,delete n.filesToCreate,delete n.filesToDiff,delete n.filesToWait,this.isExtensionDevelopmentHost&&t&&(n.verbose=t.verbose,n["inspect-extensions"]=t["inspect-extensions"],n["inspect-brk-extensions"]=t["inspect-brk-extensions"],n.debugId=t.debugId,n["extensions-dir"]=t["extensions-dir"]),n.isInitialStartup=!1;const r=t?t["disable-extensions"]:void 0;this.load(n,!0,r)}getUrl(e){e.windowId=this._win.id,e.logLevel=this.logService.getLevel();const t=this.configurationService.getValue("window"),r=t&&t.zoomLevel;"number"==typeof r&&(e.zoomLevel=r),e.fullscreen=this.isFullScreen();let s=!0;t&&!1===t.autoDetectHighContrast&&(s=!1),
e.highContrast=v.isWindows&&s&&l.systemPreferences.isInvertedColorScheme(),e.accessibilitySupport=l.app.isAccessibilitySupportEnabled(),e.maximized=this._win.isMaximized(),e.frameless=this.hasHiddenTitleBarStyle()&&!v.isMacintosh,e.perfEntries=S.exportEntries(),e.partsSplashPath=n.join(this.environmentService.userDataPath,"rapid_render.json");const a=p.parseArgs(process.argv),c=i.assign(a,e);for(let e in c)void 0!==c[e]&&null!==c[e]&&""!==c[e]&&!1!==c[e]||delete c[e];let u=this.doGetUrl(c);return u.length>o.MAX_URL_LENGTH&&(delete c.userEnv,this.logService.warn("Application URL exceeds maximum of 2MB and was shortened."),(u=this.doGetUrl(c)).length>o.MAX_URL_LENGTH&&this.logService.error("Application URL exceeds maximum of 2MB and cannot be loaded.")),u}doGetUrl(t){return`${e.toUrl("vs/code/electron-browser/workbench/workbench.html")}?config=${encodeURIComponent(JSON.stringify(t))}`}serializeWindowState(){if(!this._win)return t.defaultWindowState();if(this.isFullScreen()){
const e=l.screen.getDisplayMatching(this.getBounds()),n=t.defaultWindowState();return{mode:3,display:e?e.id:void 0,width:this.windowState.width||n.width,height:this.windowState.height||n.height,x:this.windowState.x||0,y:this.windowState.y||0}}const e=Object.create(null);let n;if(n=!v.isMacintosh&&this._win.isMaximized()?0:1,e.mode=0===n?0:1,1===n||0===n){const t=this.getBounds();e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height}return e}restoreWindowState(e){if(e)try{e=this.validateWindowState(e)||void 0}catch(e){this.logService.warn(`Unexpected error validating window state: ${e}\n${e.stack}`)}return e||(e=t.defaultWindowState()),e}validateWindowState(e){if(!e)return null;if("number"!=typeof e.x||"number"!=typeof e.y||"number"!=typeof e.width||"number"!=typeof e.height)return null;if(e.width<=0||e.height<=0)return null;const n=l.screen.getAllDisplays();if(1===n.length){const i=n[0].bounds;return 0!==e.mode&&i.width>0&&i.height>0&&(e.x<i.x&&(e.x=i.x),e.y<i.y&&(e.y=i.y),e.x>i.x+i.width&&(e.x=i.x),
e.y>i.y+i.height&&(e.y=i.y),e.width>i.width&&(e.width=i.width),e.height>i.height&&(e.height=i.height)),0===e.mode?t.defaultWindowState(0):e}if(e.display&&3===e.mode){const i=n.filter(t=>t.id===e.display)[0];if(i&&i.bounds&&"number"==typeof i.bounds.x&&"number"==typeof i.bounds.y){const e=t.defaultWindowState(3);return e.x=i.bounds.x,e.y=i.bounds.y,e}}const i={x:e.x,y:e.y,width:e.width,height:e.height},r=l.screen.getDisplayMatching(i);if(r&&i.x<r.bounds.x+r.bounds.width&&i.y<r.bounds.y+r.bounds.height&&i.x+i.width>r.bounds.x&&i.y+i.height>r.bounds.y){if(0===e.mode){const n=t.defaultWindowState(0);return n.x=e.x,n.y=e.y,n}return e}return null}getBounds(){const e=this._win.getPosition(),t=this._win.getSize();return{x:e[0],y:e[1],width:t[0],height:t[1]}}toggleFullScreen(){this.setFullScreen(!this.isFullScreen())}setFullScreen(e){this.useNativeFullScreen()?this.setNativeFullScreen(e):this.setSimpleFullScreen(e),this.sendWhenReady(e?"vscode:enterFullScreen":"vscode:leaveFullScreen"),
this.setMenuBarVisibility(this.currentMenuBarVisibility,!1)}isFullScreen(){return this._win.isFullScreen()||this._win.isSimpleFullScreen()}setNativeFullScreen(e){this._win.isSimpleFullScreen()&&this._win.setSimpleFullScreen(!1),this._win.setFullScreen(e)}setSimpleFullScreen(e){this._win.isFullScreen()&&this._win.setFullScreen(!1),this._win.setSimpleFullScreen(e),this._win.webContents.focus()}useNativeFullScreen(){const e=this.configurationService.getValue("window");return!e||"boolean"!=typeof e.nativeFullScreen||(!!e.nativeTabs||!1!==e.nativeFullScreen)}isMinimized(){return this._win.isMinimized()}getMenuBarVisibility(){const e=this.configurationService.getValue("window");if(!e||!e.menuBarVisibility)return"default";let t=e.menuBarVisibility;return["visible","toggle","hidden"].indexOf(t)<0&&(t="default"),t}setMenuBarVisibility(e,t=!0){v.isMacintosh||("toggle"===e&&t&&this.send("vscode:showInfoMessage",r.localize(0,null)),"hidden"===e?setTimeout(()=>{this.doSetMenuBarVisibility(e)
}):this.doSetMenuBarVisibility(e))}doSetMenuBarVisibility(e){const t=this.isFullScreen();switch(e){case"default":this._win.setMenuBarVisibility(!t),this._win.setAutoHideMenuBar(t);break;case"visible":this._win.setMenuBarVisibility(!0),this._win.setAutoHideMenuBar(!1);break;case"toggle":this._win.setMenuBarVisibility(!1),this._win.setAutoHideMenuBar(!0);break;case"hidden":this._win.setMenuBarVisibility(!1),this._win.setAutoHideMenuBar(!1)}}onWindowTitleDoubleClick(){if(v.isMacintosh){switch(l.systemPreferences.getUserDefault("AppleActionOnDoubleClick","string")){case"Minimize":this.win.minimize();break;case"None":break;case"Maximize":default:this.win.isMaximized()?this.win.unmaximize():this.win.maximize()}}else this.win.isMaximized()?this.win.unmaximize():this.win.maximize()}close(){this._win&&this._win.close()}sendWhenReady(e,...t){this.isReady?this.send(e,...t):this.ready().then(()=>this.send(e,...t))}send(e,...t){this._win&&this._win.webContents.send(e,...t)}updateTouchBar(e){
v.isMacintosh&&this.touchBarGroups.forEach((t,n)=>{const i=e[n];t.segments=this.createTouchBarGroupSegments(i)})}createTouchBar(){if(v.isMacintosh){for(let e=0;e<10;e++){const e=this.createTouchBarGroup();this.touchBarGroups.push(e)}this._win.setTouchBar(new l.TouchBar({items:this.touchBarGroups}))}}createTouchBarGroup(e=[]){const t=this.createTouchBarGroupSegments(e),n=new l.TouchBar.TouchBarSegmentedControl({segments:t,mode:"buttons",segmentStyle:"automatic",change:e=>{this.sendWhenReady("vscode:runAction",{id:n.segments[e].id,from:"touchbar"})}});return n}createTouchBarGroupSegments(e=[]){return e.map(e=>{let t;return e.iconLocation&&"file"===e.iconLocation.dark.scheme&&(t=l.nativeImage.createFromPath(a.URI.revive(e.iconLocation.dark).fsPath)).isEmpty()&&(t=void 0),{id:e.id,label:t?void 0:e.title,icon:t}})}dispose(){super.dispose(),this.showTimeoutHandle&&clearTimeout(this.showTimeoutHandle),this._win=null}};E.MIN_WIDTH=200,E.MIN_HEIGHT=120,E.MAX_URL_LENGTH=2097152,
E=o([s(1,d.ILogService),s(2,u.IEnvironmentService),s(3,h.IConfigurationService),s(4,c.IStateService),s(5,w.IWorkspacesMainService),s(6,y.IBackupMainService)],E),t.CodeWindow=E}),define(t[180],n([1,0,16,4,76,21,15,54,9,30,179,39,10,73,25,14,7,166,2,20,32,50,3,22,5,42,31,67,8,12,24,27,72,136]),function(e,t,n,i,r,a,c,l,u,d,h,p,f,g,m,v,w,y,S,b,_,C,E,k,I,P,M,O,A,W,D,x,L,T){"use strict";function F(e){return!!e.folderUri}function R(e){return!!e.workspace}Object.defineProperty(t,"__esModule",{value:!0});var U;!function(e){e[e.UNRESPONSIVE=1]="UNRESPONSIVE",e[e.CRASHED=2]="CRASHED"}(U||(U={}));let N=class e{constructor(t,n,i,r,o,s,a,c,l,u,d){this.machineId=t,this.logService=n,this.stateService=i,this.environmentService=r,this.lifecycleService=o,this.backupMainService=s,this.telemetryService=a,this.configurationService=c,this.historyMainService=l,this.workspacesMainService=u,this.instantiationService=d,this._onWindowReady=new S.Emitter,this.onWindowReady=this._onWindowReady.event,this._onWindowClose=new S.Emitter,
this.onWindowClose=this._onWindowClose.event,this._onWindowLoad=new S.Emitter,this.onWindowLoad=this._onWindowLoad.event,this._onWindowsCountChanged=new S.Emitter,this.onWindowsCountChanged=this._onWindowsCountChanged.event;const h=this.stateService.getItem(e.windowsStateStorageKey);this.windowsState=T.restoreWindowsState(h),Array.isArray(this.windowsState.openedWindows)||(this.windowsState.openedWindows=[]),this.dialogs=new B(r,a,i,this),this.workspacesManager=new j(u,s,r,l,this)}ready(e){this.initialUserEnv=e,this.registerListeners()}registerListeners(){f.ipcMain.on("vscode:workbenchReady",(e,t)=>{this.logService.trace("IPC#vscode-workbenchReady");const n=this.getWindowById(t);n&&(n.setReady(),this._onWindowReady.fire(n))}),E.isWindows&&f.systemPreferences.on("inverted-color-scheme-changed",()=>{f.systemPreferences.isInvertedColorScheme()?this.sendToAll("vscode:enterHighContrast"):this.sendToAll("vscode:leaveHighContrast")}),this.lifecycleService.onBeforeWindowUnload(e=>this.onBeforeWindowUnload(e)),
this.lifecycleService.onBeforeWindowClose(e=>this.onBeforeWindowClose(e)),this.lifecycleService.onBeforeShutdown(()=>this.onBeforeShutdown()),this.onWindowsCountChanged(e=>{e.newCount-e.oldCount>0&&(this.lastClosedWindowState=void 0)})}onBeforeShutdown(){const t={openedWindows:[],lastPluginDevelopmentHostWindow:this.windowsState.lastPluginDevelopmentHostWindow,lastActiveWindow:this.lastClosedWindowState};if(!t.lastActiveWindow){let n=this.getLastActiveWindow();n&&!n.isExtensionDevelopmentHost||(n=e.WINDOWS.filter(e=>!e.isExtensionDevelopmentHost)[0]),n&&(t.lastActiveWindow=this.toWindowState(n))}const n=e.WINDOWS.filter(e=>e.isExtensionDevelopmentHost&&!e.isExtensionTestHost)[0];n&&(t.lastPluginDevelopmentHostWindow=this.toWindowState(n)),this.getWindowCount()>1&&(t.openedWindows=e.WINDOWS.filter(e=>!e.isExtensionDevelopmentHost).map(e=>this.toWindowState(e))),this.stateService.setItem(e.windowsStateStorageKey,T.getWindowsStateStoreData(t))}onBeforeWindowClose(e){if(this.lifecycleService.quitRequested)return
;const t=this.toWindowState(e);e.isExtensionDevelopmentHost&&!e.isExtensionTestHost?this.windowsState.lastPluginDevelopmentHostWindow=t:e.isExtensionDevelopmentHost||!e.openedWorkspace&&!e.openedFolderUri||this.windowsState.openedWindows.forEach(n=>{const i=e.openedWorkspace&&n.workspace&&n.workspace.id===e.openedWorkspace.id,r=e.openedFolderUri&&n.folderUri&&x.isEqual(n.folderUri,e.openedFolderUri);(i||r)&&(n.uiState=t.uiState)}),1===this.getWindowCount()&&(this.lastClosedWindowState=t)}toWindowState(e){return{workspace:e.openedWorkspace,folderUri:e.openedFolderUri,backupPath:e.backupPath,remoteAuthority:e.remoteAuthority,uiState:e.serializeWindowState()}}open(e){this.logService.trace("windowsManager#open"),e=this.validateOpenConfig(e);let t=this.getPathsToOpen(e);const r=[],o=[],s=[],a=[];let c,l=0;for(const n of t)F(n)?e.addMode?r.push(n):o.push(n):R(n)?s.push(n):n.fileUri?(c||(c={filesToCreate:[],filesToOpen:[],filesToDiff:[],remoteAuthority:n.remoteAuthority}),
n.createFilePath?c.filesToCreate.push(n):c.filesToOpen.push(n)):n.backupPath?a.push({backupFolder:i.basename(n.backupPath),remoteAuthority:n.remoteAuthority}):l++;c&&e.diffMode&&2===c.filesToOpen.length&&(c.filesToDiff=c.filesToOpen,c.filesToOpen=[],c.filesToCreate=[]),c&&e.cli.wait&&e.cli.waitMarkerFilePath&&(c.filesToWait={paths:[...c.filesToDiff,...c.filesToOpen,...c.filesToCreate],waitMarkerFilePath:e.cli.waitMarkerFilePath});let u,d;!e.initialStartup||e.cli.extensionDevelopmentPath||e.cli["disable-restore-windows"]?a.length=0:(u=this.backupMainService.getFolderBackupPaths(),r.push(...u.map(e=>({folderUri:e,remoteAuhority:L.getRemoteAuthority(e),isRestored:!0}))),d=[...this.backupMainService.getWorkspaceBackups(),...this.workspacesMainService.getUntitledWorkspacesSync()],s.push(...d),a.push(...this.backupMainService.getEmptyWindowBackupPaths()));const h=this.doOpen(e,s,o,a,l,c,r);if(h.length>1){let t=!0,n=!0
;if(this.windowsState.lastActiveWindow&&!e.forceEmpty&&!p.hasArgs(e.cli._)&&!p.hasArgs(e.cli["file-uri"])&&!p.hasArgs(e.cli["folder-uri"])&&!(e.urisToOpen&&e.urisToOpen.length)){const e=h.filter(e=>e.backupPath===this.windowsState.lastActiveWindow.backupPath);e.length&&(e[0].focus(),t=!1,n=!1)}if(t)for(let e=h.length-1;e>=0;e--){const t=h[e];if(!(t.openedWorkspace&&d.some(e=>e.workspace.id===t.openedWorkspace.id)||t.openedFolderUri&&u.some(e=>x.isEqual(e.folderUri,t.openedFolderUri))||t.backupPath&&a.some(e=>e.backupFolder===i.basename(t.backupPath)))){t.focus(),n=!1;break}}n&&h[h.length-1].focus()}if(!h.some(e=>e.isExtensionDevelopmentHost)&&!e.diffMode){const e=[],n=[];t.forEach(t=>{t.workspace?e.push(t.workspace):t.folderUri?e.push(t.folderUri):t.fileUri&&n.push(t.fileUri)}),this.environmentService.skipAddToRecentlyOpened||this.historyMainService.addRecentlyOpened(e,n)}
return 0===e.context&&e.cli.wait&&e.cli.waitMarkerFilePath&&1===h.length&&h[0]&&this.waitForWindowCloseOrLoad(h[0].id).then(()=>n.unlink(e.cli.waitMarkerFilePath,e=>void 0)),h}validateOpenConfig(e){return!e.addMode||!e.initialStartup&&this.getLastActiveWindow()||(e.addMode=!1),e}doOpen(t,n,i,r,o,s,c){const l=[];let{openFolderInNewWindow:u,openFilesInNewWindow:d}=this.shouldOpenNewWindow(t);if(!t.initialStartup&&c.length>0){const e=c[0].remoteAuthority,t=this.getLastActiveWindowForAuthority(e);t&&l.push(this.doAddFoldersToExistingWindow(t,c.map(e=>e.folderUri)))}if(0===i.length+n.length+r.length&&s){const r=s.filesToOpen[0]||s.filesToCreate[0]||s.filesToDiff[0],o=e.WINDOWS.filter(e=>e.remoteAuthority===s.remoteAuthority);let a=y.findBestWindowOrFolderForFile({windows:o,newWindow:d,context:t.context,fileUri:r&&r.fileUri,localWorkspaceResolver:e=>e.configPath.scheme===M.Schemas.file?this.workspacesMainService.resolveLocalWorkspaceSync(e.configPath):null});a instanceof h.CodeWindow?a.openedWorkspace?n.push({
workspace:a.openedWorkspace,remoteAuthority:a.remoteAuthority}):a.openedFolderUri?i.push({folderUri:a.openedFolderUri,remoteAuthority:a.remoteAuthority}):(l.push(this.doOpenFilesInExistingWindow(t,a,s)),s=void 0):(l.push(this.openInBrowserWindow({userEnv:t.userEnv,cli:t.cli,initialStartup:t.initialStartup,fileInputs:s,forceNewWindow:!0,remoteAuthority:s.remoteAuthority,forceNewTabbedWindow:t.forceNewTabbedWindow})),s=void 0)}const p=a.distinct(n,e=>e.workspace.id);if(p.length>0){const n=a.coalesce(p.map(t=>y.findWindowOnWorkspace(e.WINDOWS,t.workspace)));if(n.length>0){const e=n[0],i=s&&s.remoteAuthority===e.remoteAuthority?s:void 0;l.push(this.doOpenFilesInExistingWindow(t,e,i)),i&&(s=void 0),u=!0}p.forEach(e=>{if(n.some(t=>t.openedWorkspace.id===e.workspace.id))return;const i=e.remoteAuthority,r=s&&s.remoteAuthority===i?s:void 0;l.push(this.doOpenFolderOrWorkspace(t,e,u,r)),r&&(s=void 0),u=!0})}const f=a.distinct(i,e=>x.getComparisonKey(e.folderUri));if(f.length>0){
const n=a.coalesce(f.map(t=>y.findWindowOnWorkspace(e.WINDOWS,t.folderUri)));if(n.length>0){const e=n[0],i=s&&s.remoteAuthority===e.remoteAuthority?s:void 0;l.push(this.doOpenFilesInExistingWindow(t,e,i)),i&&(s=void 0),u=!0}f.forEach(e=>{if(n.some(t=>x.isEqual(t.openedFolderUri,e.folderUri)))return;const i=e.remoteAuthority,r=s&&s.remoteAuthority===i?s:void 0;l.push(this.doOpenFolderOrWorkspace(t,e,u,r)),r&&(s=void 0),u=!0})}const g=a.distinct(r,e=>e.backupFolder||"");if(g.length>0&&g.forEach(e=>{const n=e.remoteAuthority,i=s&&s.remoteAuthority===n?s:void 0;l.push(this.openInBrowserWindow({userEnv:t.userEnv,cli:t.cli,initialStartup:t.initialStartup,fileInputs:i,remoteAuthority:n,forceNewWindow:!0,forceNewTabbedWindow:t.forceNewTabbedWindow,emptyWindowBackupInfo:e})),i&&(s=void 0),u=!0}),0===l.length||s){s&&!o&&o++;const e=s?s.remoteAuthority:t.cli&&t.cli.remote||void 0;for(let n=0;n<o;n++)l.push(this.openInBrowserWindow({userEnv:t.userEnv,cli:t.cli,initialStartup:t.initialStartup,remoteAuthority:e,
forceNewWindow:u,forceNewTabbedWindow:t.forceNewTabbedWindow,fileInputs:s})),s=void 0,u=!0}return a.distinct(l)}doOpenFilesInExistingWindow(e,t,n){t.focus();const i={};return n&&(i.filesToOpen=n.filesToOpen,i.filesToCreate=n.filesToCreate,i.filesToDiff=n.filesToDiff,i.filesToWait=n.filesToWait),e.userEnv&&(i.termProgram=e.userEnv.TERM_PROGRAM),t.sendWhenReady("vscode:openFiles",i),t}doAddFoldersToExistingWindow(e,t){return e.focus(),e.sendWhenReady("vscode:addFolders",{foldersToAdd:t}),e}doOpenFolderOrWorkspace(e,t,n,i,r){n||r||"number"!=typeof e.contextWindowId||(r=this.getWindowById(e.contextWindowId));return this.openInBrowserWindow({userEnv:e.userEnv,cli:e.cli,initialStartup:e.initialStartup,workspace:t.workspace,folderUri:t.folderUri,fileInputs:i,remoteAuthority:t.remoteAuthority,forceNewWindow:n,forceNewTabbedWindow:e.forceNewTabbedWindow,windowToUse:r})}getPathsToOpen(e){let t,n=!1;if(e.urisToOpen&&e.urisToOpen.length>0?(t=this.doExtractPathsFromAPI(e),
n=!0):e.forceEmpty?t=[Object.create(null)]:p.hasArgs(e.cli._)||p.hasArgs(e.cli["folder-uri"])||p.hasArgs(e.cli["file-uri"])?(t=this.doExtractPathsFromCLI(e.cli),n=!0):t=this.doGetWindowsFromLastSession(),!e.addMode&&n){const e=t.filter(e=>!!e.folderUri);if(e.length>1){let n=e[0].remoteAuthority;if(e.every(e=>e.remoteAuthority===n)){const i=this.workspacesMainService.createUntitledWorkspaceSync(e.map(e=>({uri:e.folderUri})));t.push({workspace:i,remoteAuthority:n}),t=t.filter(e=>!e.folderUri)}}}return t}doExtractPathsFromAPI(e){const t=[],n=e.cli;let i={gotoLineMode:n&&n.goto,forceOpenWorkspaceAsFile:e.forceOpenWorkspaceAsFile};for(const n of e.urisToOpen||[]){if(!n)continue;const e=this.parseUri(n.uri,n.typeHint,i);if(e)t.push(e);else{let e,t;n.uri.scheme===M.Schemas.file?(e=r.localize(0,null),t=r.localize(1,null,n.uri.fsPath)):(e=r.localize(2,null),t=r.localize(3,null,n.uri.toString()));const i={title:b.default.nameLong,type:"info",buttons:[r.localize(4,null)],message:e,detail:t,noLink:!0}
;this.dialogs.showMessageBox(i,this.getFocusedWindow())}}return t}doExtractPathsFromCLI(e){const t=[],n={ignoreFileNotFound:!0,gotoLineMode:e.goto,remoteAuthority:e.remote||void 0},i=p.asArray(e["folder-uri"]);for(let e of i){const i=this.parseUri(this.argToUri(e),"folder",n);i&&t.push(i)}const r=p.asArray(e["file-uri"]);for(let e of r){const n=this.parseUri(this.argToUri(e),"file");n&&t.push(n)}const o=p.asArray(e._);for(let e of o){const i=this.parsePath(e,n);i&&t.push(i)}return t.length?t:[Object.create(null)]}doGetWindowsFromLastSession(){const e=this.getRestoreWindowsSetting();switch(e){case"none":return[Object.create(null)];case"one":case"all":case"folders":const t=[];"one"!==e&&t.push(...this.windowsState.openedWindows),this.windowsState.lastActiveWindow&&t.push(this.windowsState.lastActiveWindow);const n=[];for(const i of t)if(i.workspace){const e=this.parseUri(i.workspace.configPath,"file",{remoteAuthority:i.remoteAuthority});e&&e.workspace&&n.push(e)}else if(i.folderUri){
const e=this.parseUri(i.folderUri,"folder",{remoteAuthority:i.remoteAuthority});e&&e.folderUri&&n.push(e)}else"folders"!==e&&i.backupPath&&n.push({backupPath:i.backupPath,remoteAuthority:i.remoteAuthority});if(n.length>0)return n}return[Object.create(null)]}getRestoreWindowsSetting(){let e;if(this.lifecycleService.wasRestarted)e="all";else{const t=this.configurationService.getValue("window");e=t&&t.restoreWindows||"one",-1===["all","folders","one","none"].indexOf(e)&&(e="one")}return e}argToUri(e){try{let t=A.URI.parse(e);return t.scheme?t:void this.logService.error(`Invalid URI input string, scheme missing: ${e}`)}catch(t){this.logService.error(`Invalid URI input string: ${e}, ${t.message}`)}}parseUri(e,t,n={}){if(!e||!e.scheme)return;if(e.scheme===M.Schemas.file)return this.parsePath(e.fsPath,n);const i=n.remoteAuthority||L.getRemoteAuthority(e);if(e=x.normalizePath(e),x.hasTrailingPathSeparator(e)&&(e=x.removeTrailingPathSeparator(e),t||(t="folder")),
t||!k.hasWorkspaceFileExtension(e.path)&&!n.gotoLineMode||(t="file"),"file"===t){if(n.gotoLineMode){const t=g.parseLineAndColumnAware(e.path);return{fileUri:e.with({path:t.path}),lineNumber:t.line,columnNumber:t.column,remoteAuthority:i}}return k.hasWorkspaceFileExtension(e.path)&&!n.forceOpenWorkspaceAsFile?{workspace:this.workspacesMainService.getWorkspaceIdentifier(e),remoteAuthority:i}:{fileUri:e,remoteAuthority:i}}return{folderUri:e,remoteAuthority:i}}parsePath(e,t){if(!e)return;let r,o;if(t.gotoLineMode){const t=g.parseLineAndColumnAware(e);r=t.line,o=t.column,e=t.path}const s=t.remoteAuthority,a=i.normalize(e);try{const e=n.statSync(a);if(e){if(e.isFile()){if(!t.forceOpenWorkspaceAsFile){const e=this.workspacesMainService.resolveLocalWorkspaceSync(A.URI.file(a));if(e)return{workspace:{id:e.id,configPath:e.configPath},remoteAuthority:e.remoteAuthority}}return{fileUri:A.URI.file(a),lineNumber:r,columnNumber:o,remoteAuthority:s}}if(e.isDirectory())return{folderUri:A.URI.file(a),remoteAuthority:s}}
}catch(e){this.historyMainService.removeFromRecentlyOpened([a]);const n=A.URI.file(a);if(t&&t.ignoreFileNotFound)return{fileUri:n,createFilePath:!0,remoteAuthority:s}}}shouldOpenNewWindow(e){const t=this.configurationService.getValue("window"),n=t&&t.openFoldersInNewWindow||"default",i=t&&t.openFilesInNewWindow||"off";let r=(e.preferNewWindow||e.forceNewWindow)&&!e.forceReuseWindow;e.forceNewWindow||e.forceReuseWindow||"on"!==n&&"off"!==n||(r="on"===n);let o=!1;return e.forceNewWindow||e.forceReuseWindow?o=!!e.forceNewWindow&&!e.forceReuseWindow:(E.isMacintosh?1===e.context&&(o=!0):3!==e.context&&2!==e.context&&(o=!0),e.cli.extensionDevelopmentPath||"on"!==i&&"off"!==i||(o="on"===i)),{openFolderInNewWindow:!!r,openFilesInNewWindow:o}}openExtensionDevelopmentHostWindow(t,n){const i=y.findWindowOnExtensionDevelopmentPath(e.WINDOWS,t);if(i)return this.reload(i,n.cli),void i.focus();let r=p.asArray(n.cli["folder-uri"]),o=p.asArray(n.cli["file-uri"]),s=n.cli._
;if(!(s.length||r.length||o.length||n.cli.extensionTestsPath)){const e=this.windowsState.lastPluginDevelopmentHostWindow,t=e&&(e.workspace||e.folderUri);t&&(k.isSingleFolderWorkspaceIdentifier(t)?t.scheme===M.Schemas.file?s=[t.fsPath]:r=[t.toString()]:t.configPath.scheme===M.Schemas.file?s=[x.originalFSPath(t.configPath)]:o=[t.configPath.toString()])}s.length&&s.some(t=>!!y.findWindowOnWorkspaceOrFolderUri(e.WINDOWS,A.URI.file(t)))&&(s=[]),r.length&&r.some(t=>!!y.findWindowOnWorkspaceOrFolderUri(e.WINDOWS,this.argToUri(t)))&&(r=[]),o.length&&o.some(t=>!!y.findWindowOnWorkspaceOrFolderUri(e.WINDOWS,this.argToUri(t)))&&(o=[]),n.cli._=s,n.cli["folder-uri"]=r,n.cli["file-uri"]=o;t.match(/^vscode-remote:\/\/([^\/]+)/)&&(n.cli.remote=A.URI.parse(t).authority),this.open({context:n.context,cli:n.cli,forceNewWindow:!0,forceEmpty:!s.length&&!r.length&&!o.length,userEnv:n.userEnv})}openInBrowserWindow(t){const n=c.mixin({},t.cli);n.appRoot=this.environmentService.appRoot,n.machineId=this.machineId,
n.nodeCachedDataDir=this.environmentService.nodeCachedDataDir,n.mainPid=process.pid,n.execPath=process.execPath,n.userEnv=c.assign({},this.initialUserEnv,t.userEnv||{}),n.isInitialStartup=t.initialStartup,n.workspace=t.workspace,n.folderUri=t.folderUri,n.remoteAuthority=t.remoteAuthority;const r=t.fileInputs;r&&(n.filesToOpen=r.filesToOpen,n.filesToCreate=r.filesToCreate,n.filesToDiff=r.filesToDiff,n.filesToWait=r.filesToWait),t.emptyWindowBackupInfo&&(n.backupPath=i.join(this.environmentService.backupHome,t.emptyWindowBackupInfo.backupFolder));let o;if(t.forceNewWindow||t.forceNewTabbedWindow||(o=t.windowToUse||this.getLastActiveWindow())&&o.focus(),o){const e=o.config;!n.extensionDevelopmentPath&&e&&e.extensionDevelopmentPath&&(n.extensionDevelopmentPath=e.extensionDevelopmentPath,n.verbose=e.verbose,n["inspect-brk-extensions"]=e["inspect-brk-extensions"],n.debugId=e.debugId,n["inspect-extensions"]=e["inspect-extensions"],n["extensions-dir"]=e["extensions-dir"])}else{
const i=this.configurationService.getValue("window"),r=this.getNewWindowState(n);let s;if(s=r.hasDefaultState?i&&i.newWindowDimensions&&["fullscreen","inherit"].indexOf(i.newWindowDimensions)>=0:this.lifecycleService.wasRestarted||i&&i.restoreFullscreen,3!==r.mode||s||(r.mode=1),o=this.instantiationService.createInstance(h.CodeWindow,{state:r,extensionDevelopmentPath:n.extensionDevelopmentPath,isExtensionTestHost:!!n.extensionTestsPath}),t.forceNewTabbedWindow){const e=this.getLastActiveWindow();e&&e.addTabbedWindow(o)}e.WINDOWS.push(o),this._onWindowsCountChanged.fire({oldCount:e.WINDOWS.length-1,newCount:e.WINDOWS.length}),o.win.webContents.removeAllListeners("devtools-reload-page"),o.win.webContents.on("devtools-reload-page",()=>this.reload(o)),o.win.webContents.on("crashed",()=>this.onWindowError(o,2)),o.win.on("unresponsive",()=>this.onWindowError(o,1)),o.win.on("closed",()=>this.onWindowClosed(o)),this.lifecycleService.registerWindow(o)}return o.isReady?this.lifecycleService.unload(o,4).then(e=>{
e||this.doOpenInBrowserWindow(o,n,t)}):this.doOpenInBrowserWindow(o,n,t),o}doOpenInBrowserWindow(e,t,n){if(!t.extensionDevelopmentPath)if(t.workspace)t.backupPath=this.backupMainService.registerWorkspaceBackupSync({workspace:t.workspace,remoteAuthority:t.remoteAuthority});else if(t.folderUri)t.backupPath=this.backupMainService.registerFolderBackupSync(t.folderUri);else{const e=n.emptyWindowBackupInfo&&n.emptyWindowBackupInfo.backupFolder;t.backupPath=this.backupMainService.registerEmptyWindowBackupSync({backupFolder:e,remoteAuthority:t.remoteAuthority})}e.load(t),this._onWindowLoad.fire(e.id)}getNewWindowState(e){const t=this.getLastActiveWindow();if(!e.extensionTestsPath){if(e.extensionDevelopmentPath&&this.windowsState.lastPluginDevelopmentHostWindow)return this.windowsState.lastPluginDevelopmentHostWindow.uiState;const n=e.workspace;if(n){const e=this.windowsState.openedWindows.filter(e=>e.workspace&&e.workspace.id===n.id).map(e=>e.uiState);if(e.length)return e[0]}if(e.folderUri){
const t=this.windowsState.openedWindows.filter(t=>t.folderUri&&x.isEqual(t.folderUri,e.folderUri)).map(e=>e.uiState);if(t.length)return t[0]}else if(e.backupPath){const t=this.windowsState.openedWindows.filter(t=>t.backupPath===e.backupPath).map(e=>e.uiState);if(t.length)return t[0]}const i=this.lastClosedWindowState||this.windowsState.lastActiveWindow;if(!t&&i)return i.uiState}let n;const i=f.screen.getAllDisplays();if(1===i.length)n=i[0];else{if(E.isMacintosh){const e=f.screen.getCursorScreenPoint();n=f.screen.getDisplayNearestPoint(e)}!n&&t&&(n=f.screen.getDisplayMatching(t.getBounds())),n||(n=f.screen.getPrimaryDisplay()||i[0])}let r=h.defaultWindowState();r.x=Math.round(n.bounds.x+n.bounds.width/2-r.width/2),r.y=Math.round(n.bounds.y+n.bounds.height/2-r.height/2);const o=this.configurationService.getValue("window");let s=!0;if(o&&o.newWindowDimensions)if("maximized"===o.newWindowDimensions)r.mode=0,s=!1;else if("fullscreen"===o.newWindowDimensions)r.mode=3,
s=!1;else if("inherit"===o.newWindowDimensions&&t){const e=t.serializeWindowState();3===e.mode?r.mode=3:r=e,s=!1}return s&&(r=this.ensureNoOverlap(r)),r.hasDefaultState=!0,r}ensureNoOverlap(t){if(0===e.WINDOWS.length)return t;t.x="number"==typeof t.x?t.x:0,t.y="number"==typeof t.y?t.y:0;const n=e.WINDOWS.map(e=>e.getBounds());for(;n.some(e=>e.x===t.x||e.y===t.y);)t.x+=30,t.y+=30;return t}reload(e,t){this.lifecycleService.unload(e,3).then(n=>{n||e.reload(void 0,t)})}closeWorkspace(e){this.openInBrowserWindow({cli:this.environmentService.args,windowToUse:e,remoteAuthority:e.remoteAuthority})}enterWorkspace(e,t){return this.workspacesManager.enterWorkspace(e,t).then(t=>t?this.doEnterWorkspace(e,t):void 0)}doEnterWorkspace(e,t){return this.historyMainService.addRecentlyOpened([t.workspace],[]),this._onWindowReady.fire(e),t}pickWorkspaceAndOpen(e){this.workspacesManager.pickWorkspaceAndOpen(e)}onBeforeWindowUnload(e){const t=1===e.reason,n=4===e.reason;if(!t&&!n)return;const i=e.window.openedWorkspace
;i&&this.workspacesMainService.isUntitledWorkspace(i)&&(e.window.config&&e.window.config.extensionDevelopmentPath?this.workspacesMainService.deleteUntitledWorkspaceSync(i):t&&!E.isMacintosh&&1===this.getWindowCount()||e.veto(this.workspacesManager.promptToSaveUntitledWorkspace(this.getWindowById(e.window.id),i).then(e=>e||W.timeout(0).then(()=>e))))}focusLastActive(e,t){const n=this.getLastActiveWindow();return n?(n.focus(),n):this.open({context:t,cli:e,forceEmpty:!0})[0]}getLastActiveWindow(){return y.getLastActiveWindow(e.WINDOWS)}getLastActiveWindowForAuthority(t){return y.getLastActiveWindow(e.WINDOWS.filter(e=>e.remoteAuthority===t))}openNewWindow(e,t){let n=this.environmentService.args,i=t&&t.remoteAuthority||void 0;return n&&n.remote!==i&&(n=Object.assign({},n,{remote:i})),this.open({context:e,cli:n,forceNewWindow:!0,forceEmpty:!0})}openNewTabbedWindow(e){return this.open({context:e,cli:this.environmentService.args,forceNewTabbedWindow:!0,forceEmpty:!0})}waitForWindowCloseOrLoad(e){
return new Promise(t=>{function n(n){n===e&&(i.dispose(),r.dispose(),t())}const i=this.onWindowClose(e=>n(e)),r=this.onWindowLoad(e=>n(e))})}sendToFocused(e,...t){const n=this.getFocusedWindow()||this.getLastActiveWindow();n&&n.sendWhenReady(e,...t)}sendToAll(t,n,i){e.WINDOWS.forEach(e=>{i&&i.indexOf(e.id)>=0||e.sendWhenReady(t,n)})}getFocusedWindow(){const e=f.BrowserWindow.getFocusedWindow();if(e)return this.getWindowById(e.id)}getWindowById(t){const n=e.WINDOWS.filter(e=>e.id===t);if(n&&1===n.length)return n[0]}getWindows(){return e.WINDOWS}getWindowCount(){return e.WINDOWS.length}onWindowError(e,t){if(this.logService.error(2===t?"[VS Code]: render process crashed!":"[VS Code]: detected unresponsive"),this.telemetryService.publicLog("windowerror",{type:t}),1===t){if(e.isExtensionDevelopmentHost||e.isExtensionTestHost||e.win&&e.win.webContents&&e.win.webContents.isDevToolsOpened())return;this.dialogs.showMessageBox({title:b.default.nameLong,type:"warning",
buttons:[P.mnemonicButtonLabel(r.localize(5,null)),P.mnemonicButtonLabel(r.localize(6,null)),P.mnemonicButtonLabel(r.localize(7,null))],message:r.localize(8,null),detail:r.localize(9,null),noLink:!0},e).then(t=>{e.win&&(0===t.button?e.reload():2===t.button&&(this.onBeforeWindowClose(e),e.win.destroy()))})}else this.dialogs.showMessageBox({title:b.default.nameLong,type:"warning",buttons:[P.mnemonicButtonLabel(r.localize(10,null)),P.mnemonicButtonLabel(r.localize(11,null))],message:r.localize(12,null),detail:r.localize(13,null),noLink:!0},e).then(t=>{e.win&&(0===t.button?e.reload():1===t.button&&(this.onBeforeWindowClose(e),e.win.destroy()))})}onWindowClosed(t){t.dispose();const n=e.WINDOWS.indexOf(t);e.WINDOWS.splice(n,1),this._onWindowsCountChanged.fire({oldCount:e.WINDOWS.length+1,newCount:e.WINDOWS.length}),this._onWindowClose.fire(t.id)}pickFileFolderAndOpen(e){this.doPickAndOpen(e,!0,!0)}pickFolderAndOpen(e){this.doPickAndOpen(e,!0,!1)}pickFileAndOpen(e){this.doPickAndOpen(e,!1,!0)}doPickAndOpen(e,t,n){
const i=e;i.pickFolders=t,i.pickFiles=n;const o=i.dialogOptions||Object.create(null);i.dialogOptions=o,i.dialogOptions.title||(i.dialogOptions.title=t&&n?r.localize(14,null):t?r.localize(15,null):r.localize(16,null)),i.telemetryEventName||(i.telemetryEventName=t&&n?"openFileFolder":t?"openFolder":"openFile"),this.dialogs.pickAndOpen(i)}showMessageBox(e,t){return this.dialogs.showMessageBox(e,t)}showSaveDialog(e,t){return this.dialogs.showSaveDialog(e,t)}showOpenDialog(e,t){return this.dialogs.showOpenDialog(e,t)}quit(){const e=this.getFocusedWindow();e&&e.isExtensionDevelopmentHost&&this.getWindowCount()>1?e.win.close():setTimeout(()=>{this.lifecycleService.quit()},10)}};N.windowsStateStorageKey="windowsState",N.WINDOWS=[],N=o([s(1,w.ILogService),s(2,d.IStateService),s(3,u.IEnvironmentService),s(4,m.ILifecycleService),s(5,l.IBackupMainService),s(6,_.ITelemetryService),s(7,v.IConfigurationService),s(8,C.IHistoryMainService),s(9,k.IWorkspacesMainService),s(10,I.IInstantiationService)],N),t.WindowsManager=N
;class B{constructor(e,t,n,i){this.environmentService=e,this.telemetryService=t,this.stateService=n,this.windowsMainService=i,this.mapWindowToDialogQueue=new Map,this.noWindowDialogQueue=new W.Queue}pickAndOpen(e){this.getFileOrFolderUris(e).then(t=>{const n=t?t.length:0;e.telemetryEventName&&this.telemetryService.publicLog(e.telemetryEventName,Object.assign({},e.telemetryExtraData,{outcome:n?"success":"canceled",numberOfPaths:n})),n&&this.windowsMainService.open({context:3,contextWindowId:e.windowId,cli:this.environmentService.args,urisToOpen:t,forceNewWindow:e.forceNewWindow,forceOpenWorkspaceAsFile:e.dialogOptions&&!c.equals(e.dialogOptions.filters,k.WORKSPACE_FILTER)})})}getFileOrFolderUris(e){const t=e.dialogOptions||Object.create(null);e.dialogOptions=t,t.defaultPath||(t.defaultPath=this.stateService.getItem(B.workingDirPickerStorageKey)),"boolean"!=typeof e.pickFiles&&"boolean"!=typeof e.pickFolders||(t.properties=void 0,
e.pickFiles&&e.pickFolders&&(t.properties=["multiSelections","openDirectory","openFile","createDirectory"])),t.properties||(t.properties=["multiSelections",e.pickFolders?"openDirectory":"openFile","createDirectory"]),E.isMacintosh&&t.properties.push("treatPackageAsDirectory");const n=("number"==typeof e.windowId?this.windowsMainService.getWindowById(e.windowId):void 0)||this.windowsMainService.getFocusedWindow();return this.showOpenDialog(t,n).then(e=>{if(e&&e.length>0){this.stateService.setItem(B.workingDirPickerStorageKey,i.dirname(e[0]));const t=[];for(const n of e)t.push({uri:A.URI.file(n)});return t}})}getDialogQueue(e){if(!e)return this.noWindowDialogQueue;let t=this.mapWindowToDialogQueue.get(e.id);return t||(t=new W.Queue,this.mapWindowToDialogQueue.set(e.id,t)),t}showMessageBox(e,t){return this.getDialogQueue(t).queue(()=>new Promise(n=>{f.dialog.showMessageBox(t?t.win:void 0,e,(e,t)=>{n({button:e,checkboxChecked:t})})}))}showSaveDialog(e,t){return this.getDialogQueue(t).queue(()=>new Promise(n=>{
f.dialog.showSaveDialog(t?t.win:void 0,e,e=>{n(function(e){return e&&E.isMacintosh&&(e=O.normalizeNFC(e)),e}(e))})}))}showOpenDialog(e,t){return this.getDialogQueue(t).queue(()=>new Promise(n=>{let i=Promise.resolve();e.defaultPath&&(i=D.exists(e.defaultPath).then(t=>{t||(e.defaultPath=void 0)})),i.then(()=>{f.dialog.showOpenDialog(t?t.win:void 0,e,e=>{n(function(e){return e&&e.length>0&&E.isMacintosh&&(e=e.map(e=>O.normalizeNFC(e))),e}(e))})})}))}}B.workingDirPickerStorageKey="pickerWorkingDir";class j{constructor(e,t,n,i,r){this.workspacesMainService=e,this.backupMainService=t,this.environmentService=n,this.historyMainService=i,this.windowsMainService=r}enterWorkspace(e,t){return e&&e.win&&e.isReady?this.isValidTargetWorkspacePath(e,t).then(n=>{if(!n)return null;const i=this.workspacesMainService.getWorkspaceIdentifier(t);return this.doOpenWorkspace(e,i)}):Promise.resolve(null)}isValidTargetWorkspacePath(e,t){if(!t)return Promise.resolve(!0)
;if(e.openedWorkspace&&x.isEqual(e.openedWorkspace.configPath,t))return Promise.resolve(!1);if(y.findWindowOnWorkspace(this.windowsMainService.getWindows(),this.workspacesMainService.getWorkspaceIdentifier(t))){const e={title:b.default.nameLong,type:"info",buttons:[r.localize(17,null)],message:r.localize(18,null,x.basename(t)),detail:r.localize(19,null),noLink:!0};return this.windowsMainService.showMessageBox(e,this.windowsMainService.getFocusedWindow()).then(()=>!1)}return Promise.resolve(!0)}doOpenWorkspace(e,t){e.focus();let n;return e.config.extensionDevelopmentPath||(n=this.backupMainService.registerWorkspaceBackupSync({workspace:t,remoteAuthority:e.remoteAuthority},e.config.backupPath)),e.openedWorkspace&&this.workspacesMainService.isUntitledWorkspace(e.openedWorkspace)&&this.workspacesMainService.deleteUntitledWorkspaceSync(e.openedWorkspace),e.config.folderUri=void 0,e.config.workspace=t,e.config.backupPath=n,{workspace:t,backupPath:n}}pickWorkspaceAndOpen(e){
const t=("number"==typeof e.windowId?this.windowsMainService.getWindowById(e.windowId):void 0)||this.windowsMainService.getFocusedWindow()||this.windowsMainService.getLastActiveWindow();this.windowsMainService.pickFileAndOpen({windowId:t?t.id:void 0,dialogOptions:{buttonLabel:P.mnemonicButtonLabel(r.localize(20,null)),title:r.localize(21,null),filters:k.WORKSPACE_FILTER,properties:["openFile"],defaultPath:e.dialogOptions&&e.dialogOptions.defaultPath},forceNewWindow:e.forceNewWindow,telemetryEventName:e.telemetryEventName,telemetryExtraData:e.telemetryExtraData})}promptToSaveUntitledWorkspace(e,t){let n;!function(e){e[e.SAVE=0]="SAVE",e[e.DONT_SAVE=1]="DONT_SAVE",e[e.CANCEL=2]="CANCEL"}(n||(n={}));const i={label:P.mnemonicButtonLabel(r.localize(22,null)),result:n.SAVE},o={label:P.mnemonicButtonLabel(r.localize(23,null)),result:n.DONT_SAVE},s={label:r.localize(24,null),result:n.CANCEL},a=[];E.isWindows?a.push(i,o,s):E.isLinux?a.push(o,s,i):a.push(i,s,o);const c={title:this.environmentService.appNameLong,
message:r.localize(25,null),detail:r.localize(26,null),noLink:!0,type:"warning",buttons:a.map(e=>e.label),cancelId:a.indexOf(s)};return E.isLinux&&(c.defaultId=2),this.windowsMainService.showMessageBox(c,e).then(i=>{switch(a[i.button].result){case n.CANCEL:return!0;case n.DONT_SAVE:return this.workspacesMainService.deleteUntitledWorkspaceSync(t),!1;case n.SAVE:return this.windowsMainService.showSaveDialog({buttonLabel:P.mnemonicButtonLabel(r.localize(27,null)),title:r.localize(28,null),filters:k.WORKSPACE_FILTER,defaultPath:this.getUntitledWorkspaceSaveDialogDefaultPath(t)},e).then(e=>!e||this.workspacesMainService.saveWorkspaceAs(t,e).then(e=>(this.historyMainService.addRecentlyOpened([e],[]),this.workspacesMainService.deleteUntitledWorkspaceSync(t),!1),()=>!1))}})}getUntitledWorkspaceSaveDialogDefaultPath(e){if(e){if(k.isSingleFolderWorkspaceIdentifier(e))return e.scheme===M.Schemas.file?i.dirname(e.fsPath):void 0
;const t=e.configPath.scheme===M.Schemas.file&&this.workspacesMainService.resolveLocalWorkspaceSync(e.configPath);if(t&&t.folders.length>0)for(const e of t.folders)if(e.uri.scheme===M.Schemas.file)return i.dirname(e.uri.fsPath)}}}}),define(t[181],n([1,0,15,45,93,14,7]),function(e,t,n,i,r,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let l=class{constructor(e,t){this.logService=t,this.disposables=[],this.configure(e.getValue()),e.onDidChangeConfiguration(()=>this.configure(e.getValue()),this,this.disposables)}configure(e){this.proxyUrl=e.http&&e.http.proxy,this.strictSSL=!(!e.http||!e.http.proxyStrictSSL),this.authorization=e.http&&e.http.proxyAuthorization}request(e,t,o=i.request){this.logService.trace("RequestService#request",e.url);const{proxyUrl:s,strictSSL:a}=this;return(e.agent?Promise.resolve(e.agent):Promise.resolve(r.getProxyAgent(e.url||"",{proxyUrl:s,strictSSL:a}))).then(i=>(e.agent=i,e.strictSSL=a,this.authorization&&(e.headers=n.assign(e.headers||{},{
"Proxy-Authorization":this.authorization})),o(e,t)))}};l=o([s(0,a.IConfigurationService),s(1,c.ILogService)],l),t.RequestService=l}),define(t[182],n([1,0,45,181,15,10]),function(e,t,n,i,r,o){"use strict";function s(e){return o.net.request}Object.defineProperty(t,"__esModule",{value:!0});class a extends i.RequestService{request(e,t){return super.request(e,t,e=>n.request(r.assign({},e||{},{getRawRequest:s}),t))}}t.RequestService=a}),define(t[183],n([1,0,20,14,25,43,28,32,9,7,59,45,10,35,4,41,16]),function(e,t,n,r,a,c,l,u,d,h,p,f,g,m,v,w,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let S=class extends p.AbstractUpdateService{constructor(e,t,n,i,r,o){super(e,t,i,r,o),this.telemetryService=n}buildUpdateFeedUrl(e){return p.createUpdateURL(`linux-${process.arch}`,e)}doCheckForUpdates(e){this.url&&(this.setState(l.State.CheckingForUpdates(e)),process.env.SNAP&&process.env.SNAP_REVISION?this.checkForSnapUpdate():this.requestService.request({url:this.url
},m.CancellationToken.None).then(f.asJson).then(t=>{t&&t.url&&t.version&&t.productVersion?this.setState(l.State.AvailableForDownload(t)):(this.telemetryService.publicLog("update:notAvailable",{explicit:!!e}),this.setState(l.State.Idle(1)))}).then(void 0,t=>{this.logService.error(t),this.telemetryService.publicLog("update:notAvailable",{explicit:!!e});const n=e?t.message||t:void 0;this.setState(l.State.Idle(1,n))}))}checkForSnapUpdate(){y.realpath(`${v.dirname(process.env.SNAP)}/current`,(e,t)=>{if(e)return void this.logService.error("update#checkForSnapUpdate(): Could not get realpath of application.");const n=v.basename(t);process.env.SNAP_REVISION!==n?this.setState(l.State.Ready({version:"",productVersion:""})):this.setState(l.State.Idle(1))})}doDownloadUpdate(e){return i(this,void 0,void 0,function*(){n.default.downloadUrl&&n.default.downloadUrl.length>0?g.shell.openExternal(n.default.downloadUrl):e.update.url&&g.shell.openExternal(e.update.url),this.setState(l.State.Idle(1))})}doQuitAndInstall(){
this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()");process.env.SNAP&&w.spawn("sleep 3 && $SNAP_NAME",{shell:!0,detached:!0,stdio:"ignore"})}};S=o([s(0,a.ILifecycleService),s(1,r.IConfigurationService),s(2,u.ITelemetryService),s(3,d.IEnvironmentService),s(4,c.IRequestService),s(5,h.ILogService)],S),t.LinuxUpdateService=S}),define(t[184],n([1,0,16,4,24,49,14,25,43,20,28,32,9,7,59,45,126,23,41,10,35,12]),function(e,t,n,r,a,c,l,u,d,h,p,f,g,m,v,w,y,S,b,_,C,E){"use strict";function k(){return void 0===I&&(I=n.existsSync(r.join(r.dirname(process.execPath),"unins000.exe"))?0:1),I}Object.defineProperty(t,"__esModule",{value:!0});let I=void 0,P=class extends v.AbstractUpdateService{constructor(e,t,n,i,r,o){super(e,t,i,r,o),this.telemetryService=n,0===k()&&n.publicLog("update:win32SetupTarget",{target:h.default.target})}get cachePath(){const e=r.join(S.tmpdir(),`vscode-update-${h.default.target}-${process.arch}`);return a.mkdirp(e,void 0).then(()=>e)}buildUpdateFeedUrl(e){let t="win32"
;return"x64"===process.arch&&(t+="-x64"),1===k()?t+="-archive":"user"===h.default.target&&(t+="-user"),v.createUpdateURL(t,e)}doCheckForUpdates(e){this.url&&(this.setState(p.State.CheckingForUpdates(e)),this.requestService.request({url:this.url},C.CancellationToken.None).then(w.asJson).then(t=>{const n=k();return t&&t.url&&t.version&&t.productVersion?1===n?(this.setState(p.State.AvailableForDownload(t)),Promise.resolve(null)):(this.setState(p.State.Downloading(t)),this.cleanup(t.version).then(()=>this.getUpdatePackagePath(t.version).then(e=>a.exists(e).then(n=>{if(n)return Promise.resolve(e);const i=t.url,r=t.hash,o=`${e}.tmp`;return this.requestService.request({url:i},C.CancellationToken.None).then(e=>w.download(o,e)).then(r?()=>y.checksum(o,t.hash):()=>void 0).then(()=>a.rename(o,e)).then(()=>e)})).then(e=>{const n=this.configurationService.getValue("update.enableWindowsBackgroundUpdates");this.availableUpdate={packagePath:e},
n&&t.supportsFastUpdate?"user"===h.default.target?this.doApplyUpdate():this.setState(p.State.Downloaded(t)):this.setState(p.State.Ready(t))}))):(this.telemetryService.publicLog("update:notAvailable",{explicit:!!e}),this.setState(p.State.Idle(n)),Promise.resolve(null))}).then(void 0,t=>{this.logService.error(t),this.telemetryService.publicLog("update:notAvailable",{explicit:!!e});const n=e?t.message||t:void 0;this.setState(p.State.Idle(k(),n))}))}doDownloadUpdate(e){return i(this,void 0,void 0,function*(){e.update.url&&_.shell.openExternal(e.update.url),this.setState(p.State.Idle(k()))})}getUpdatePackagePath(e){return i(this,void 0,void 0,function*(){const t=yield this.cachePath;return r.join(t,`CodeSetup-${h.default.quality}-${e}.exe`)})}cleanup(e=null){return i(this,void 0,void 0,function*(){const t=e?t=>!new RegExp(`${h.default.quality}-${e}\\.exe$`).test(t):()=>!0,n=yield this.cachePath,o=(yield a.readdir(n)).filter(t).map(e=>i(this,void 0,void 0,function*(){try{yield a.unlink(r.join(n,e))}catch(e){}}))
;yield Promise.all(o)})}doApplyUpdate(){return i(this,void 0,void 0,function*(){if("downloaded"!==this.state.type&&"downloading"!==this.state.type)return Promise.resolve(void 0);if(!this.availableUpdate)return Promise.resolve(void 0);const t=this.state.update;this.setState(p.State.Updating(t));const n=yield this.cachePath;this.availableUpdate.updateFilePath=r.join(n,`CodeSetup-${h.default.quality}-${t.version}.flag`),yield a.writeFile(this.availableUpdate.updateFilePath,"flag");b.spawn(this.availableUpdate.packagePath,["/verysilent",`/update="${this.availableUpdate.updateFilePath}"`,"/nocloseapplications","/mergetasks=runcode,!desktopicon,!quicklaunchicon"],{detached:!0,stdio:["ignore","ignore","ignore"],windowsVerbatimArguments:!0}).once("exit",()=>{this.availableUpdate=void 0,this.setState(p.State.Idle(k()))});const o=`${h.default.win32MutexName}-ready`,s=e.__$__nodeRequire("windows-mutex").isActive;(function(e,t=1e3){return i(this,void 0,void 0,function*(){for(;!e();)yield E.timeout(t)})
})(()=>s(o)).then(()=>this.setState(p.State.Ready(t)))})}doQuitAndInstall(){"ready"===this.state.type&&this.availableUpdate&&(this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),this.state.update.supportsFastUpdate&&this.availableUpdate.updateFilePath?n.unlinkSync(this.availableUpdate.updateFilePath):b.spawn(this.availableUpdate.packagePath,["/silent","/mergetasks=runcode,!desktopicon,!quicklaunchicon"],{detached:!0,stdio:["ignore","ignore","ignore"]}))}getUpdateType(){return k()}};o([c.memoize],P.prototype,"cachePath",null),P=o([s(0,u.ILifecycleService),s(1,l.IConfigurationService),s(2,f.ITelemetryService),s(3,g.IEnvironmentService),s(4,d.IRequestService),s(5,m.ILogService)],P),t.Win32UpdateService=P}),
define(t[185],n([1,0,10,3,180,52,173,164,25,143,28,153,128,51,137,61,5,57,55,7,30,9,14,47,156,32,142,144,141,66,48,20,46,159,6,37,50,18,134,8,176,22,62,184,183,149,107,108,172,114,19,163,160,132,64,162,117,39,12,122,56,23,4,165,72,133,150,139,146,17,167,54,170,155,175]),function(e,t,n,r,a,c,l,u,d,h,p,f,g,m,v,w,y,S,b,_,C,E,k,I,P,M,O,A,W,D,x,L,T,F,R,U,N,B,j,z,$,K,q,H,V,G,Y,Q,J,X,Z,ee,te,ne,ie,re,oe,se,ae,ce,le,ue,de,he,pe,fe,ge,me,ve,we,ye,Se,be,_e,Ce){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let Ee=class t extends R.Disposable{constructor(e,t,n,i,r,o,s,a){super(),this.mainIpcServer=e,this.userEnv=t,this.instantiationService=n,this.logService=i,this.environmentService=r,this.lifecycleService=o,this.configurationService=s,this.stateService=a,this._register(e),this._register(s),this.registerListeners()}registerListeners(){Z.setUnexpectedErrorHandler(e=>this.onUnexpectedError(e)),process.on("uncaughtException",e=>this.onUnexpectedError(e)),
process.on("unhandledRejection",(e,t)=>Z.onUnexpectedError(e)),ce.registerContextMenuListener(),this.lifecycleService.onWillShutdown(()=>this.dispose()),n.app.on("accessibility-support-changed",(e,t)=>{this.windowsMainService&&this.windowsMainService.sendToAll("vscode:accessibilitySupportChanged",t)}),n.app.on("activate",(e,t)=>{this.logService.trace("App#activate"),!t&&this.windowsMainService&&this.windowsMainService.openNewWindow(1)}),n.app.on("web-contents-created",(e,t)=>{t.on("will-attach-webview",(e,t,n)=>{const i=e=>{if(!e)return!1;if("data:text/html;charset=utf-8,%3C%21DOCTYPE%20html%3E%0D%0A%3Chtml%20lang%3D%22en%22%20style%3D%22width%3A%20100%25%3B%20height%3A%20100%25%22%3E%0D%0A%3Chead%3E%0D%0A%09%3Ctitle%3EVirtual%20Document%3C%2Ftitle%3E%0D%0A%3C%2Fhead%3E%0D%0A%3Cbody%20style%3D%22margin%3A%200%3B%20overflow%3A%20hidden%3B%20width%3A%20100%25%3B%20height%3A%20100%25%22%3E%0D%0A%3C%2Fbody%3E%0D%0A%3C%2Fhtml%3E"===e)return!0
;const t=z.URI.parse(e).fsPath.toLowerCase(),n=z.URI.file(this.environmentService.appRoot).fsPath.toLowerCase();return we.startsWith(t,n+de.sep)};delete t.preload,t.nodeIntegration=!1,i(n.src)&&i(t.preloadURL)||(delete t.preloadUrl,this.logService.error("webContents#web-contents-created: Prevented webview attach"),e.preventDefault())}),t.on("will-navigate",e=>{this.logService.error("webContents#will-navigate: Prevented webcontent navigation"),e.preventDefault()}),t.on("new-window",(e,t)=>{e.preventDefault(),n.shell.openExternal(t)})});let e=[],t=null;n.app.on("open-file",(n,i)=>{this.logService.trace("App#open-file: ",i),n.preventDefault(),e.push({uri:z.URI.file(i)}),null!==t&&(clearTimeout(t),t=null),t=setTimeout(()=>{this.windowsMainService&&(this.windowsMainService.open({context:1,cli:this.environmentService.args,urisToOpen:e,preferNewWindow:!0}),e=[],t=null)},100)}),n.app.on("new-window-for-tab",()=>{this.windowsMainService.openNewWindow(4)}),n.ipcMain.on("vscode:exit",(e,t)=>{
this.logService.trace("IPC#vscode:exit",t),this.dispose(),this.lifecycleService.kill(t)}),n.ipcMain.on("vscode:fetchShellEnv",e=>{const t=e.sender;h.getShellEnvironment().then(e=>{t.isDestroyed()||t.send("vscode:acceptShellEnv",e)},e=>{t.isDestroyed()||t.send("vscode:acceptShellEnv",{}),this.logService.error("Error fetching shell env",e)})}),n.ipcMain.on("vscode:broadcast",(e,t,n)=>{this.windowsMainService&&n.channel&&!B.isUndefinedOrNull(n.payload)&&(this.logService.trace("IPC#vscode:broadcast",n.channel,n.payload),this.onBroadcast(n.channel,n.payload),this.windowsMainService.sendToAll("vscode:broadcast",n,[t]))}),n.ipcMain.on("vscode:toggleDevTools",e=>e.sender.toggleDevTools()),n.ipcMain.on("vscode:openDevTools",e=>e.sender.openDevTools()),n.ipcMain.on("vscode:reloadWindow",e=>e.sender.reload()),n.powerMonitor.on("resume",()=>{this.windowsMainService&&this.windowsMainService.sendToAll("vscode:osResume",void 0)})}onUnexpectedError(e){if(e){const t={message:e.message,stack:e.stack}
;this.windowsMainService&&this.windowsMainService.sendToFocused("vscode:reportError",JSON.stringify(t))}this.logService.error(`[uncaught exception in main]: ${e}`),e.stack&&this.logService.error(e.stack)}onBroadcast(e,t){"vscode:changeColorTheme"===e&&"string"==typeof t&&le.storeBackgroundColor(this.stateService,JSON.parse(t))}startup(){this.logService.debug("Starting VS Code"),this.logService.debug(`from: ${this.environmentService.appRoot}`),this.logService.debug("args:",this.environmentService.args),r.isWindows&&L.default.win32AppUserModelId&&n.app.setAppUserModelId(L.default.win32AppUserModelId);try{r.isMacintosh&&!0===this.configurationService.getValue("window.nativeTabs")&&!n.systemPreferences.getUserDefault("NSUseImprovedLayoutPass","boolean")&&n.systemPreferences.setUserDefault("NSUseImprovedLayoutPass","boolean",!0)}catch(e){this.logService.error(e)}this.electronIpcServer=new g.Server;const e=e=>(this.logService.trace(`Resolved machine identifier: ${e}`),
this.sharedProcess=this.instantiationService.createInstance(v.SharedProcess,e,this.userEnv),this.sharedProcessClient=this.sharedProcess.whenReady().then(()=>m.connect(this.environmentService.sharedIPCHandle,"main")),this.initServices(e).then(e=>{this.environmentService.driverHandle&&te.serve(this.electronIpcServer,this.environmentService.driverHandle,this.environmentService,e).then(e=>{this.logService.info("Driver started at:",this.environmentService.driverHandle),this._register(e)});const t=e.createInstance(F.ProxyAuthHandler);this._register(t);const n=e.invokeFunction(e=>this.openFirstWindow(e));e.invokeFunction(e=>this.afterWindowOpen(e)),this.environmentService.args.trace&&this.stopTracingEventually(n)}));this.logService.trace("Resolving machine identifier...");const t=this.resolveMachineId();return"string"==typeof t?e(t):t.then(t=>e(t))}resolveMachineId(){const e=this.stateService.getItem(t.MACHINE_ID_KEY);return e||q.getMachineId().then(e=>(this.stateService.setItem(t.MACHINE_ID_KEY,e),e))}
stopTracingEventually(e){this.logService.info("Tracing: waiting for windows to get ready...");let t=!1;const i=e=>{t||(t=!0,n.contentTracing.stopRecording(de.join(ue.homedir(),`${L.default.applicationName}-${Math.random().toString(16).slice(-4)}.trace.txt`),t=>{e?this.logService.info(`Tracing: data recorded (after 30s timeout) to ${t}`):this.windowsMainService.showMessageBox({type:"info",message:he.localize(0,null),detail:he.localize(1,null,t),buttons:[he.localize(2,null)]},this.windowsMainService.getLastActiveWindow())}))},r=setTimeout(()=>i(!0),3e4);Promise.all(e.map(e=>e.ready())).then(()=>{clearTimeout(r),i(!1)})}initServices(e){const t=new S.ServiceCollection
;if("win32"===process.platform?t.set(p.IUpdateService,new b.SyncDescriptor(H.Win32UpdateService)):"linux"===process.platform?process.env.SNAP&&process.env.SNAP_REVISION?t.set(p.IUpdateService,new b.SyncDescriptor(ge.SnapUpdateService,[process.env.SNAP,process.env.SNAP_REVISION])):t.set(p.IUpdateService,new b.SyncDescriptor(V.LinuxUpdateService)):"darwin"===process.platform&&t.set(p.IUpdateService,new b.SyncDescriptor(G.DarwinUpdateService)),t.set(U.IWindowsMainService,new b.SyncDescriptor(a.WindowsManager,[e])),t.set(c.IWindowsService,new b.SyncDescriptor(u.WindowsService,[this.sharedProcess])),t.set(w.ILaunchService,new b.SyncDescriptor(w.LaunchService)),t.set(Y.IIssueService,new b.SyncDescriptor(J.IssueService,[e,this.userEnv])),t.set(ie.IMenubarService,new b.SyncDescriptor(re.MenubarService)),t.set(me.IStorageMainService,new b.SyncDescriptor(me.StorageMainService)),t.set(Se.IBackupMainService,new b.SyncDescriptor(ye.BackupMainService)),
t.set(N.IHistoryMainService,new b.SyncDescriptor(be.HistoryMainService)),t.set(I.IURLService,new b.SyncDescriptor(_e.URLService)),t.set(K.IWorkspacesMainService,new b.SyncDescriptor(Ce.WorkspacesMainService)),this.environmentService.isExtensionDevelopment||this.environmentService.args["disable-telemetry"]||!L.default.enableTelemetry)t.set(M.ITelemetryService,O.NullTelemetryService);else{const n=x.getDelayedChannel(this.sharedProcessClient.then(e=>e.getChannel("telemetryAppender"))),i={appender:O.combinedAppender(new A.TelemetryAppenderClient(n),new O.LogAppender(this.logService)),commonProperties:D.resolveCommonProperties(L.default.commit,T.default.version,e,this.environmentService.installSourcePath),piiPaths:[this.environmentService.appRoot,this.environmentService.extensionsPath]};t.set(M.ITelemetryService,new b.SyncDescriptor(W.TelemetryService,[i]))}const n=this.instantiationService.createChild(t);return n.invokeFunction(e=>Promise.all([this.initStorageService(e),this.initBackupService(e)])).then(()=>n)}
initStorageService(e){const t=e.get(me.IStorageMainService);return this.lifecycleService.onWillShutdown(e=>e.join(t.close())),Promise.resolve()}initBackupService(e){return e.get(Se.IBackupMainService).initialize()}openFirstWindow(e){const t=e.get(y.IInstantiationService),n=e.get(w.ILaunchService),i=new w.LaunchChannel(n);this.mainIpcServer.registerChannel("launch",i);const o=e.get(p.IUpdateService),s=new f.UpdateChannel(o);this.electronIpcServer.registerChannel("update",s);const a=e.get(Y.IIssueService),u=new Q.IssueChannel(a);this.electronIpcServer.registerChannel("issue",u);const d=e.get(K.IWorkspacesMainService),h=t.createInstance($.WorkspacesChannel,d);this.electronIpcServer.registerChannel("workspaces",h);const g=e.get(c.IWindowsService),m=new l.WindowsChannel(g);this.electronIpcServer.registerChannel("windows",m),this.sharedProcessClient.then(e=>e.registerChannel("windows",m));const v=e.get(ie.IMenubarService),S=new oe.MenubarChannel(v);this.electronIpcServer.registerChannel("menubar",S)
;const b=e.get(I.IURLService),C=new P.URLServiceChannel(b);this.electronIpcServer.registerChannel("url",C);const k=e.get(me.IStorageMainService),M=this._register(new ve.GlobalStorageDatabaseChannel(this.logService,k));this.electronIpcServer.registerChannel("storage",M);const O=new X.LogLevelSetterChannel(e.get(_.ILogService));this.electronIpcServer.registerChannel("loglevel",O),this.sharedProcessClient.then(e=>e.registerChannel("loglevel",O)),this.lifecycleService.ready();const A=this.windowsMainService=e.get(U.IWindowsMainService),W=new c.ActiveWindowManager(g),D=new x.StaticRouter(e=>W.getActiveClientId().then(t=>e===t)),L=this.electronIpcServer.getChannel("urlHandler",D),T=new P.URLHandlerChannelClient(L);if(r.isMacintosh){const t=e.get(E.IEnvironmentService);b.registerHandler({handleURL(e){if(0===A.getWindowCount()){const n=Object.assign({},t.args,{goto:!0}),[i]=A.open({context:5,cli:n,forceEmpty:!0});return i.ready().then(()=>b.open(e))}return Promise.resolve(!1)}})}b.registerHandler(T)
;const F=this.environmentService.args,R=F["open-url"]?F._urls:[],N=new ee.ElectronURLListener(R||[],b,this.windowsMainService);this._register(N),this.windowsMainService.ready(this.userEnv);const B=global.macOpenFiles,j=process.env.VSCODE_CLI?0:4,q=se.hasArgs(F._),H=se.hasArgs(F["folder-uri"]),V=se.hasArgs(F["file-uri"]);return!F["new-window"]||q||H||V?!B||!B.length||q||H||V?this.windowsMainService.open({context:j,cli:F,forceNewWindow:F["new-window"]||!q&&F["unity-launch"],diffMode:F.diff,initialStartup:!0}):this.windowsMainService.open({context:1,cli:F,urisToOpen:B.map(e=>({uri:z.URI.file(e)})),initialStartup:!0}):this.windowsMainService.open({context:j,cli:F,forceNewWindow:!0,forceEmpty:!0,initialStartup:!0})}afterWindowOpen(t){const n=t.get(U.IWindowsMainService),i=t.get(N.IHistoryMainService);if(r.isWindows){try{const t=new(0,e.__$__nodeRequire("windows-mutex").Mutex)(L.default.win32MutexName);this._register(R.toDisposable(()=>t.release()))}catch(e){this.environmentService.isBuilt||n.showMessageBox({
title:L.default.nameLong,type:"warning",message:"Failed to load windows-mutex!",detail:e.toString(),noLink:!0})}try{e.__$__nodeRequire("windows-foreground-love")}catch(e){this.environmentService.isBuilt||n.showMessageBox({title:L.default.nameLong,type:"warning",message:"Failed to load windows-foreground-love!",detail:e.toString(),noLink:!0})}}this.handleRemoteAuthorities(),j.KeyboardLayoutMonitor.INSTANCE.onDidChangeKeyboardLayout(()=>{this.windowsMainService.sendToAll("vscode:keyboardLayoutChanged",!1)}),i.updateWindowsJumpList(),i.onRecentlyOpenedChange(()=>i.updateWindowsJumpList());this._register(new ae.RunOnceScheduler(()=>h.getShellEnvironment().then(e=>this.sharedProcess.spawn(e)),3e3)).schedule()}handleRemoteAuthorities(){const e=new Map,t=this.environmentService.isBuilt;class r{constructor(e,n,i){this._authority=e,this._client=ne.connectRemoteAgentManagement(e,n,i,"main",t),this._disposeRunner=new ae.RunOnceScheduler(()=>this.dispose(),5e3)}dispose(){this._disposeRunner.dispose(),
e.delete(this._authority),this._client.then(e=>{e.dispose()})}getClient(){return this._disposeRunner.schedule(),this._client}}const o=new Map;n.ipcMain.on("vscode:remoteAuthorityResolved",(t,n)=>{this.logService.info("Received resolved authority",n.authority),o.set(n.authority,n),e.has(n.authority)&&e.get(n.authority).dispose()});n.protocol.registerBufferProtocol(pe.REMOTE_HOST_SCHEME,(t,n)=>i(this,void 0,void 0,function*(){if("GET"!==t.method)return n(void 0);const i=z.URI.parse(t.url);let s;if(e.has(i.authority))s=e.get(i.authority);else{let t=(e=>{if(this.logService.info("Resolving authority",e),e.indexOf("+")>=0)return o.has(e)?o.get(e)||null:(this.logService.info("Didnot find resolved authority for",e),null);{const[t,n]=e.split(":");return{authority:e,host:t,port:parseInt(n,10)}}})(i.authority);if(!t)return void n(void 0);s=new r(i.authority,t.host,t.port),e.set(i.authority,s)}try{const t=yield s.getClient();if(e.has(i.authority)){
const e=yield t.getChannel(fe.REMOTE_FILE_SYSTEM_CHANNEL_NAME).call("readFile",[i]);n(Buffer.from(e))}else n(void 0)}catch(e){Z.onUnexpectedError(e),n(void 0)}}))}};Ee.MACHINE_ID_KEY="telemetry.machineId",Ee=o([s(2,y.IInstantiationService),s(3,_.ILogService),s(4,E.IEnvironmentService),s(5,d.ILifecycleService),s(6,k.IConfigurationService),s(7,C.IStateService)],Ee),t.CodeApplication=Ee}),define(t[191],n([1,0,10,15,3,20,102,24,73,25,51,61,5,106,57,55,7,138,30,9,123,14,130,43,182,16,185,11,42,115,65,113,121,19,147,152]),function(e,t,n,i,r,o,s,a,c,l,u,d,h,p,f,g,m,v,w,y,S,b,_,C,E,k,I,P,M,O,A,W,D,x,L){"use strict";function T(t){function i(t){return u.serve(a.mainIPCHandle).then(e=>{if(a.args.status)throw s.warn("Warning: The --status argument can only be used if Code is already running. Please run it again after Code has started."),new B("Terminating...")
;if(void 0!==a.args["upload-logs"])throw s.warn("Warning: The --upload-logs argument can only be used if Code is already running. Please run it again after Code has started."),new B("Terminating...");return r.isMacintosh&&n.app.dock.show(),process.env.VSCODE_PID=String(process.pid),e},l=>"EADDRINUSE"!==l.code?(R(a,l),Promise.reject(l)):(r.isMacintosh&&n.app.dock.hide(),u.connect(a.mainIPCHandle,"main").then(t=>{if(a.extensionTestsLocationURI&&!a.debugExtensionHost.break){const e="Running extension tests from the command line is currently only supported if no other instance of Code is running.";return s.error(e),t.dispose(),Promise.reject(new Error(e))}let n;a.wait||a.status||a.args["upload-logs"]||(n=setTimeout(()=>{F(P.localize(0,null,o.default.nameShort),P.localize(1,null))},1e4));const i=t.getChannel("launch"),l=new d.LaunchChannelClient(i)
;return a.args.status?l.getMainProcessInfo().then(e=>c.invokeFunction(t=>t.get(A.IDiagnosticsService).printDiagnostics(e).then(()=>Promise.reject(new B)))):void 0!==a.args["upload-logs"]?c.invokeFunction(e=>D.uploadLogs(l,e.get(C.IRequestService),a).then(()=>Promise.reject(new B))):(s.trace("Sending env to running instance..."),function(t){let n=Promise.resolve();return r.isWindows&&(n=t.getMainProcessId().then(t=>{s.trace("Sending some foreground love to the running instance:",t);try{const{allowSetForegroundWindow:n}=e.__$__nodeRequire("windows-foreground-love");n(t)}catch(e){}})),n}(l).then(()=>l.start(a.args,process.env)).then(()=>t.dispose()).then(()=>(n&&clearTimeout(n),Promise.reject(new B("Sent env to running instance. Terminating...")))))},e=>{if(!t||r.isWindows||"ECONNREFUSED"!==e.code)return"EPERM"===e.code&&F(P.localize(2,null,o.default.nameShort),P.localize(3,null)),Promise.reject(e);try{k.unlinkSync(a.mainIPCHandle)}catch(e){return s.warn("Could not delete obsolete instance handle",e),
Promise.reject(e)}return i(!1)})))}const s=t.get(m.ILogService),a=t.get(y.IEnvironmentService),c=t.get(h.IInstantiationService);return i(!0)}function F(e,t){n.dialog.showMessageBox({title:o.default.nameLong,type:"warning",buttons:[M.mnemonicButtonLabel(P.localize(4,null))],message:e,detail:t,noLink:!0})}function R(e,t){"EACCES"!==t.code&&"EPERM"!==t.code||F(P.localize(5,null),P.localize(6,null,e.userDataPath))}function U(e,t){const n=e.get(m.ILogService),i=e.get(l.ILifecycleService);let r=0;t&&(t.isExpected?t.message&&n.trace(t.message):(r=1,t.stack?n.error(t.stack):n.error(`Startup error: ${t.toString()}`))),i.kill(r)}function N(e){const t=new W.BufferLogService,n=function(e,t){const n=new f.ServiceCollection,i=new S.EnvironmentService(e,process.execPath),r=new m.MultiplexLogService([new m.ConsoleLogMainService(m.getLogLevel(i)),t]);return process.once("exit",()=>r.dispose()),n.set(y.IEnvironmentService,i),n.set(m.ILogService,r),n.set(l.ILifecycleService,new g.SyncDescriptor(l.LifecycleService)),
n.set(w.IStateService,new g.SyncDescriptor(v.StateService)),n.set(b.IConfigurationService,new g.SyncDescriptor(_.ConfigurationService)),n.set(C.IRequestService,new g.SyncDescriptor(E.RequestService)),n.set(A.IDiagnosticsService,new g.SyncDescriptor(A.DiagnosticsService)),new p.InstantiationService(n,!0)}(e,t);n.invokeFunction(e=>{const r=e.get(y.IEnvironmentService),o=e.get(w.IStateService),s=function(e){const t={VSCODE_IPC_HOOK:e.mainIPCHandle,VSCODE_NLS_CONFIG:process.env.VSCODE_NLS_CONFIG,VSCODE_LOGS:process.env.VSCODE_LOGS};return process.env.VSCODE_PORTABLE&&(t.VSCODE_PORTABLE=process.env.VSCODE_PORTABLE),i.assign(process.env,t),t}(r);return function(e,t){const n=Promise.all([e.extensionsPath,e.nodeCachedDataDir,e.logsPath,e.globalStorageHome,e.workspaceStorageHome,e.backupHome].map(e=>e?a.mkdirp(e):void 0)),i=t.init();return Promise.all([n,i])}(r,o).then(()=>n.invokeFunction(T),e=>(R(r,e),Promise.reject(e))).then(e=>(t.logger=O.createSpdLogService("main",t.getLevel(),r.logsPath),
n.createInstance(I.CodeApplication,e,s).startup()))}).then(null,e=>n.invokeFunction(U,e))}Object.defineProperty(t,"__esModule",{value:!0});class B extends Error{constructor(){super(...arguments),this.isExpected=!0}}!function(){x.setUnexpectedErrorHandler(e=>console.error(e));let e;try{e=s.parseMainProcessArgv(process.argv),e=c.validatePaths(e)}catch(e){return console.error(e.message),void n.app.exit(1)}e.wait&&!e.waitMarkerFilePath?L.createWaitMarkerFile(e.verbose).then(t=>{t&&(process.argv.push("--waitMarkerFilePath",t),e.waitMarkerFilePath=t),N(e)}):N(e)}()})}).call(this);
//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/a3db5be9b5c6ba46bb7555ec5d60178ecc2eaae4/core/vs/code/electron-main/main.js.map
